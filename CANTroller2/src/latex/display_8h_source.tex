\doxysection{display.\+h}
\hypertarget{display_8h_source}{}\label{display_8h_source}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00002\ \textcolor{preprocessor}{\#include\ "{}tftsetup.h"{}}}
\DoxyCodeLine{00003\ \textcolor{preprocessor}{\#include\ "{}inputs.h"{}}}
\DoxyCodeLine{00004\ \textcolor{keyword}{static}\ \mbox{\hyperlink{class_encoder}{Encoder}}\ encoder(encoder\_a\_pin,\ encoder\_b\_pin,\ encoder\_sw\_pin);}
\DoxyCodeLine{00005\ \textcolor{keyword}{static}\ \mbox{\hyperlink{class_momentary_button}{MomentaryButton}}\ bootbutton(boot\_sw\_pin,\ \textcolor{keyword}{false});}
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#include\ "{}animations.h"{}}}
\DoxyCodeLine{00007\ \textcolor{preprocessor}{\#include\ "{}neopixel.h"{}}}
\DoxyCodeLine{00008\ }
\DoxyCodeLine{00009\ \textcolor{preprocessor}{\#define\ disp\_vshift\_pix\ 2\ \ }\textcolor{comment}{//\ Unknown.\ \ Note:\ At\ smallest\ text\ size,\ characters\ are\ 5x7\ pix\ +\ pad\ on\ rt\ and\ bot\ for\ 6x8\ pix.}}
\DoxyCodeLine{00010\ \textcolor{preprocessor}{\#define\ disp\_runmode\_text\_x\ 12}}
\DoxyCodeLine{00011\ \textcolor{preprocessor}{\#define\ disp\_lines\ 20\ \ }\textcolor{comment}{//\ Max\ lines\ of\ text\ displayable\ at\ line\ height\ =\ disp\_line\_height\_pix}}
\DoxyCodeLine{00012\ \textcolor{preprocessor}{\#define\ disp\_fixed\_lines\ 8\ \ }\textcolor{comment}{//\ Lines\ of\ static\ variables/values\ always\ displayed}}
\DoxyCodeLine{00013\ \textcolor{preprocessor}{\#define\ disp\_line\_height\_pix\ 12\ \ }\textcolor{comment}{//\ Pixel\ height\ of\ each\ text\ line.\ Screen\ can\ fit\ 16x\ 15-\/pixel\ or\ 20x\ 12-\/pixel\ lines}}
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#define\ disp\_font\_height\ 8}}
\DoxyCodeLine{00015\ \textcolor{preprocessor}{\#define\ disp\_font\_width\ 6}}
\DoxyCodeLine{00016\ \textcolor{preprocessor}{\#define\ disp\_bargraph\_width\ 40}}
\DoxyCodeLine{00017\ \textcolor{preprocessor}{\#define\ disp\_bargraph\_squeeze\ 1}}
\DoxyCodeLine{00018\ \textcolor{preprocessor}{\#define\ disp\_maxlength\ 6\ \ }\textcolor{comment}{//\ How\ many\ characters\ fit\ between\ the\ "{}:"{}\ and\ the\ units\ string}}
\DoxyCodeLine{00019\ \textcolor{preprocessor}{\#define\ disp\_default\_float\_precision\ 3\ \ }\textcolor{comment}{//\ Significant\ digits\ displayed\ for\ float\ values.\ Higher\ causes\ more\ screen\ draws}}
\DoxyCodeLine{00020\ \textcolor{preprocessor}{\#define\ disp\_datapage\_names\_x\ 12}}
\DoxyCodeLine{00021\ \textcolor{preprocessor}{\#define\ disp\_datapage\_values\_x\ 59}}
\DoxyCodeLine{00022\ \textcolor{preprocessor}{\#define\ disp\_datapage\_units\_x\ 103\ \ \ \ \ \ \ \ }}
\DoxyCodeLine{00023\ \textcolor{preprocessor}{\#define\ disp\_bargraphs\_x\ 122}}
\DoxyCodeLine{00024\ \textcolor{preprocessor}{\#define\ disp\_datapage\_title\_x\ 83}}
\DoxyCodeLine{00025\ uint8\_t\ colorcard[NUM\_RUNMODES]\ =\ \{\ MGT,\ WHT,\ RED,\ ORG,\ YEL,\ GRN,\ TEAL,\ PUR\ \};}
\DoxyCodeLine{00026\ std::string\ modecard[NUM\_RUNMODES]\ =\ \{\ \textcolor{stringliteral}{"{}Basic"{}},\ \textcolor{stringliteral}{"{}Asleep"{}},\ \textcolor{stringliteral}{"{}Shutdn"{}},\ \textcolor{stringliteral}{"{}Stall"{}},\ \textcolor{stringliteral}{"{}Hold"{}},\ \textcolor{stringliteral}{"{}Fly"{}},\ \textcolor{stringliteral}{"{}Cruise"{}},\ \textcolor{stringliteral}{"{}Cal"{}}\ \};}
\DoxyCodeLine{00027\ std::string\ side\_menu\_buttons[5]\ =\ \{\ \textcolor{stringliteral}{"{}PAG"{}},\ \textcolor{stringliteral}{"{}SEL"{}},\ \textcolor{stringliteral}{"{}+\ \ "{}},\ \textcolor{stringliteral}{"{}-\/\ \ "{}},\ \textcolor{stringliteral}{"{}SIM"{}}\ \};\ \ \textcolor{comment}{//\ Pad\ shorter\ names\ with\ spaces\ on\ the\ right}}
\DoxyCodeLine{00028\ std::string\ top\_menu\_buttons[4]\ \ =\ \{\ \textcolor{stringliteral}{"{}\ CAL\ "{}},\ \textcolor{stringliteral}{"{}BASIC"{}},\ \textcolor{stringliteral}{"{}\ IGN\ "{}},\ \textcolor{stringliteral}{"{}POWER"{}}\ \};\ \ \textcolor{comment}{//\ Pad\ shorter\ names\ with\ spaces\ to\ center}}
\DoxyCodeLine{00029\ std::string\ sensorcard[14]\ =\ \{\ \textcolor{stringliteral}{"{}none"{}},\ \textcolor{stringliteral}{"{}joy"{}},\ \textcolor{stringliteral}{"{}bkpres"{}},\ \textcolor{stringliteral}{"{}brkpos"{}},\ \textcolor{stringliteral}{"{}speedo"{}},\ \textcolor{stringliteral}{"{}tach"{}},\ \textcolor{stringliteral}{"{}airflw"{}},\ \textcolor{stringliteral}{"{}mapsns"{}},\ \textcolor{stringliteral}{"{}engtmp"{}},\ \textcolor{stringliteral}{"{}batery"{}},\ \textcolor{stringliteral}{"{}startr"{}},\ \textcolor{stringliteral}{"{}basic"{}},\ \textcolor{stringliteral}{"{}ign"{}},\ \textcolor{stringliteral}{"{}syspwr"{}}\ \};}
\DoxyCodeLine{00030\ }
\DoxyCodeLine{00031\ \textcolor{comment}{//\ These\ defines\ are\ just\ a\ convenience\ to\ keep\ the\ below\ datapage\ strings\ array\ initializations\ aligned\ in\ neat\ rows\ \&\ cols\ for\ legibility}}
\DoxyCodeLine{00032\ \textcolor{preprocessor}{\#define\ stEr\ "{}St\(\backslash\)x88r"{}}}
\DoxyCodeLine{00033\ \textcolor{preprocessor}{\#define\ brAk\ "{}Br\(\backslash\)x83k"{}}}
\DoxyCodeLine{00034\ \textcolor{preprocessor}{\#define\ spEd\ "{}Sp\(\backslash\)x88"{}"{}d"{}}}
\DoxyCodeLine{00035\ \textcolor{preprocessor}{\#define\ b1nary\ "{}\ \ \(\backslash\)xa7"{}}}
\DoxyCodeLine{00036\ \textcolor{preprocessor}{\#define\ scroll\ "{}\(\backslash\)x12"{}}}
\DoxyCodeLine{00037\ \textcolor{preprocessor}{\#define\ degree\ "{}\(\backslash\)xf7"{}}}
\DoxyCodeLine{00038\ \textcolor{preprocessor}{\#define\ degreF\ "{}\(\backslash\)xf7"{}"{}F"{}}}
\DoxyCodeLine{00039\ \textcolor{preprocessor}{\#define\ degsec\ "{}\(\backslash\)xf7/s"{}}}
\DoxyCodeLine{00040\ \textcolor{preprocessor}{\#define\ \_\_\_\_\_\_\ "{}"{}}}
\DoxyCodeLine{00041\ \textcolor{preprocessor}{\#define\ \_\_\_\_\_\_\_\_\_\_\ "{}\ \ \ \ \ \ \(\backslash\)xf9"{}}}
\DoxyCodeLine{00042\ \textcolor{preprocessor}{\#define\ neo\_bright\ "{}NeoBr\(\backslash\)x8dgt"{}}}
\DoxyCodeLine{00043\ \textcolor{preprocessor}{\#define\ maxadjrate\ "{}MaxAjR\(\backslash\)x83t"{}}}
\DoxyCodeLine{00044\ \textcolor{preprocessor}{\#define\ horfailsaf\ "{}HFails\(\backslash\)x83"{}"{}f"{}}}
\DoxyCodeLine{00045\ \textcolor{keyword}{static}\ std::string\ telemetry[disp\_fixed\_lines]\ =\ \{\ \textcolor{stringliteral}{"{}TriggerV"{}},\ \textcolor{stringliteral}{"{}\ \ \ Speed"{}},\ \textcolor{stringliteral}{"{}\ \ \ \ Tach"{}},\ \textcolor{stringliteral}{"{}Throttle"{}},\ brAk\textcolor{stringliteral}{"{}Pres"{}},\ brAk\textcolor{stringliteral}{"{}Motr"{}},\ \textcolor{stringliteral}{"{}JoysticH"{}},\ stEr\textcolor{stringliteral}{"{}Motr"{}},\ \};\ \ \textcolor{comment}{//\ Fixed\ rows}}
\DoxyCodeLine{00046\ \textcolor{keyword}{static}\ std::string\ units[disp\_fixed\_lines]\ =\ \{\ \textcolor{stringliteral}{"{}\%"{}},\ \textcolor{stringliteral}{"{}mph"{}},\ \textcolor{stringliteral}{"{}rpm"{}},\ \textcolor{stringliteral}{"{}\%"{}},\ \textcolor{stringliteral}{"{}psi"{}},\ \textcolor{stringliteral}{"{}\%"{}},\ \textcolor{stringliteral}{"{}\%"{}},\ \textcolor{stringliteral}{"{}\%"{}}\ \};\ \ \textcolor{comment}{//\ Fixed\ rows}}
\DoxyCodeLine{00047\ \textcolor{keyword}{static}\ std::string\ brake\_pid\_card[2]\ =\ \{\ \textcolor{stringliteral}{"{}presur"{}},\ \textcolor{stringliteral}{"{}positn"{}}\ \};}
\DoxyCodeLine{00048\ \textcolor{keyword}{static}\ std::string\ pagecard[datapages::NUM\_DATAPAGES]\ =\ \{\ \textcolor{stringliteral}{"{}Run\ "{}},\ \textcolor{stringliteral}{"{}Joy\ "{}},\ \textcolor{stringliteral}{"{}Sens"{}},\ \textcolor{stringliteral}{"{}PWMs"{}},\ \textcolor{stringliteral}{"{}Idle"{}},\ \textcolor{stringliteral}{"{}Bpid"{}},\ \textcolor{stringliteral}{"{}Gpid"{}},\ \textcolor{stringliteral}{"{}Cpid"{}},\ \textcolor{stringliteral}{"{}Temp"{}},\ \textcolor{stringliteral}{"{}Sim\ "{}},\ \textcolor{stringliteral}{"{}UI\ \ "{}}\ \};}
\DoxyCodeLine{00049\ \textcolor{keyword}{static}\ std::string\ motormodecard[NumMotorModes+1]\ =\ \{\ \textcolor{stringliteral}{"{}Halt"{}},\ \textcolor{stringliteral}{"{}Idle"{}},\ \textcolor{stringliteral}{"{}Releas"{}},\ \textcolor{stringliteral}{"{}OpenLp"{}},\ \textcolor{stringliteral}{"{}PID"{}},\ \textcolor{stringliteral}{"{}AuStop"{}},\ \textcolor{stringliteral}{"{}AuHold"{}},\ \textcolor{stringliteral}{"{}Park"{}},\ \textcolor{stringliteral}{"{}Cruise"{}},\ \textcolor{stringliteral}{"{}Calib"{}},\ \textcolor{stringliteral}{"{}Start"{}},\ \textcolor{stringliteral}{"{}NA"{}}\ \};}
\DoxyCodeLine{00050\ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ int32\_t\ tuning\_first\_editable\_line[datapages::NUM\_DATAPAGES]\ =\ \{\ 9,\ 9,\ 5,\ 7,\ 6,\ 8,\ 7,\ 7,\ 10,\ 0,\ 7\ \};\ \ \textcolor{comment}{//\ first\ value\ in\ each\ dataset\ page\ that's\ editable.\ All\ values\ after\ this\ must\ also\ be\ editable}}
\DoxyCodeLine{00051\ \textcolor{keyword}{static}\ std::string\ datapage\_names[datapages::NUM\_DATAPAGES][disp\_tuning\_lines]\ =\ \{}
\DoxyCodeLine{00052\ \ \ \ \ \{\ brAk\textcolor{stringliteral}{"{}Posn"{}},\ \textcolor{stringliteral}{"{}MuleBatt"{}},\ \textcolor{stringliteral}{"{}\ \ \ \ \ Pot"{}},\ \textcolor{stringliteral}{"{}Air\ Velo"{}},\ \textcolor{stringliteral}{"{}\ \ \ \ \ MAP"{}},\ \textcolor{stringliteral}{"{}MasAirFl"{}},\ \textcolor{stringliteral}{"{}Gas\ Mode"{}},\ brAk\textcolor{stringliteral}{"{}Mode"{}},\ stEr\textcolor{stringliteral}{"{}Mode"{}},\ \textcolor{stringliteral}{"{}Governor"{}},\ stEr\textcolor{stringliteral}{"{}Safe"{}},\ \},\ \ \textcolor{comment}{//\ PG\_RUN}}
\DoxyCodeLine{00053\ \ \ \ \ \{\ \textcolor{stringliteral}{"{}HRc\ Horz"{}},\ \textcolor{stringliteral}{"{}HRc\ Vert"{}},\ \textcolor{stringliteral}{"{}HotRcCh3"{}},\ \textcolor{stringliteral}{"{}HotRcCh4"{}},\ \textcolor{stringliteral}{"{}TrigVRaw"{}},\ \textcolor{stringliteral}{"{}JoyH\ Raw"{}},\ \_\_\_\_\_\_\_\_\_\_,\ \_\_\_\_\_\_\_\_\_\_,\ \_\_\_\_\_\_\_\_\_\_,\ horfailsaf,\ \textcolor{stringliteral}{"{}Deadband"{}},\ \},\ \ \textcolor{comment}{//\ PG\_JOY}}
\DoxyCodeLine{00054\ \ \ \ \ \{\ \textcolor{stringliteral}{"{}PressRaw"{}},\ \textcolor{stringliteral}{"{}BkPosRaw"{}},\ \textcolor{stringliteral}{"{}TachPuls"{}},\ \textcolor{stringliteral}{"{}\ Pot\ Raw"{}},\ \_\_\_\_\_\_\_\_\_\_,\ \textcolor{stringliteral}{"{}AirV\ Max"{}},\ \textcolor{stringliteral}{"{}\ MAP\ Min"{}},\ \textcolor{stringliteral}{"{}\ MAP\ Max"{}},\ spEd\textcolor{stringliteral}{"{}Idle"{}},\ spEd\textcolor{stringliteral}{"{}RedL"{}},\ \textcolor{stringliteral}{"{}BkPos0Pt"{}},\ \},\ \ \textcolor{comment}{//\ PG\_SENS}}
\DoxyCodeLine{00055\ \ \ \ \ \{\ \textcolor{stringliteral}{"{}Throttle"{}},\ \textcolor{stringliteral}{"{}Throttle"{}},\ brAk\textcolor{stringliteral}{"{}Motr"{}},\ brAk\textcolor{stringliteral}{"{}Motr"{}},\ stEr\textcolor{stringliteral}{"{}Motr"{}},\ stEr\textcolor{stringliteral}{"{}Motr"{}},\ \_\_\_\_\_\_\_\_\_\_,\ \textcolor{stringliteral}{"{}ThrotCls"{}},\ \textcolor{stringliteral}{"{}ThrotOpn"{}},\ brAk\textcolor{stringliteral}{"{}Stop"{}},\ brAk\textcolor{stringliteral}{"{}Duty"{}},\ \},\ \ \textcolor{comment}{//\ PG\_PWMS}}
\DoxyCodeLine{00056\ \ \ \ \ \{\ \textcolor{stringliteral}{"{}Gas\ Mode"{}},\ \textcolor{stringliteral}{"{}Tach\ Tgt"{}},\ \textcolor{stringliteral}{"{}\ \ \ \ Idle"{}},\ \textcolor{stringliteral}{"{}\ \ \ \ Idle"{}},\ \textcolor{stringliteral}{"{}\ \ \ \ Idle"{}},\ \textcolor{stringliteral}{"{}FuelPump"{}},\ \textcolor{stringliteral}{"{}StartGas"{}},\ \textcolor{stringliteral}{"{}ColdIdle"{}},\ \textcolor{stringliteral}{"{}Hot\ Idle"{}},\ \textcolor{stringliteral}{"{}ColdTemp"{}},\ \textcolor{stringliteral}{"{}Hot\ Temp"{}},\ \},\ \ \textcolor{comment}{//\ PG\_IDLE}}
\DoxyCodeLine{00057\ \ \ \ \ \{\ brAk\textcolor{stringliteral}{"{}Posn"{}},\ brAk\textcolor{stringliteral}{"{}Mode"{}},\ \textcolor{stringliteral}{"{}Pn|PrErr"{}},\ \textcolor{stringliteral}{"{}BrakeTgt"{}},\ \textcolor{stringliteral}{"{}HybrdTgt"{}},\ \textcolor{stringliteral}{"{}OutRatio"{}},\ \textcolor{stringliteral}{"{}MotrHeat"{}},\ \_\_\_\_\_\_\_\_\_\_,\ \textcolor{stringliteral}{"{}Brake\ Kp"{}},\ \textcolor{stringliteral}{"{}Brake\ Ki"{}},\ \textcolor{stringliteral}{"{}Brake\ Kd"{}},\ \},\ \ \textcolor{comment}{//\ PG\_BPID}}
\DoxyCodeLine{00058\ \ \ \ \ \{\ \textcolor{stringliteral}{"{}AngleTgt"{}},\ \textcolor{stringliteral}{"{}TachTarg"{}},\ \textcolor{stringliteral}{"{}Tach\ Err"{}},\ \textcolor{stringliteral}{"{}\ \ P\ Term"{}},\ \textcolor{stringliteral}{"{}\ \ I\ Term"{}},\ \textcolor{stringliteral}{"{}\ \ D\ Term"{}},\ \textcolor{stringliteral}{"{}Integral"{}},\ \textcolor{stringliteral}{"{}AnglVelo"{}},\ \textcolor{stringliteral}{"{}\ \ Gas\ Kp"{}},\ \textcolor{stringliteral}{"{}\ \ Gas\ Ki"{}},\ \textcolor{stringliteral}{"{}\ \ Gas\ Kd"{}},\ \},\ \ \textcolor{comment}{//\ PG\_GPID}}
\DoxyCodeLine{00059\ \ \ \ \ \{\ spEd\textcolor{stringliteral}{"{}Targ"{}},\ \textcolor{stringliteral}{"{}SpeedErr"{}},\ \textcolor{stringliteral}{"{}\ \ P\ Term"{}},\ \textcolor{stringliteral}{"{}\ \ I\ Term"{}},\ \textcolor{stringliteral}{"{}\ \ D\ Term"{}},\ \textcolor{stringliteral}{"{}Integral"{}},\ \textcolor{stringliteral}{"{}ThrotSet"{}},\ maxadjrate,\ \textcolor{stringliteral}{"{}Cruis\ Kp"{}},\ \textcolor{stringliteral}{"{}Cruis\ Ki"{}},\ \textcolor{stringliteral}{"{}Cruis\ Kd"{}},\ \},\ \ \textcolor{comment}{//\ PG\_CPID}}
\DoxyCodeLine{00060\ \ \ \ \ \{\ \textcolor{stringliteral}{"{}\ Ambient"{}},\ \textcolor{stringliteral}{"{}\ \ Engine"{}},\ \textcolor{stringliteral}{"{}Wheel\ FL"{}},\ \textcolor{stringliteral}{"{}Wheel\ FR"{}},\ \textcolor{stringliteral}{"{}Wheel\ RL"{}},\ \textcolor{stringliteral}{"{}Wheel\ RR"{}},\ \textcolor{stringliteral}{"{}BrkMotor"{}},\ \textcolor{stringliteral}{"{}\ Touch\ X"{}},\ \textcolor{stringliteral}{"{}\ Touch\ Y"{}},\ \textcolor{stringliteral}{"{}\ \ Uptime"{}},\ \textcolor{stringliteral}{"{}Webservr"{}},\ \},\ \ \textcolor{comment}{//\ PG\_TEMP}}
\DoxyCodeLine{00061\ \ \ \ \ \{\ \textcolor{stringliteral}{"{}Joystick"{}},\ brAk\textcolor{stringliteral}{"{}Pres"{}},\ brAk\textcolor{stringliteral}{"{}Posn"{}},\ \textcolor{stringliteral}{"{}\ \ Speedo"{}},\ \textcolor{stringliteral}{"{}\ \ \ \ Tach"{}},\ \textcolor{stringliteral}{"{}AirSpeed"{}},\ \textcolor{stringliteral}{"{}\ \ \ \ \ MAP"{}},\ \textcolor{stringliteral}{"{}Basic\ Sw"{}},\ \textcolor{stringliteral}{"{}\ Pot\ Map"{}},\ \textcolor{stringliteral}{"{}CalBrake"{}},\ \textcolor{stringliteral}{"{}\ Cal\ Gas"{}},\ \},\ \ \textcolor{comment}{//\ PG\_SIM}}
\DoxyCodeLine{00062\ \ \ \ \ \{\ \textcolor{stringliteral}{"{}Loop\ Avg"{}},\ \textcolor{stringliteral}{"{}LoopPeak"{}},\ \textcolor{stringliteral}{"{}LoopFreq"{}},\ \textcolor{stringliteral}{"{}FramRate"{}},\ \textcolor{stringliteral}{"{}Draw\ Clk"{}},\ \textcolor{stringliteral}{"{}Push\ Clk"{}},\ \textcolor{stringliteral}{"{}Idle\ Clk"{}},\ \textcolor{stringliteral}{"{}BlnkDemo"{}},\ neo\_bright,\ \textcolor{stringliteral}{"{}NeoDesat"{}},\ \textcolor{stringliteral}{"{}Animaton"{}},\ \},\ \ \textcolor{comment}{//\ PG\_UI}}
\DoxyCodeLine{00063\ \};}
\DoxyCodeLine{00064\ \textcolor{keyword}{static}\ std::string\ tuneunits[datapages::NUM\_DATAPAGES][disp\_tuning\_lines]\ =\ \{}
\DoxyCodeLine{00065\ \ \ \ \ \{\ \textcolor{stringliteral}{"{}in"{}},\ \ \ \textcolor{stringliteral}{"{}V"{}},\ \ \ \ \textcolor{stringliteral}{"{}\%"{}},\ \ \ \ \textcolor{stringliteral}{"{}mph"{}},\ \ \textcolor{stringliteral}{"{}atm"{}},\ \ \textcolor{stringliteral}{"{}g/s"{}},\ \ scroll,\ scroll,\ scroll,\ \textcolor{stringliteral}{"{}\%"{}},\ \ \ \ \textcolor{stringliteral}{"{}\%"{}},\ \ \ \ \},\ \ \textcolor{comment}{//\ PG\_RUN}}
\DoxyCodeLine{00066\ \ \ \ \ \{\ \textcolor{stringliteral}{"{}us"{}},\ \ \ \textcolor{stringliteral}{"{}us"{}},\ \ \ \textcolor{stringliteral}{"{}us"{}},\ \ \ \textcolor{stringliteral}{"{}us"{}},\ \ \ \textcolor{stringliteral}{"{}\%"{}},\ \ \ \ \textcolor{stringliteral}{"{}\%"{}},\ \ \ \ \_\_\_\_\_\_,\ \_\_\_\_\_\_,\ \_\_\_\_\_\_,\ \textcolor{stringliteral}{"{}us"{}},\ \ \ \textcolor{stringliteral}{"{}us"{}},\ \ \ \},\ \ \textcolor{comment}{//\ PG\_JOY}}
\DoxyCodeLine{00067\ \ \ \ \ \{\ \textcolor{stringliteral}{"{}adc"{}},\ \ \textcolor{stringliteral}{"{}adc"{}},\ \ \textcolor{stringliteral}{"{}ms"{}},\ \ \ \textcolor{stringliteral}{"{}adc"{}},\ \ \_\_\_\_\_\_,\ \textcolor{stringliteral}{"{}mph"{}},\ \ \textcolor{stringliteral}{"{}atm"{}},\ \ \textcolor{stringliteral}{"{}atm"{}},\ \ \textcolor{stringliteral}{"{}mph"{}},\ \ \textcolor{stringliteral}{"{}mph"{}},\ \ \textcolor{stringliteral}{"{}in"{}},\ \ \ \},\ \ \textcolor{comment}{//\ PG\_SENS}}
\DoxyCodeLine{00068\ \ \ \ \ \{\ degree,\ \textcolor{stringliteral}{"{}us"{}},\ \ \ \textcolor{stringliteral}{"{}V"{}},\ \ \ \ \textcolor{stringliteral}{"{}us"{}},\ \ \ \textcolor{stringliteral}{"{}V"{}},\ \ \ \ \textcolor{stringliteral}{"{}us"{}},\ \ \ \_\_\_\_\_\_,\ degree,\ degree,\ \textcolor{stringliteral}{"{}us"{}},\ \ \ \textcolor{stringliteral}{"{}\%"{}},\ \ \ \ \},\ \ \textcolor{comment}{//\ PG\_PWMS}}
\DoxyCodeLine{00069\ \ \ \ \ \{\ scroll,\ \textcolor{stringliteral}{"{}rpm"{}},\ \ \textcolor{stringliteral}{"{}\%"{}},\ \ \ \ degree,\ \textcolor{stringliteral}{"{}rpm"{}},\ \ \textcolor{stringliteral}{"{}V"{}},\ \ \ \ \textcolor{stringliteral}{"{}\%"{}},\ \ \ \ degree,\ degree,\ degreF,\ degreF,\ \},\ \ \textcolor{comment}{//\ PG\_IDLE}}
\DoxyCodeLine{00070\ \ \ \ \ \{\ \textcolor{stringliteral}{"{}in"{}},\ \ \ scroll,\ \textcolor{stringliteral}{"{}psin"{}},\ \textcolor{stringliteral}{"{}psin"{}},\ \textcolor{stringliteral}{"{}\%"{}},\ \ \ \ \textcolor{stringliteral}{"{}\%"{}},\ \ \ \ degreF,\ \_\_\_\_\_\_,\ \_\_\_\_\_\_,\ \textcolor{stringliteral}{"{}Hz"{}},\ \ \ \textcolor{stringliteral}{"{}s"{}},\ \ \ \ \},\ \ \textcolor{comment}{//\ PG\_BPID}}
\DoxyCodeLine{00071\ \ \ \ \ \{\ \textcolor{stringliteral}{"{}\%"{}},\ \ \ \ \textcolor{stringliteral}{"{}rpm"{}},\ \ \textcolor{stringliteral}{"{}rpm"{}},\ \ \textcolor{stringliteral}{"{}\%"{}},\ \ \ \ \textcolor{stringliteral}{"{}\%"{}},\ \ \ \ \textcolor{stringliteral}{"{}\%"{}},\ \ \ \ \textcolor{stringliteral}{"{}\%"{}},\ \ \ \ degsec,\ \_\_\_\_\_\_,\ \textcolor{stringliteral}{"{}Hz"{}},\ \ \ \textcolor{stringliteral}{"{}s"{}},\ \ \ \ \},\ \ \textcolor{comment}{//\ PG\_GPID}}
\DoxyCodeLine{00072\ \ \ \ \ \{\ \textcolor{stringliteral}{"{}mph"{}},\ \ \textcolor{stringliteral}{"{}mph"{}},\ \ \textcolor{stringliteral}{"{}rpm"{}},\ \ \textcolor{stringliteral}{"{}rpm"{}},\ \ \textcolor{stringliteral}{"{}rpm"{}},\ \ \textcolor{stringliteral}{"{}rpm"{}},\ \ \textcolor{stringliteral}{"{}\%"{}},\ \ \ \ \textcolor{stringliteral}{"{}\%/s"{}},\ \ \_\_\_\_\_\_,\ \textcolor{stringliteral}{"{}Hz"{}},\ \ \ \textcolor{stringliteral}{"{}s"{}},\ \ \ \ \},\ \ \textcolor{comment}{//\ PG\_CPID}}
\DoxyCodeLine{00073\ \ \ \ \ \{\ degreF,\ degreF,\ degreF,\ degreF,\ degreF,\ degreF,\ degreF,\ \textcolor{stringliteral}{"{}pix"{}},\ \ \textcolor{stringliteral}{"{}pix"{}},\ \ \textcolor{stringliteral}{"{}min"{}},\ \ b1nary,\ \},\ \ \textcolor{comment}{//\ PG\_TEMP}}
\DoxyCodeLine{00074\ \ \ \ \ \{\ b1nary,\ b1nary,\ b1nary,\ b1nary,\ b1nary,\ b1nary,\ b1nary,\ b1nary,\ scroll,\ b1nary,\ b1nary,\ \},\ \ \textcolor{comment}{//\ PG\_SIM}}
\DoxyCodeLine{00075\ \ \ \ \ \{\ \textcolor{stringliteral}{"{}us"{}},\ \ \ \textcolor{stringliteral}{"{}us"{}},\ \ \ \textcolor{stringliteral}{"{}Hz"{}},\ \ \ \textcolor{stringliteral}{"{}fps"{}},\ \ \textcolor{stringliteral}{"{}us"{}},\ \ \ \textcolor{stringliteral}{"{}us"{}},\ \ \ \textcolor{stringliteral}{"{}us"{}},\ \ \ b1nary,\ \textcolor{stringliteral}{"{}\%"{}},\ \ \ \ \textcolor{stringliteral}{"{}/10"{}},\ \ \textcolor{stringliteral}{"{}eyes"{}},\ \},\ \ \textcolor{comment}{//\ PG\_UI}}
\DoxyCodeLine{00076\ \};}
\DoxyCodeLine{00077\ \textcolor{keyword}{static}\ std::string\ unitmapnames[10]\ =\ \{\ \textcolor{stringliteral}{"{}usps"{}},\ \textcolor{stringliteral}{"{}us"{}},\ \textcolor{stringliteral}{"{}rpms"{}},\ scroll,\ b1nary,\ \textcolor{stringliteral}{"{}\%"{}},\ \textcolor{stringliteral}{"{}ohm"{}},\ \textcolor{stringliteral}{"{}eyes"{}},\ \textcolor{stringliteral}{"{}psin"{}},\ degree\ \};\ \ \textcolor{comment}{//\ unit\ strings\ matching\ these\ will\ get\ replaced\ by\ the\ corresponding\ bitmap\ graphic\ below}}
\DoxyCodeLine{00078\ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ uint8\_t\ unitmaps[10][17]\ =\ \{\ \ \textcolor{comment}{//\ 17x7-\/pixel\ bitmaps\ for\ where\ units\ use\ symbols\ not\ present\ in\ the\ font,\ are\ longer\ than\ 3\ characters,\ or\ are\ just\ special}}
\DoxyCodeLine{00079\ \ \ \ \ \{\ 0x7e,\ 0x20,\ 0x20,\ 0x3c,\ 0x00,\ 0x24,\ 0x2a,\ 0x2a,\ 0x12,\ 0x00,\ 0x70,\ 0x0e,\ 0x00,\ 0x24,\ 0x2a,\ 0x2a,\ 0x12,\ \},\ \ \textcolor{comment}{//\ usps\ -\/\ microseconds\ per\ second}}
\DoxyCodeLine{00080\ \ \ \ \ \{\ 0x40,\ 0x7e,\ 0x20,\ 0x20,\ 0x1c,\ 0x20,\ 0x00,\ 0x24,\ 0x2a,\ 0x2a,\ 0x2a,\ 0x12,\ 0x00,\ 0x00,\ 0x00,\ 0x00,\ 0x00,\ \},\ \ \textcolor{comment}{//\ us\ -\/\ b/c\ the\ font's\ "{}mu"{}\ character\ doesn't\ work}}
\DoxyCodeLine{00081\ \ \ \ \ \{\ 0x1f,\ 0x01,\ 0x00,\ 0x3f,\ 0x09,\ 0x0e,\ 0x00,\ 0x0f,\ 0x01,\ 0x0e,\ 0x01,\ 0x0e,\ 0x60,\ 0x1c,\ 0x00,\ 0x58,\ 0x74,\ \},\ \ \textcolor{comment}{//\ rpm/s\ (or\ rot/m*s)\ -\/\ rate\ of\ change\ of\ engine\ rpm}}
\DoxyCodeLine{00082\ \ \ \ \ \{\ 0x00,\ 0x00,\ 0x00,\ 0x00,\ 0x00,\ 0x04,\ 0x02,\ 0x7f,\ 0x02,\ 0x04,\ 0x00,\ 0x10,\ 0x20,\ 0x7f,\ 0x20,\ 0x10,\ 0x00,\ \},\ \ \textcolor{comment}{//\ scroll\ arrows\ -\/\ to\ indicate\ multiple\ choice}}
\DoxyCodeLine{00083\ \ \ \ \ \{\ 0x00,\ 0x00,\ 0x00,\ 0x00,\ 0x00,\ 0x00,\ 0x00,\ 0x00,\ 0x3e,\ 0x00,\ 0x00,\ 0x1c,\ 0x22,\ 0x22,\ 0x1c,\ 0x00,\ 0x00,\ \},\ \ \textcolor{comment}{//\ 0/1\ -\/\ to\ indicate\ binary\ value}}
\DoxyCodeLine{00084\ \ \ \ \ \{\ 0x02,\ 0x45,\ 0x25,\ 0x12,\ 0x08,\ 0x24,\ 0x52,\ 0x51,\ 0x20,\ 0x00,\ 0x00,\ 0x00,\ 0x00,\ 0x00,\ 0x00,\ 0x00,\ 0x00,\ \},\ \ \textcolor{comment}{//\ \%\ -\/\ just\ because\ the\ font\ one\ is\ feeble}}
\DoxyCodeLine{00085\ \ \ \ \ \{\ 0x4e,\ 0x51,\ 0x61,\ 0x01,\ 0x61,\ 0x51,\ 0x4e,\ 0x00,\ 0x00,\ 0x00,\ 0x00,\ 0x00,\ 0x00,\ 0x00,\ 0x00,\ 0x00,\ 0x00,\ \},\ \ \textcolor{comment}{//\ capital\ omega\ -\/\ for\ ohms}}
\DoxyCodeLine{00086\ \ \ \ \ \{\ 0x08,\ 0x1c,\ 0x2a,\ 0x08,\ 0x00,\ 0x3e,\ 0x63,\ 0x63,\ 0x77,\ 0x7f,\ 0x41,\ 0x3e,\ 0x63,\ 0x63,\ 0x77,\ 0x7f,\ 0x3e,\ \},\ \ \textcolor{comment}{//\ googly\ eyes,\ are\ as\ goofy\ as\ they\ are\ stupid}}
\DoxyCodeLine{00087\ \ \ \ \ \{\ 0x3d,\ 0x00,\ 0x3e,\ 0x02,\ 0x3c,\ 0x00,\ 0x7f,\ 0x00,\ 0x3e,\ 0x12,\ 0x0c,\ 0x00,\ 0x2c,\ 0x2a,\ 0x1a,\ 0x00,\ 0x3d,\ \},\ \ \textcolor{comment}{//\ inches\ or\ psi\ "{}in|psi"{}}}
\DoxyCodeLine{00088\ \ \ \ \ \{\ 0x02,\ 0x05,\ 0x45,\ 0x62,\ 0x50,\ 0x48,\ 0x4c,\ 0x72,\ 0x41,\ 0x40,\ 0x40,\ 0x00,\ 0x00,\ 0x00,\ 0x00,\ 0x00,\ 0x00,\ \},\ \ \textcolor{comment}{//\ angular\ degrees}}
\DoxyCodeLine{00089\ \};\ \ \textcolor{comment}{//\ These\ bitmaps\ are\ in\ the\ same\ format\ as\ the\ idiot\ light\ bitmaps,\ described\ in\ neopixel.h}}
\DoxyCodeLine{00090\ \textcolor{comment}{//\ \ \{\ 0x7e,\ 0x20,\ 0x3e,\ 0x20,\ 0x00,\ 0x0c,\ 0x52,\ 0x4a,\ 0x3c,\ 0x00,\ 0x60,\ 0x18,\ 0x06,\ 0x00,\ 0x2c,\ 0x2a,\ 0x32,\ \},\ \ //\ ug/s\ -\/\ for\ manifold\ mass\ airflow}}
\DoxyCodeLine{00091\ \mbox{\hyperlink{class_animation_manager}{AnimationManager}}\ animations;}
\DoxyCodeLine{00092\ \textcolor{keyword}{volatile}\ \textcolor{keywordtype}{float}\ fps\ =\ 0.0;}
\DoxyCodeLine{00093\ \textcolor{keyword}{volatile}\ \textcolor{keywordtype}{bool}\ is\_pushing\ =\ 0;}
\DoxyCodeLine{00094\ \textcolor{keyword}{volatile}\ \textcolor{keywordtype}{bool}\ is\_drawing\ =\ 0;}
\DoxyCodeLine{00095\ \textcolor{keyword}{volatile}\ int32\_t\ pushclock;}
\DoxyCodeLine{00096\ \textcolor{keyword}{volatile}\ int32\_t\ drawclock;}
\DoxyCodeLine{00097\ \textcolor{keyword}{volatile}\ int32\_t\ idleclock;}
\DoxyCodeLine{00098\ \textcolor{keyword}{volatile}\ \textcolor{keywordtype}{bool}\ reset\_request\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00099\ \textcolor{keyword}{volatile}\ \textcolor{keywordtype}{bool}\ pushtime\ =\ 0;}
\DoxyCodeLine{00100\ \textcolor{keyword}{volatile}\ \textcolor{keywordtype}{bool}\ drawn\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00101\ \textcolor{keyword}{volatile}\ \textcolor{keywordtype}{bool}\ pushed\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00102\ }
\DoxyCodeLine{00103\ SemaphoreHandle\_t\ pushbuf\_sem;\ \ \textcolor{comment}{//\ StaticSemaphore\_t\ push\_semaphorebuf\_sem;}}
\DoxyCodeLine{00104\ SemaphoreHandle\_t\ drawbuf\_sem;\ \ \textcolor{comment}{//\ StaticSemaphore\_t\ draw\_semaphorebuf\_sem;}}
\DoxyCodeLine{00105\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ push\_task\_wrapper(\textcolor{keywordtype}{void}\ *parameter);}
\DoxyCodeLine{00106\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ draw\_task\_wrapper(\textcolor{keywordtype}{void}\ *parameter);}
\DoxyCodeLine{00107\ \textcolor{keywordtype}{void}\ semaphore\_setup()\ \{}
\DoxyCodeLine{00108\ \ \ \ \ Serial.printf(\textcolor{stringliteral}{"{}Semaphores.."{}});}
\DoxyCodeLine{00109\ \ \ \ \ pushbuf\_sem\ =\ xSemaphoreCreateBinary();\ \ \textcolor{comment}{//\ StaticSemaphore\_t\ push\_semaphorebuf\_sem;}}
\DoxyCodeLine{00110\ \ \ \ \ drawbuf\_sem\ =\ xSemaphoreCreateBinary();\ \ \textcolor{comment}{//\ StaticSemaphore\_t\ draw\_semaphorebuf\_sem;}}
\DoxyCodeLine{00111\ \ \ \ \ \textcolor{keywordflow}{if}\ (pushbuf\_sem\ ==\ NULL\ ||\ drawbuf\_sem\ ==\ NULL)\ Serial.printf(\textcolor{stringliteral}{"{}\ creation\ failed"{}});}
\DoxyCodeLine{00112\ \ \ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00113\ \ \ \ \ \ \ \ \ xSemaphoreGive(pushbuf\_sem);}
\DoxyCodeLine{00114\ \ \ \ \ \ \ \ \ xSemaphoreGive(drawbuf\_sem);}
\DoxyCodeLine{00115\ \ \ \ \ \}}
\DoxyCodeLine{00116\ \ \ \ \ Serial.printf(\textcolor{stringliteral}{"{}\(\backslash\)n"{}});}
\DoxyCodeLine{00117\ \}}
\DoxyCodeLine{00118\ \textcolor{keyword}{volatile}\ \textcolor{keywordtype}{int}\ disp\_oldmode\ =\ SHUTDOWN;}
\DoxyCodeLine{00119\ LGFX\_Sprite*\ sprptr;}
\DoxyCodeLine{00120\ std::string\ nulstr\ =\ \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{00121\ std::string*\ nulstrptr\ =\ \&nulstr;}
\DoxyCodeLine{00122\ }
\DoxyCodeLine{00123\ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_display}{Display}}\ \{}
\DoxyCodeLine{00124\ \ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00125\ \ \ \ \ \mbox{\hyperlink{class_neopixel_strip}{NeopixelStrip}}*\ neo;}
\DoxyCodeLine{00126\ \ \ \ \ \mbox{\hyperlink{class_touchscreen}{Touchscreen}}*\ touch;}
\DoxyCodeLine{00127\ \ \ \ \ \mbox{\hyperlink{class_simulator}{Simulator}}*\ sim;}
\DoxyCodeLine{00128\ \ \ \ \ \mbox{\hyperlink{class_idiot_lights}{IdiotLights}}*\ idiots;}
\DoxyCodeLine{00129\ \ \ \ \ \mbox{\hyperlink{class_timer}{Timer}}\ valuesRefreshTimer\ =\ \mbox{\hyperlink{class_timer}{Timer}}(160000);\ \ \textcolor{comment}{//\ Don't\ refresh\ screen\ faster\ than\ this\ (16667us\ =\ 60fps,\ 33333us\ =\ 30fps,\ 66666us\ =\ 15fps)}}
\DoxyCodeLine{00130\ \ \ \ \ uint8\_t\ palettesize\ =\ 2;}
\DoxyCodeLine{00131\ \ \ \ \ \textcolor{comment}{//\ uint16\_t\ palette[256]\ =\ \{\ BLK,\ WHT\ \};}}
\DoxyCodeLine{00132\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{int}\ runOnCore\ =\ CONFIG\_ARDUINO\_RUNNING\_CORE\ ==\ 0\ ?\ 1\ :\ 0;}
\DoxyCodeLine{00133\ \ \ \ \ \mbox{\hyperlink{class_timer}{Timer}}\ dispAgeTimer[disp\_lines];\ \ \textcolor{comment}{//\ int32\_t\ disp\_age\_timer\_us[disp\_lines];}}
\DoxyCodeLine{00134\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{int}\ idiots\_corner\_x\ =\ 165;}
\DoxyCodeLine{00135\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{int}\ idiots\_corner\_y\ =\ 13;}
\DoxyCodeLine{00136\ \ \ \ \ \textcolor{keywordtype}{bool}\ fullscreen\_last\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00137\ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00138\ \ \ \ \ \textcolor{keyword}{volatile}\ \textcolor{keywordtype}{int}\ nowmode\ =\ SHUTDOWN;\ \ \ \textcolor{comment}{//\ So\ we\ can\ tell\ when\ \ the\ mode\ has\ just\ changed.\ start\ as\ different\ to\ trigger\_mode\ start\ algo\ \ \ \ }}
\DoxyCodeLine{00139\ \ \ \ \ std::string\ disp\_values[disp\_lines];\ \ \textcolor{comment}{//\ Holds\ previously\ drawn\ value\ strings\ for\ each\ line}}
\DoxyCodeLine{00140\ \ \ \ \ \textcolor{keyword}{volatile}\ \textcolor{keywordtype}{bool}\ disp\_bool\_values[6];}
\DoxyCodeLine{00141\ \ \ \ \ \textcolor{keyword}{volatile}\ \textcolor{keywordtype}{bool}\ disp\_bargraphs[disp\_lines];}
\DoxyCodeLine{00142\ \ \ \ \ \textcolor{keyword}{volatile}\ \textcolor{keywordtype}{bool}\ disp\_polarities[disp\_lines];\ \ \textcolor{comment}{//\ Holds\ sign\ of\ previously\ drawn\ values}}
\DoxyCodeLine{00143\ \ \ \ \ \textcolor{keyword}{volatile}\ int32\_t\ disp\_needles[disp\_lines];}
\DoxyCodeLine{00144\ \ \ \ \ \textcolor{keyword}{volatile}\ int32\_t\ disp\_targets[disp\_lines];}
\DoxyCodeLine{00145\ \ \ \ \ \textcolor{keyword}{volatile}\ int32\_t\ disp\_age\_quanta[disp\_lines];}
\DoxyCodeLine{00146\ \ \ \ \ \textcolor{keyword}{volatile}\ uint8\_t\ disp\_val\_colors[disp\_lines];}
\DoxyCodeLine{00147\ \ \ \ \ \textcolor{keyword}{volatile}\ \textcolor{keywordtype}{bool}\ disp\_selected\_val\_dirty;}
\DoxyCodeLine{00148\ \ \ \ \ \textcolor{keyword}{volatile}\ \textcolor{keywordtype}{bool}\ disp\_datapage\_dirty;}
\DoxyCodeLine{00149\ \ \ \ \ \textcolor{keyword}{volatile}\ \textcolor{keywordtype}{bool}\ disp\_values\_dirty;}
\DoxyCodeLine{00150\ \ \ \ \ \textcolor{keyword}{volatile}\ \textcolor{keywordtype}{bool}\ disp\_data\_dirty[disp\_lines];}
\DoxyCodeLine{00151\ \ \ \ \ \textcolor{keyword}{volatile}\ \textcolor{keywordtype}{bool}\ disp\_bools\_dirty;}
\DoxyCodeLine{00152\ \ \ \ \ \textcolor{keyword}{volatile}\ \textcolor{keywordtype}{bool}\ disp\_sidemenu\_dirty;}
\DoxyCodeLine{00153\ \ \ \ \ \textcolor{keyword}{volatile}\ \textcolor{keywordtype}{bool}\ disp\_runmode\_dirty;}
\DoxyCodeLine{00154\ \ \ \ \ \textcolor{keyword}{volatile}\ \textcolor{keywordtype}{bool}\ disp\_simbuttons\_dirty;}
\DoxyCodeLine{00155\ \ \ \ \ \textcolor{keyword}{volatile}\ \textcolor{keywordtype}{bool}\ disp\_idiots\_dirty;}
\DoxyCodeLine{00156\ \ \ \ \ \mbox{\hyperlink{class_display}{Display}}(\mbox{\hyperlink{class_neopixel_strip}{NeopixelStrip}}*\ \_neo,\ \mbox{\hyperlink{class_touchscreen}{Touchscreen}}*\ \_touch,\ \mbox{\hyperlink{class_idiot_lights}{IdiotLights}}*\ \_idiots,\ \mbox{\hyperlink{class_simulator}{Simulator}}*\ \_sim)}
\DoxyCodeLine{00157\ \ \ \ \ \ \ :\ neo(\_neo),\ touch(\_touch),\ idiots(\_idiots),\ sim(\_sim)\ \{\}}
\DoxyCodeLine{00158\ \ \ \ \ \textcolor{keywordtype}{void}\ init\_framebuffers(\textcolor{keywordtype}{int}\ \_sprwidth,\ \textcolor{keywordtype}{int}\ \_sprheight)\ \{}
\DoxyCodeLine{00159\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ sprsize[2]\ =\ \{\ \_sprwidth,\ \_sprheight\ \};}
\DoxyCodeLine{00160\ \ \ \ \ \ \ \ \ Serial.printf(\textcolor{stringliteral}{"{}\ \ create\ frame\ buffers..\ "{}});}
\DoxyCodeLine{00161\ \ \ \ \ \ \ \ \ lcd.setColorDepth(sprite\_color\_depth);}
\DoxyCodeLine{00162\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <=\ 1;\ i++)\ framebuf[i].setColorDepth(8);\ \ \textcolor{comment}{//\ color\_depth\_t::rgb332\_1Byte\ =\ 8\ \ Optionally\ set\ colour\ depth\ to\ 8\ or\ 16\ bits,\ default\ is\ 16\ if\ not\ specified}}
\DoxyCodeLine{00163\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ framewidth\ =\ sprsize[HORZ];}
\DoxyCodeLine{00164\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ frameheight\ =\ sprsize[VERT];}
\DoxyCodeLine{00165\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ fail\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00166\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ using\_psram\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00167\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (std::uint32\_t\ i\ =\ 0;\ !fail\ \&\&\ i\ <\ 2;\ ++i)\ \{}
\DoxyCodeLine{00168\ \ \ \ \ \ \ \ \ \ \ \ \ framebuf[i].setPsram(\textcolor{keyword}{false});}
\DoxyCodeLine{00169\ \ \ \ \ \ \ \ \ \ \ \ \ fail\ =\ !framebuf[i].createSprite(framewidth,\ frameheight);}
\DoxyCodeLine{00170\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00171\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (fail)\ \{}
\DoxyCodeLine{00172\ \ \ \ \ \ \ \ \ \ \ \ \ fail\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00173\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (std::uint32\_t\ i\ =\ 0;\ !fail\ \&\&\ i\ <\ 2;\ ++i)\ \{}
\DoxyCodeLine{00174\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ framebuf[i].setPsram(\textcolor{keyword}{true});}
\DoxyCodeLine{00175\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ fail\ =\ !framebuf[i].createSprite(framewidth,\ frameheight);}
\DoxyCodeLine{00176\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00177\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (fail)\ \{}
\DoxyCodeLine{00178\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ fail\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00179\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (framewidth\ >=\ 320)\ framewidth\ =\ 180;}
\DoxyCodeLine{00180\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (frameheight\ >=\ 240)\ frameheight\ =\ 180;}
\DoxyCodeLine{00181\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (std::uint32\_t\ i\ =\ 0;\ !fail\ \&\&\ i\ <\ 2;\ ++i)\ \{}
\DoxyCodeLine{00182\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ fail\ =\ !framebuf[i].createSprite(framewidth,\ frameheight);}
\DoxyCodeLine{00183\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00184\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (fail)\ \{}
\DoxyCodeLine{00185\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ lcd.print(\textcolor{stringliteral}{"{}createSprite\ fail\(\backslash\)n"{}});}
\DoxyCodeLine{00186\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00187\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ using\_psram\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00188\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00189\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ using\_psram\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00190\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00191\ \ \ \ \ \ \ \ \ Serial.printf(\textcolor{stringliteral}{"{}\ made\ 2x\ \%dx\%d\ sprites\ in\ \%sram\(\backslash\)n"{}},\ framewidth,\ frameheight,\ using\_psram\ ?\ \textcolor{stringliteral}{"{}ps"{}}\ :\ \textcolor{stringliteral}{"{}native\ "{}});}
\DoxyCodeLine{00192\ \ \ \ \ \}}
\DoxyCodeLine{00193\ \ \ \ \ \textcolor{keywordtype}{void}\ setup()\ \{}
\DoxyCodeLine{00194\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!display\_enabled)\ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00195\ \ \ \ \ \ \ \ \ Serial.printf(\textcolor{stringliteral}{"{}Display.."{}});\ \ \textcolor{comment}{//}}
\DoxyCodeLine{00196\ \ \ \ \ \ \ \ \ lcd.init();}
\DoxyCodeLine{00197\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#ifdef\ BOARD\_HAS\_PSRAM}}
\DoxyCodeLine{00198\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ lcd.setAttribute(PSRAM\_ENABLE,\ true);\ \ //\ enable\ use\ of\ PSRAM\ -\/\ (this\ is\ only\ relevant\ for\ TFT\_eSPI\ display\ library)}}
\DoxyCodeLine{00199\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#endif}}
\DoxyCodeLine{00200\ \ \ \ \ \ \ \ \ lcd.setColorDepth(8);}
\DoxyCodeLine{00201\ \ \ \ \ \ \ \ \ lcd.begin();\ \ \textcolor{comment}{//\ lcd.begin();}}
\DoxyCodeLine{00202\ \ \ \ \ \ \ \ \ lcd.initDMA();}
\DoxyCodeLine{00203\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ lcd.setRotation((flip\_the\_screen)\ ?\ 3\ :\ 1);\ \ //\ 0:\ Portrait,\ USB\ Top-\/Rt,\ 1:\ Landscape,\ usb=Bot-\/Rt,\ 2:\ Portrait,\ USB=Bot-\/Rt,\ 3:\ Landscape,\ USB=Top-\/Lt}}
\DoxyCodeLine{00204\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (lcd.width()\ <\ lcd.height())\ lcd.setRotation(lcd.getRotation()\ \string^\ 1);}
\DoxyCodeLine{00205\ \ \ \ \ \ \ \ \ lcd.setSwapBytes(\textcolor{keyword}{true});\ \ \textcolor{comment}{//\ rearranges\ color\ ordering\ of\ 16bit\ colors\ when\ displaying\ image\ files}}
\DoxyCodeLine{00206\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (int32\_t\ lineno=0;\ lineno\ <=\ disp\_fixed\_lines;\ lineno++)\ \ \{}
\DoxyCodeLine{00207\ \ \ \ \ \ \ \ \ \ \ \ \ disp\_age\_quanta[lineno]\ =\ -\/1;}
\DoxyCodeLine{00208\ \ \ \ \ \ \ \ \ \ \ \ \ disp\_values[lineno]\ =\ \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{00209\ \ \ \ \ \ \ \ \ \ \ \ \ disp\_polarities[lineno]\ =\ 1;}
\DoxyCodeLine{00210\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00211\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (int32\_t\ row=0;\ row<arraysize(disp\_bool\_values);\ row++)\ disp\_bool\_values[row]\ =\ 1;}
\DoxyCodeLine{00212\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (int32\_t\ row=0;\ row<arraysize(disp\_needles);\ row++)\ disp\_needles[row]\ =\ -\/5;\ \ \textcolor{comment}{//\ Otherwise\ the\ very\ first\ needle\ draw\ will\ blackout\ a\ needle\ shape\ at\ x=0.\ Do\ this\ offscreen}}
\DoxyCodeLine{00213\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (int32\_t\ row=0;\ row<arraysize(disp\_targets);\ row++)\ disp\_targets[row]\ =\ -\/5;\ \ \textcolor{comment}{//\ Otherwise\ the\ very\ first\ target\ draw\ will\ blackout\ a\ target\ shape\ at\ x=0.\ Do\ this\ offscreen}}
\DoxyCodeLine{00214\ \ \ \ \ \ \ \ \ yield();}
\DoxyCodeLine{00215\ \ \ \ \ \ \ \ \ init\_framebuffers(disp\_width\_pix,\ disp\_height\_pix);}
\DoxyCodeLine{00216\ \ \ \ \ \ \ \ \ animations.init(\&lcd,\ sim,\ touch,\ disp\_simbuttons\_x,\ disp\_simbuttons\_y,\ disp\_simbuttons\_w,\ disp\_simbuttons\_h);}
\DoxyCodeLine{00217\ \ \ \ \ \ \ \ \ animations.setup();}
\DoxyCodeLine{00218\ \ \ \ \ \ \ \ \ sprptr\ =\ \&framebuf[flip];}
\DoxyCodeLine{00219\ \ \ \ \ \ \ \ \ reset\_request\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00220\ \ \ \ \ \ \ \ \ Serial.printf(\textcolor{stringliteral}{"{}\ \ display\ initialized\(\backslash\)n"{}});}
\DoxyCodeLine{00221\ \ \ \ \ \}}
\DoxyCodeLine{00222\ \ \ \ \ \textcolor{keywordtype}{void}\ reset(LGFX\_Sprite*\ spr)\ \{}
\DoxyCodeLine{00223\ \ \ \ \ \ \ \ \ blackout(spr);}
\DoxyCodeLine{00224\ \ \ \ \ \ \ \ \ all\_dirty();}
\DoxyCodeLine{00225\ \ \ \ \ \ \ \ \ reset\_request\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00226\ \ \ \ \ \}}
\DoxyCodeLine{00227\ \ \ \ \ \textcolor{comment}{//\ uint8\_t\ add\_palette(uint8\_t\ color)\ \{}}
\DoxyCodeLine{00228\ \ \ \ \ \textcolor{comment}{//\ \ \ \ \ for\ (uint8\_t\ i=0;\ i<palettesize;\ i++)\ if\ (lcd.getPaletteColor(i)\ ==\ color)\ return\ i;}}
\DoxyCodeLine{00229\ \ \ \ \ \textcolor{comment}{//\ \ \ \ \ lcd.setPaletteColor(palettesize++,\ color);}}
\DoxyCodeLine{00230\ \ \ \ \ \textcolor{comment}{//\ \ \ \ \ return\ palettesize;}}
\DoxyCodeLine{00231\ \ \ \ \ \textcolor{comment}{//\ \}}}
\DoxyCodeLine{00232\ \ \ \ \ \textcolor{keywordtype}{void}\ all\_dirty()\ \{}
\DoxyCodeLine{00233\ \ \ \ \ \ \ \ \ disp\_idiots\_dirty\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00234\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i=0;\ i<disp\_lines;\ i++)\ \{}
\DoxyCodeLine{00235\ \ \ \ \ \ \ \ \ \ \ \ \ disp\_data\_dirty[i]\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00236\ \ \ \ \ \ \ \ \ \ \ \ \ disp\_bargraphs[i]\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00237\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00238\ \ \ \ \ \ \ \ \ disp\_bools\_dirty\ =\ disp\_selected\_val\_dirty\ =\ disp\_datapage\_dirty\ =\ disp\_sidemenu\_dirty\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00239\ \ \ \ \ \ \ \ \ disp\_runmode\_dirty\ =\ disp\_simbuttons\_dirty\ =\ disp\_values\_dirty\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00240\ \ \ \ \ \ \ \ \ screensaver\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00241\ \ \ \ \ \}}
\DoxyCodeLine{00242\ \ \ \ \ \textcolor{keywordtype}{void}\ blackout(LGFX\_Sprite*\ spr)\ \{}
\DoxyCodeLine{00243\ \ \ \ \ \ \ \ \ spr-\/>fillSprite(BLK);}
\DoxyCodeLine{00244\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ std::uint32\_t*\ s;}}
\DoxyCodeLine{00245\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ for\ (int\ f=0;\ f<2;\ f++)\ \{}}
\DoxyCodeLine{00246\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ \ \ \ \ s\ =\ (std::uint32\_t*)(*spr).getBuffer();}}
\DoxyCodeLine{00247\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ \ \ \ \ for\ (int\ w=0;\ w<(spr-\/>width()\ *\ spr-\/>height()\ /\ 4);\ w++)\ s[w]\ =\ 0x00000000;}}
\DoxyCodeLine{00248\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ \}}}
\DoxyCodeLine{00249\ \ \ \ \ \}}
\DoxyCodeLine{00250\ \ \ \ \ \textcolor{keywordtype}{void}\ set\_runmodecolors()\ \{}
\DoxyCodeLine{00251\ \ \ \ \ \ \ \ \ uint8\_t\ saturat\ =\ 255;\ \ uint8\_t\ hue\_offset\ =\ 0;}
\DoxyCodeLine{00252\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (int32\_t\ rm=0;\ rm<NUM\_RUNMODES;\ rm++)\ \{}
\DoxyCodeLine{00253\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ division\ =\ NUM\_RUNMODES;}
\DoxyCodeLine{00254\ \ \ \ \ \ \ \ \ \ \ \ \ uint32\_t\ color32\ =\ hsv\_to\_rgb<uint32\_t>((65536\ *\ (uint16\_t)(rm\ \%\ division)\ /\ division\ +\ hue\_offset),\ saturat,\ 255);\ \ \textcolor{comment}{//\ ,\ 0,\ 220);}}
\DoxyCodeLine{00255\ \ \ \ \ \ \ \ \ \ \ \ \ colorcard[rm]\ =\ color\_to\_332(color32);\ \ \textcolor{comment}{//\ 5957\ =\ 2\string^16/11}}
\DoxyCodeLine{00256\ \ \ \ \ \ \ \ \ \ \ \ \ disp\_runmode\_dirty\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00257\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00258\ \ \ \ \ \}}
\DoxyCodeLine{00259\ \ \ \ \ \textcolor{keywordtype}{void}\ tiny\_text()\ \{}
\DoxyCodeLine{00260\ \ \ \ \ \ \ \ \ sprptr-\/>setTextDatum(textdatum\_t::top\_left);}
\DoxyCodeLine{00261\ \ \ \ \ \ \ \ \ sprptr-\/>setFont(\&fonts::Font0);}
\DoxyCodeLine{00262\ \ \ \ \ \}}
\DoxyCodeLine{00263\ \ \ \ \ uint8\_t\ darken\_color(uint8\_t\ color)\ \{\ \ \textcolor{comment}{//\ halves\ each\ of\ r,\ g,\ and\ b\ of\ a\ 5-\/6-\/5\ formatted\ 16-\/bit\ color\ value\ either\ once\ or\ twice}}
\DoxyCodeLine{00264\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ ((color\ \&\ 0xc0)\ |\ (color\ \&\ 0x18)\ |\ (color\ \&\ 0x2));}
\DoxyCodeLine{00265\ \ \ \ \ \}}
\DoxyCodeLine{00266\ \ \ \ \ uint16\_t\ darken\_color(uint16\_t\ color,\ int32\_t\ halvings\ =\ 1)\ \{\ \ \textcolor{comment}{//\ halves\ each\ of\ r,\ g,\ and\ b\ of\ a\ 5-\/6-\/5\ formatted\ 16-\/bit\ color\ value\ either\ once\ or\ twice}}
\DoxyCodeLine{00267\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (halvings\ ==\ 1)\ \textcolor{keywordflow}{return}\ ((color\ \&\ 0xf000)\ |\ (color\ \&\ 0x7c0)\ |\ (color\ \&\ 0x1e))\ >>\ 1;}
\DoxyCodeLine{00268\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{return}\ ((color\ \&\ 0xe000)\ |\ (color\ \&\ 0x780)\ |\ (color\ \&\ 0x1c))\ >>\ 2;}
\DoxyCodeLine{00269\ \ \ \ \ \}}
\DoxyCodeLine{00270\ \ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00271\ \ \ \ \ \textcolor{keywordtype}{void}\ drawWideLine(\textcolor{keywordtype}{int}\ x0,\ \textcolor{keywordtype}{int}\ y0,\ \textcolor{keywordtype}{int}\ x1,\ \textcolor{keywordtype}{int}\ y1,\ \textcolor{keywordtype}{float}\ wd)\ \{\ \ \textcolor{comment}{//\ took\ from\ http://members.chello.at/\string~easyfilter/bresenham.html}}
\DoxyCodeLine{00272\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ dx\ =\ std::abs(x1-\/x0),\ sx\ =\ x0\ <\ x1\ ?\ 1\ :\ -\/1;\ }
\DoxyCodeLine{00273\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ dy\ =\ std::abs(y1-\/y0),\ sy\ =\ y0\ <\ y1\ ?\ 1\ :\ -\/1;\ }
\DoxyCodeLine{00274\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ err\ =\ dx-\/dy,\ e2,\ x2,\ y2;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ error\ value\ e\_xy\ */}}
\DoxyCodeLine{00275\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ ed\ =\ dx+dy\ ==\ 0\ ?\ 1\ :\ sqrt((\textcolor{keywordtype}{float})dx*dx+(\textcolor{keywordtype}{float})dy*dy);}
\DoxyCodeLine{00276\ }
\DoxyCodeLine{00277\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (wd\ =\ (wd+1)/2;\ ;\ )\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ pixel\ loop\ */}}
\DoxyCodeLine{00278\ \ \ \ \ \ \ \ \ \ \ \ \ sprptr-\/>drawPixel(x0,\ y0,\ std::max(0.0f,\ 255*(std::abs(err-\/dx+dy)/ed-\/wd+1)));}
\DoxyCodeLine{00279\ \ \ \ \ \ \ \ \ \ \ \ \ e2\ =\ err;\ x2\ =\ x0;}
\DoxyCodeLine{00280\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (2*e2\ >=\ -\/dx)\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ x\ step\ */}}
\DoxyCodeLine{00281\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (e2\ +=\ dy,\ y2\ =\ y0;\ e2\ <\ ed*wd\ \&\&\ (y1\ !=\ y2\ ||\ dx\ >\ dy);\ e2\ +=\ dx)}
\DoxyCodeLine{00282\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ sprptr-\/>drawPixel(x0,\ y2\ +=\ sy,\ std::max(0.0f,\ 255*(abs(e2)/ed-\/wd+1)));}
\DoxyCodeLine{00283\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (x0\ ==\ x1)\ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00284\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ e2\ =\ err;\ err\ -\/=\ dy;\ x0\ +=\ sx;\ }
\DoxyCodeLine{00285\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ }
\DoxyCodeLine{00286\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (2*e2\ <=\ dy)\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ y\ step\ */}}
\DoxyCodeLine{00287\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (e2\ =\ dx-\/e2;\ e2\ <\ ed*wd\ \&\&\ (x1\ !=\ x2\ ||\ dx\ <\ dy);\ e2\ +=\ dy)}
\DoxyCodeLine{00288\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ sprptr-\/>drawPixel(x2\ +=\ sx,\ y0,\ std::max(0.0f,\ 255*(abs(e2)/ed-\/wd+1)));}
\DoxyCodeLine{00289\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (y0\ ==\ y1)\ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00290\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ err\ +=\ dx;\ y0\ +=\ sy;\ }
\DoxyCodeLine{00291\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00292\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00293\ \ \ \ \ \}}
\DoxyCodeLine{00294\ \ \ \ \ \textcolor{keywordtype}{void}\ draw\_bargraph\_base(int32\_t\ corner\_x,\ int32\_t\ corner\_y,\ int32\_t\ width)\ \{\ \ \textcolor{comment}{//\ draws\ a\ horizontal\ bargraph\ scale.\ \ 124,\ y,\ 40}}
\DoxyCodeLine{00295\ \ \ \ \ \ \ \ \ sprptr-\/>drawFastHLine(corner\_x\ +\ disp\_bargraph\_squeeze,\ corner\_y,\ width\ -\/\ disp\_bargraph\_squeeze*2,\ MGRY);\ \ \textcolor{comment}{//\ base\ line}}
\DoxyCodeLine{00296\ \ \ \ \ \ \ \ \ sprptr-\/>drawFastVLine(corner\_x\ +\ width/2,\ corner\_y-\/1,\ 2,\ WHT);\ \ \textcolor{comment}{//\ centerpoint\ gradient\ line}}
\DoxyCodeLine{00297\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (int32\_t\ offset=0;\ offset<=2;\ offset+=2)\ sprptr-\/>drawFastVLine((corner\_x\ +\ disp\_bargraph\_squeeze)\ +\ offset\ *\ (width/2\ -\/\ disp\_bargraph\_squeeze),\ corner\_y-\/2,\ 3,\ WHT);\ \ \textcolor{comment}{//\ endpoint\ gradient\ lines}}
\DoxyCodeLine{00298\ \ \ \ \ \}}
\DoxyCodeLine{00299\ \ \ \ \ \textcolor{keywordtype}{void}\ draw\_needle\_shape(int32\_t\ pos\_x,\ int32\_t\ pos\_y,\ uint8\_t\ color)\ \{\ \ \textcolor{comment}{//\ draws\ a\ cute\ little\ pointy\ needle}}
\DoxyCodeLine{00300\ \ \ \ \ \ \ \ \ sprptr-\/>drawFastVLine(pos\_x-\/1,\ pos\_y,\ 2,\ color);}
\DoxyCodeLine{00301\ \ \ \ \ \ \ \ \ sprptr-\/>drawFastVLine(pos\_x,\ pos\_y,\ 4,\ color);}
\DoxyCodeLine{00302\ \ \ \ \ \ \ \ \ sprptr-\/>drawFastVLine(pos\_x+1,\ pos\_y,\ 2,\ color);}
\DoxyCodeLine{00303\ \ \ \ \ \}}
\DoxyCodeLine{00304\ \ \ \ \ \textcolor{keywordtype}{void}\ draw\_target\_shape(int32\_t\ pos\_x,\ int32\_t\ pos\_y,\ uint8\_t\ t\_color,\ uint8\_t\ r\_color)\ \{\ \ \textcolor{comment}{//\ draws\ a\ cute\ little\ target\ symbol}}
\DoxyCodeLine{00305\ \ \ \ \ \ \ \ \ sprptr-\/>drawFastHLine(pos\_x-\/1,\ pos\_y,\ 3,\ t\_color);}
\DoxyCodeLine{00306\ \ \ \ \ \ \ \ \ sprptr-\/>drawFastVLine(pos\_x,\ pos\_y,\ 4,\ t\_color);}
\DoxyCodeLine{00307\ \ \ \ \ \}}
\DoxyCodeLine{00308\ \ \ \ \ \textcolor{keywordtype}{void}\ draw\_bargraph\_needle(int32\_t\ n\_pos\_x,\ int32\_t\ old\_n\_pos\_x,\ int32\_t\ pos\_y,\ uint8\_t\ n\_color)\ \{\ \ \textcolor{comment}{//\ draws\ a\ cute\ little\ pointy\ needle}}
\DoxyCodeLine{00309\ \ \ \ \ \ \ \ \ draw\_needle\_shape(old\_n\_pos\_x,\ pos\_y,\ BLK);}
\DoxyCodeLine{00310\ \ \ \ \ \ \ \ \ draw\_needle\_shape(n\_pos\_x,\ pos\_y,\ n\_color);}
\DoxyCodeLine{00311\ \ \ \ \ \}}
\DoxyCodeLine{00312\ \ \ \ \ \textcolor{keywordtype}{void}\ draw\_string(int32\_t\ x\_new,\ int32\_t\ x\_old,\ int32\_t\ y,\ std::string\ text,\ std::string\ oldtext,\ uint8\_t\ color,\ uint8\_t\ bgcolor,\ \textcolor{keywordtype}{bool}\ forced=\textcolor{keyword}{false})\ \{\ \ \textcolor{comment}{//\ Send\ in\ "{}"{}\ for\ oldtext\ if\ erase\ isn't\ needed}}
\DoxyCodeLine{00313\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ((text\ ==\ oldtext)\ \&\&\ !forced)\ \textcolor{keywordflow}{return};\ }
\DoxyCodeLine{00314\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ sprptr-\/>fillRect(x\_old,\ y,\ oldtext.length()\ *\ disp\_font\_width,\ disp\_font\_height,\ bgcolor);}}
\DoxyCodeLine{00315\ \ \ \ \ \ \ \ \ sprptr-\/>setTextColor(bgcolor);}
\DoxyCodeLine{00316\ \ \ \ \ \ \ \ \ sprptr-\/>setCursor(x\_old,\ y);}
\DoxyCodeLine{00317\ \ \ \ \ \ \ \ \ sprptr-\/>print(oldtext.c\_str());}
\DoxyCodeLine{00318\ \ \ \ \ \ \ \ \ sprptr-\/>setTextColor(color);}
\DoxyCodeLine{00319\ \ \ \ \ \ \ \ \ sprptr-\/>setCursor(x\_new,\ y);}
\DoxyCodeLine{00320\ \ \ \ \ \ \ \ \ sprptr-\/>print(text.c\_str());}
\DoxyCodeLine{00321\ \ \ \ \ \}}
\DoxyCodeLine{00322\ \ \ \ \ \textcolor{keywordtype}{void}\ draw\_unitmap(int8\_t\ index,\ int32\_t\ x,\ int32\_t\ y,\ uint8\_t\ color)\ \{}
\DoxyCodeLine{00323\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (int32\_t\ xo\ =\ 0;\ xo\ <\ disp\_font\_width\ *\ 3\ -\/\ 1;\ xo++)}
\DoxyCodeLine{00324\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (int32\_t\ yo\ =\ 0;\ yo\ <\ disp\_font\_height\ -\/\ 1;\ yo++)}
\DoxyCodeLine{00325\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ((unitmaps[index][xo]\ >>\ yo)\ \&\ 1)\ sprptr-\/>drawPixel(x\ +\ xo,\ y\ +\ yo,\ color);}
\DoxyCodeLine{00326\ \ \ \ \ \}}
\DoxyCodeLine{00327\ \ \ \ \ \textcolor{keywordtype}{void}\ draw\_string\_units(int32\_t\ x,\ int32\_t\ y,\ std::string\ text,\ std::string\ oldtext,\ uint8\_t\ color,\ uint8\_t\ bgcolor)\ \{\ \ \textcolor{comment}{//\ Send\ in\ "{}"{}\ for\ oldtext\ if\ erase\ isn't\ needed}}
\DoxyCodeLine{00328\ \ \ \ \ \ \ \ \ sprptr-\/>fillRect(x,\ y,\ 3\ *\ disp\_font\_width,\ disp\_font\_height,\ bgcolor);}
\DoxyCodeLine{00329\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (int8\_t\ i\ =\ 0;\ i<arraysize(unitmaps);\ i++)\ \{}
\DoxyCodeLine{00330\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (unitmapnames[i]\ ==\ text)\ \{}
\DoxyCodeLine{00331\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ draw\_unitmap(i,\ x,\ y,\ color);}
\DoxyCodeLine{00332\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00333\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00334\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00335\ \ \ \ \ \ \ \ \ sprptr-\/>setCursor(x,\ y);}
\DoxyCodeLine{00336\ \ \ \ \ \ \ \ \ sprptr-\/>setTextColor(color);}
\DoxyCodeLine{00337\ \ \ \ \ \ \ \ \ sprptr-\/>print(text.c\_str());}
\DoxyCodeLine{00338\ \ \ \ \ \}}
\DoxyCodeLine{00339\ \ \ \ \ \textcolor{comment}{//\ draw\_fixed\ displays\ 20\ rows\ of\ text\ strings\ with\ variable\ names.\ and\ also\ a\ column\ of\ text\ indicating\ units,\ plus\ boolean\ names,\ all\ in\ grey.}}
\DoxyCodeLine{00340\ \ \ \ \ \textcolor{keywordtype}{void}\ draw\_fixed(int32\_t\ page,\ int32\_t\ page\_last,\ \textcolor{keywordtype}{bool}\ redraw\_all,\ \textcolor{keywordtype}{bool}\ forced=\textcolor{keyword}{false})\ \{\ \ \textcolor{comment}{//\ set\ redraw\_tuning\_corner\ to\ true\ in\ order\ to\ just\ erase\ the\ tuning\ section\ and\ redraw}}
\DoxyCodeLine{00341\ \ \ \ \ \ \ \ \ sprptr-\/>setTextColor(LGRY);}
\DoxyCodeLine{00342\ \ \ \ \ \ \ \ \ sprptr-\/>setTextSize(1);}
\DoxyCodeLine{00343\ \ \ \ \ \ \ \ \ int32\_t\ y\_pos;}
\DoxyCodeLine{00344\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (int32\_t\ lineno\ =\ 0;\ lineno\ <\ disp\_fixed\_lines;\ lineno++)\ \ \{\ \ \textcolor{comment}{//\ Step\ thru\ lines\ of\ fixed\ telemetry\ data}}
\DoxyCodeLine{00345\ \ \ \ \ \ \ \ \ \ \ \ \ y\_pos\ =\ (lineno\ +\ 1)\ *\ disp\_line\_height\_pix\ +\ disp\_vshift\_pix;}
\DoxyCodeLine{00346\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_string(disp\_datapage\_names\_x,\ disp\_datapage\_names\_x,\ y\_pos,\ telemetry[lineno],\ nulstr,\ LGRY,\ BLK,\ forced);}
\DoxyCodeLine{00347\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_string\_units(disp\_datapage\_units\_x,\ y\_pos,\ units[lineno],\ nulstr,\ LGRY,\ BLK);}
\DoxyCodeLine{00348\ \ \ \ \ \ \ \ \ \ \ \ \ disp\_bargraphs[lineno]\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00349\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00350\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (redraw\_all)\ \{}
\DoxyCodeLine{00351\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (int32\_t\ lineno=0;\ lineno\ <\ disp\_tuning\_lines;\ lineno++)\ \ \{\ \ \textcolor{comment}{//\ Step\ thru\ lines\ of\ dataset\ page\ data}}
\DoxyCodeLine{00352\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ draw\_string(disp\_datapage\_names\_x,\ disp\_datapage\_names\_x,\ (lineno\ +\ disp\_fixed\_lines\ +\ 1)\ *\ disp\_line\_height\_pix\ +\ disp\_vshift\_pix,\ datapage\_names[page][lineno],\ datapage\_names[page\_last][lineno],\ LGRY,\ BLK,\ forced);}
\DoxyCodeLine{00353\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ draw\_string\_units(disp\_datapage\_units\_x,\ (lineno\ +\ disp\_fixed\_lines\ +\ 1)\ *\ disp\_line\_height\_pix\ +\ disp\_vshift\_pix,\ tuneunits[page][lineno],\ tuneunits[page\_last][lineno],\ LGRY,\ BLK);}
\DoxyCodeLine{00354\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ int32\_t\ corner\_y\ =\ (lineno\ +\ disp\_fixed\_lines\ +\ 1)\ *\ disp\_line\_height\_pix\ +\ disp\_vshift\_pix\ +\ 7;\ \ \textcolor{comment}{//\ lineno*disp\_line\_height\_pix+disp\_vshift\_pix-\/1;}}
\DoxyCodeLine{00355\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ sprptr-\/>fillRect(disp\_bargraphs\_x-\/1,\ (lineno\ +\ disp\_fixed\_lines\ +\ 1)\ *\ disp\_line\_height\_pix,\ disp\_bargraph\_width\ +\ 2,\ 4,\ BLK);}
\DoxyCodeLine{00356\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (disp\_needles[lineno]\ >=\ 0)\ draw\_bargraph\_needle(-\/1,\ disp\_needles[lineno],\ corner\_y\ -\/\ 6,\ BLK);\ \ \textcolor{comment}{//\ Let's\ draw\ a\ needle}}
\DoxyCodeLine{00357\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00358\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00359\ \ \ \ \ \}}
\DoxyCodeLine{00360\ \ \ \ \ \textcolor{keywordtype}{void}\ draw\_hyphen(int32\_t\ x\_pos,\ int32\_t\ y\_pos,\ uint8\_t\ color)\ \{\ \ \textcolor{comment}{//\ Draw\ minus\ sign\ in\ front\ of\ negative\ numbers}}
\DoxyCodeLine{00361\ \ \ \ \ \ \ \ \ sprptr-\/>drawFastHLine(x\_pos+2,\ y\_pos+3,\ 3,\ color);}
\DoxyCodeLine{00362\ \ \ \ \ \}}
\DoxyCodeLine{00363\ \ \ \ \ \textcolor{keywordtype}{void}\ draw\_dynamic(int32\_t\ lineno,\ std::string\ disp\_string,\ int32\_t\ value,\ int32\_t\ lowlim,\ int32\_t\ hilim,\ int32\_t\ target=-\/1,\ uint8\_t\ color=NON)\ \{}
\DoxyCodeLine{00364\ \ \ \ \ \ \ \ \ int32\_t\ age\_us\ =\ (color\ !=\ NON)\ ?\ 11\ :\ (int32\_t)((\textcolor{keywordtype}{float})(dispAgeTimer[lineno].elapsed())\ /\ 2500000);\ \textcolor{comment}{//\ Divide\ by\ us\ per\ color\ gradient\ quantum}}
\DoxyCodeLine{00365\ \ \ \ \ \ \ \ \ int32\_t\ x\_base\ =\ disp\_datapage\_values\_x;}
\DoxyCodeLine{00366\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ polarity\ =\ (value\ >=\ 0);\ \ \textcolor{comment}{//\ polarity\ 0=negative,\ 1=positive}}
\DoxyCodeLine{00367\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ force\ =\ (value\ ==\ 1234567)\ ||\ disp\_data\_dirty[lineno];}
\DoxyCodeLine{00368\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ((disp\_values[lineno]\ !=\ disp\_string)\ ||\ force)\ \{\ \ \textcolor{comment}{//\ If\ value\ differs,\ Erase\ old\ value\ and\ write\ new}}
\DoxyCodeLine{00369\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (color\ ==\ NON)\ color\ =\ GRN;}
\DoxyCodeLine{00370\ \ \ \ \ \ \ \ \ \ \ \ \ int32\_t\ y\_pos\ =\ lineno*disp\_line\_height\_pix+disp\_vshift\_pix;}
\DoxyCodeLine{00371\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (polarity\ !=\ disp\_polarities[lineno])\ draw\_hyphen(x\_base,\ y\_pos,\ (!polarity)\ ?\ color\ :\ BLK);}
\DoxyCodeLine{00372\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_string(x\_base+disp\_font\_width,\ x\_base+disp\_font\_width,\ y\_pos,\ disp\_string,\ disp\_values[lineno],\ color,\ BLK,\ force\ ||\ (color\ !=\ disp\_val\_colors[lineno]));\ \textcolor{comment}{//\ +6*(arraysize(modecard[run.mode])+4-\/namelen)/2}}
\DoxyCodeLine{00373\ \ \ \ \ \ \ \ \ \ \ \ \ disp\_values[lineno]\ =\ disp\_string;}
\DoxyCodeLine{00374\ \ \ \ \ \ \ \ \ \ \ \ \ disp\_polarities[lineno]\ =\ polarity;}
\DoxyCodeLine{00375\ \ \ \ \ \ \ \ \ \ \ \ \ disp\_val\_colors[lineno]\ =\ color;}
\DoxyCodeLine{00376\ \ \ \ \ \ \ \ \ \ \ \ \ dispAgeTimer[lineno].reset();}
\DoxyCodeLine{00377\ \ \ \ \ \ \ \ \ \ \ \ \ disp\_age\_quanta[lineno]\ =\ 0;}
\DoxyCodeLine{00378\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00379\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (age\_us\ >\ disp\_age\_quanta[lineno]\ \&\&\ age\_us\ <\ 11)\ \ \{\ \ \textcolor{comment}{//\ As\ readings\ age,\ redraw\ in\ new\ color.\ This\ may\ fail\ and\ redraw\ when\ the\ timer\ overflows?\ }}
\DoxyCodeLine{00380\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (age\_us\ <\ 8)\ color\ =\ 0x1c\ +\ (age\_us\ <<\ 5);\ \ \textcolor{comment}{//\ Base\ of\ green\ with\ red\ added\ as\ you\ age,\ until\ yellow\ is\ achieved}}
\DoxyCodeLine{00381\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ color\ =\ 0xfc\ -\/\ ((age\_us-\/8)\ <<\ 2);\ \ \textcolor{comment}{//\ Then\ lose\ green\ as\ you\ age\ further}}
\DoxyCodeLine{00382\ \ \ \ \ \ \ \ \ \ \ \ \ int32\_t\ y\_pos\ =\ (lineno)*disp\_line\_height\_pix+disp\_vshift\_pix;}
\DoxyCodeLine{00383\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!polarity)\ draw\_hyphen(x\_base,\ y\_pos,\ color);}
\DoxyCodeLine{00384\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_string(x\_base+disp\_font\_width,\ x\_base+disp\_font\_width,\ y\_pos,\ disp\_values[lineno],\ \textcolor{stringliteral}{"{}"{}},\ color,\ BLK);}
\DoxyCodeLine{00385\ \ \ \ \ \ \ \ \ \ \ \ \ disp\_age\_quanta[lineno]\ =\ age\_us;}
\DoxyCodeLine{00386\ \ \ \ \ \ \ \ \ \ \ \ \ disp\_val\_colors[lineno]\ =\ color;}
\DoxyCodeLine{00387\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00388\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ delete\_bargraph\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00389\ \ \ \ \ \ \ \ \ int32\_t\ corner\_x\ =\ disp\_bargraphs\_x;}
\DoxyCodeLine{00390\ \ \ \ \ \ \ \ \ int32\_t\ corner\_y\ =\ lineno*disp\_line\_height\_pix+disp\_vshift\_pix;}
\DoxyCodeLine{00391\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (lowlim\ <\ hilim)\ \{\ \ \textcolor{comment}{//\ Any\ value\ having\ a\ given\ range\ deserves\ a\ bargraph\ gauge\ with\ a\ needle}}
\DoxyCodeLine{00392\ \ \ \ \ \ \ \ \ \ \ \ \ int32\_t\ n\_pos\ =\ map(value,\ lowlim,\ hilim,\ disp\_bargraph\_squeeze,\ disp\_bargraph\_width-\/disp\_bargraph\_squeeze);}
\DoxyCodeLine{00393\ \ \ \ \ \ \ \ \ \ \ \ \ int32\_t\ ncolor\ =\ (n\_pos\ >\ disp\_bargraph\_width-\/disp\_bargraph\_squeeze\ ||\ n\_pos\ <\ disp\_bargraph\_squeeze)\ ?\ RED\ :\ GRN;}
\DoxyCodeLine{00394\ \ \ \ \ \ \ \ \ \ \ \ \ n\_pos\ =\ corner\_x\ +\ constrain(n\_pos,\ disp\_bargraph\_squeeze,\ disp\_bargraph\_width-\/disp\_bargraph\_squeeze);}
\DoxyCodeLine{00395\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!disp\_bargraphs[lineno])\ draw\_bargraph\_base(corner\_x,\ corner\_y\ +\ 8,\ disp\_bargraph\_width);}
\DoxyCodeLine{00396\ \ \ \ \ \ \ \ \ \ \ \ \ disp\_bargraphs[lineno]\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00397\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_target\_shape(disp\_targets[lineno],\ corner\_y,\ BLK,\ NON);\ \ \textcolor{comment}{//\ Erase\ old\ target}}
\DoxyCodeLine{00398\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_bargraph\_needle(n\_pos,\ disp\_needles[lineno],\ corner\_y,\ ncolor);\ \ \textcolor{comment}{//\ Let's\ draw\ a\ needle}}
\DoxyCodeLine{00399\ \ \ \ \ \ \ \ \ \ \ \ \ disp\_needles[lineno]\ =\ n\_pos;\ \ \textcolor{comment}{//\ Remember\ position\ of\ needle}}
\DoxyCodeLine{00400\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (target\ !=\ -\/1)\ \{\ \ \textcolor{comment}{//\ If\ target\ value\ is\ given,\ draw\ a\ target\ on\ the\ bargraph\ too}}
\DoxyCodeLine{00401\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ int32\_t\ t\_pos\ =\ map(target,\ lowlim,\ hilim,\ disp\_bargraph\_squeeze,\ disp\_bargraph\_width-\/disp\_bargraph\_squeeze);}
\DoxyCodeLine{00402\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ int32\_t\ tcolor\ =\ (t\_pos\ >\ disp\_bargraph\_width-\/disp\_bargraph\_squeeze\ ||\ t\_pos\ <\ disp\_bargraph\_squeeze)\ ?\ RED\ :\ (\ (t\_pos\ !=\ n\_pos)\ ?\ YEL\ :\ GRN\ );}
\DoxyCodeLine{00403\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ t\_pos\ =\ corner\_x\ +\ constrain(t\_pos,\ disp\_bargraph\_squeeze,\ disp\_bargraph\_width-\/disp\_bargraph\_squeeze);}
\DoxyCodeLine{00404\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ draw\_target\_shape(t\_pos,\ corner\_y,\ tcolor,\ NON);\ \ \textcolor{comment}{//\ Draw\ the\ new\ target}}
\DoxyCodeLine{00405\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ disp\_targets[lineno]\ =\ t\_pos;\ \ \textcolor{comment}{//\ Remember\ position\ of\ target}}
\DoxyCodeLine{00406\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00407\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00408\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ delete\_bargraph\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00409\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (delete\_bargraph\ ||\ value\ ==\ 1234567)\ \{}
\DoxyCodeLine{00410\ \ \ \ \ \ \ \ \ \ \ \ \ sprptr-\/>fillRect(corner\_x\ -\/\ 1,\ corner\_y,\ disp\_bargraph\_width\ +\ 2,\ disp\_line\_height\_pix,\ BLK);}
\DoxyCodeLine{00411\ \ \ \ \ \ \ \ \ \ \ \ \ disp\_bargraphs[lineno]\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00412\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00413\ \ \ \ \ \ \ \ \ disp\_data\_dirty[lineno]\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00414\ \ \ \ \ \}}
\DoxyCodeLine{00415\ \ \ \ \ \textcolor{keywordtype}{void}\ draw\_dynamic(int32\_t\ lineno,\ int32\_t\ value,\ int32\_t\ lowlim=-\/1,\ int32\_t\ hilim=-\/1,\ int32\_t\ target=-\/1)\ \{}
\DoxyCodeLine{00416\ \ \ \ \ \ \ \ \ std::string\ val\_string\ =\ num2string(value,\ (int32\_t)disp\_maxlength);}
\DoxyCodeLine{00417\ \ \ \ \ \ \ \ \ draw\_dynamic(lineno,\ val\_string.c\_str(),\ value,\ lowlim,\ hilim,\ (int32\_t)target);}
\DoxyCodeLine{00418\ \ \ \ \ \}}
\DoxyCodeLine{00419\ \ \ \ \ \textcolor{keywordtype}{void}\ draw\_dynamic(int32\_t\ lineno,\ \textcolor{keywordtype}{float}\ value,\ \textcolor{keywordtype}{float}\ lowlim=-\/1,\ \textcolor{keywordtype}{float}\ hilim=-\/1,\ int32\_t\ target=-\/1,\ int32\_t\ precision\ =\ disp\_default\_float\_precision)\ \{}
\DoxyCodeLine{00420\ \ \ \ \ \ \ \ \ std::string\ val\_string\ =\ num2string(value,\ (int32\_t)disp\_maxlength,\ precision);}
\DoxyCodeLine{00421\ \ \ \ \ \ \ \ \ draw\_dynamic(lineno,\ val\_string.c\_str(),\ (int32\_t)value,\ (int32\_t)lowlim,\ (int32\_t)hilim,\ target);}
\DoxyCodeLine{00422\ \ \ \ \ \}}
\DoxyCodeLine{00423\ \ \ \ \ \textcolor{keywordtype}{void}\ draw\_dynamic(int32\_t\ lineno,\ \textcolor{keywordtype}{float}\ value,\ \textcolor{keywordtype}{float}\ lowlim,\ \textcolor{keywordtype}{float}\ hilim,\ \textcolor{keywordtype}{float}\ target,\ int32\_t\ precision\ =\ disp\_default\_float\_precision)\ \{}
\DoxyCodeLine{00424\ \ \ \ \ \ \ \ \ draw\_dynamic(lineno,\ value,\ lowlim,\ hilim,\ (int32\_t)target,\ precision);}
\DoxyCodeLine{00425\ \ \ \ \ \}}
\DoxyCodeLine{00426\ \ \ \ \ \textcolor{keywordtype}{void}\ draw\_eraseval(int32\_t\ lineno)\ \{}
\DoxyCodeLine{00427\ \ \ \ \ \ \ \ \ draw\_dynamic(lineno,\ \textcolor{stringliteral}{"{}"{}},\ 1234567,\ -\/1,\ -\/1,\ -\/1);}
\DoxyCodeLine{00428\ \ \ \ \ \}}
\DoxyCodeLine{00429\ \ \ \ \ \textcolor{keywordtype}{void}\ draw\_asciiname(int32\_t\ lineno,\ std::string\ name)\ \{}
\DoxyCodeLine{00430\ \ \ \ \ \ \ \ \ draw\_dynamic(lineno,\ name.c\_str(),\ 1,\ -\/1,\ -\/1,\ -\/1,\ CYN);}
\DoxyCodeLine{00431\ \ \ \ \ \}}
\DoxyCodeLine{00432\ \ \ \ \ \textcolor{keywordtype}{void}\ draw\_truth(int32\_t\ lineno,\ \textcolor{keywordtype}{bool}\ truthy,\ int32\_t\ styl=2)\ \{\ \ \textcolor{comment}{//\ 0:on/off,\ 1:yes/no,\ 2:true/false\ .}}
\DoxyCodeLine{00433\ \ \ \ \ \ \ \ \ draw\_dynamic(lineno,\ (truthy)\ ?\ ((styl==0)\ ?\ \textcolor{stringliteral}{"{}on"{}}\ :\ ((styl==1)\ ?\ \textcolor{stringliteral}{"{}yes"{}}\ :\ \textcolor{stringliteral}{"{}true"{}}))\ :\ ((styl==0)\ ?\ \textcolor{stringliteral}{"{}off"{}}\ :\ ((styl==1)\ ?\ \textcolor{stringliteral}{"{}no"{}}\ :\ \textcolor{stringliteral}{"{}false"{}})),\ 1,\ -\/1,\ -\/1,\ -\/1,\ (truthy)\ ?\ LPUR\ :\ GPUR);}
\DoxyCodeLine{00434\ \ \ \ \ \}}
\DoxyCodeLine{00435\ \ \ \ \ int32\_t\ significant\_place(\textcolor{keywordtype}{float}\ value)\ \{\ \ \textcolor{comment}{//\ Returns\ the\ decimal\ place\ of\ the\ most\ significant\ digit\ of\ a\ positive\ float\ value,\ without\ relying\ on\ logarithm\ math}}
\DoxyCodeLine{00436\ \ \ \ \ \ \ \ \ int32\_t\ place\ =\ 1;}
\DoxyCodeLine{00437\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (value\ >=\ 1)\ \{\ \textcolor{comment}{//\ int32\_t\ vallog\ =\ std::log10(value);\ \ //\ Can\ be\ sped\ up}}
\DoxyCodeLine{00438\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (value\ >=\ 10)\ \{}
\DoxyCodeLine{00439\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ value\ /=\ 10;}
\DoxyCodeLine{00440\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ place++;\ \ \textcolor{comment}{//\ ex.\ 100.34\ -\/>\ 3}}
\DoxyCodeLine{00441\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00442\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00443\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (value)\ \{\ \ \textcolor{comment}{//\ checking\ (value)\ rather\ than\ (value\ !=\ 0.0)\ can\ help\ avoid\ precision\ errors\ caused\ by\ digital\ representation\ of\ floating\ numbers}}
\DoxyCodeLine{00444\ \ \ \ \ \ \ \ \ \ \ \ \ place\ =\ 0;}
\DoxyCodeLine{00445\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (value\ <\ 1)\ \{}
\DoxyCodeLine{00446\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ value\ *=\ 10;}
\DoxyCodeLine{00447\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ place-\/-\/;\ \ \textcolor{comment}{//\ ex.\ 0.00334\ -\/>\ -\/3}}
\DoxyCodeLine{00448\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00449\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00450\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ place;}
\DoxyCodeLine{00451\ \ \ \ \ \}}
\DoxyCodeLine{00452\ \ \ \ \ int32\_t\ significant\_place(int32\_t\ value)\ \{\ \ \textcolor{comment}{//\ Returns\ the\ length\ in\ digits\ of\ a\ positive\ integer\ value}}
\DoxyCodeLine{00453\ \ \ \ \ \ \ \ \ int32\_t\ place\ =\ 1;}
\DoxyCodeLine{00454\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (value\ >=\ 10)\ \{}
\DoxyCodeLine{00455\ \ \ \ \ \ \ \ \ \ \ \ \ value\ /=\ 10;}
\DoxyCodeLine{00456\ \ \ \ \ \ \ \ \ \ \ \ \ place++;}
\DoxyCodeLine{00457\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00458\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ place;}
\DoxyCodeLine{00459\ \ \ \ \ \}}
\DoxyCodeLine{00460\ \ \ \ \ std::string\ num2string(int32\_t\ value,\ int32\_t\ maxlength)\ \{\ \ \textcolor{comment}{//\ returns\ an\ ascii\ string\ representation\ of\ a\ given\ integer\ value,\ using\ scientific\ notation\ if\ necessary\ to\ fit\ within\ given\ width\ constraint}}
\DoxyCodeLine{00461\ \ \ \ \ \ \ \ \ value\ =\ abs(value);\ \ \textcolor{comment}{//\ This\ function\ disregards\ sign}}
\DoxyCodeLine{00462\ \ \ \ \ \ \ \ \ int32\_t\ place\ =\ significant\_place(value);\ \ \textcolor{comment}{//\ check\ how\ slow\ is\ log()\ function?\ Compare\ performance\ vs.\ multiple\ divides\ (\ see\ num2string()\ )}}
\DoxyCodeLine{00463\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (place\ <=\ maxlength)\ \textcolor{keywordflow}{return}\ std::to\_string(value);\ \ \textcolor{comment}{//\ If\ value\ is\ short\ enough,\ return\ it}}
\DoxyCodeLine{00464\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{char}\ buffer[maxlength+1];\ \ \textcolor{comment}{//\ Allocate\ buffer\ with\ the\ maximum\ required\ size}}
\DoxyCodeLine{00465\ \ \ \ \ \ \ \ \ std::snprintf(buffer,\ \textcolor{keyword}{sizeof}(buffer),\ \textcolor{stringliteral}{"{}\%.*e"{}},\ maxlength\ -\/\ 4\ -\/\ (\textcolor{keywordtype}{int})(place\ >=\ 10),\ (\textcolor{keywordtype}{float})value);}
\DoxyCodeLine{00466\ \ \ \ \ \ \ \ \ std::string\ result(buffer);\ \ \textcolor{comment}{//\ copy\ buffer\ to\ result}}
\DoxyCodeLine{00467\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ result.substr(0,\ result.find(\textcolor{charliteral}{'e'})\ +\ 1)\ +\ std::to\_string(place);}
\DoxyCodeLine{00468\ \ \ \ \ \}}
\DoxyCodeLine{00469\ \ \ \ \ std::string\ num2string(\textcolor{keywordtype}{float}\ value,\ int32\_t\ maxlength,\ int32\_t\ sigdig,\ \textcolor{keywordtype}{bool}\ chop\_zeroes\ =\ \textcolor{keyword}{true})\ \{\ \ \textcolor{comment}{//\ returns\ an\ ascii\ string\ representation\ of\ a\ given\ float\ value,\ formatted\ efficiently.\ It\ will\ not\ exceed\ maxlength.\ fractional\ digits\ will\ be\ removed\ respecting\ given\ number\ of\ significant\ digits}}
\DoxyCodeLine{00470\ \ \ \ \ \ \ \ \ value\ =\ abs(value);\ \ \textcolor{comment}{//\ This\ function\ disregards\ sign}}
\DoxyCodeLine{00471\ \ \ \ \ \ \ \ \ int32\_t\ place\ =\ significant\_place(value);\ \ \textcolor{comment}{//\ Learn\ decimal\ place\ of\ the\ most\ significant\ digit\ in\ value}}
\DoxyCodeLine{00472\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (place\ >=\ sigdig\ \&\&\ place\ <=\ maxlength)\ \{\ \ \textcolor{comment}{//\ Then\ we\ want\ simple\ cast\ to\ an\ integer\ w/o\ decimal\ point\ (eg\ 123456,\ 12345,\ 1234)}}
\DoxyCodeLine{00473\ \ \ \ \ \ \ \ \ \ \ \ \ std::string\ result(std::to\_string((int32\_t)value));}
\DoxyCodeLine{00474\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ result;}
\DoxyCodeLine{00475\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00476\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (place\ >=\ 0\ \&\&\ place\ <\ maxlength)\ \{\ \ \textcolor{comment}{//\ Then\ we\ want\ float\ formatted\ with\ enough\ nonzero\ digits\ after\ the\ decimal\ point\ for\ given\ significant\ digits\ (eg\ 123.4,\ 12.34,\ 1.234,\ 0.000)}}
\DoxyCodeLine{00477\ \ \ \ \ \ \ \ \ \ \ \ \ int32\_t\ length\ =\ std::min(sigdig+1,\ maxlength);}
\DoxyCodeLine{00478\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{char}\ buffer[length+1];}
\DoxyCodeLine{00479\ \ \ \ \ \ \ \ \ \ \ \ \ std::snprintf(buffer,\ length\ +\ 1,\ (chop\_zeroes)\ ?\ \textcolor{stringliteral}{"{}\%.*g"{}}\ :\ \textcolor{stringliteral}{"{}\%.*f"{}},\ length\ -\/\ 1,\ value);\ \ \textcolor{comment}{//\ (buf,\ letters\ incl.\ end,\ \%.*g\ =\ floats\ formatted\ in\ shortest\ form,\ length-\/1\ digits\ after\ decimal,\ val)}}
\DoxyCodeLine{00480\ \ \ \ \ \ \ \ \ \ \ \ \ std::string\ result(buffer);\ \ \textcolor{comment}{//\ copy\ buffer\ to\ result\ \ \ \ \ \ \ \ \ \ \ \ }}
\DoxyCodeLine{00481\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (value\ !=\ 0.0\ \&\&\ chop\_zeroes\ \&\&\ result.find(\textcolor{charliteral}{'.'})\ !=\ std::string::npos)\ result\ =\ result.substr(0,\ result.find\_last\_not\_of(\textcolor{charliteral}{'0'})\ +\ 1);}
\DoxyCodeLine{00482\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (result.back()\ ==\ \textcolor{charliteral}{'.'})\ result.pop\_back();}
\DoxyCodeLine{00483\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ result;}
\DoxyCodeLine{00484\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00485\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (place\ <\ 0\ \&\&\ sigdig\ -\/\ place\ <=\ maxlength)\ \{\ \ \textcolor{comment}{//\ Then\ we\ want\ decimal\ w/o\ initial\ '0'\ limited\ to\ given\ significant\ digits\ (eg\ .123,\ .0123,\ .00123)}}
\DoxyCodeLine{00486\ \ \ \ \ \ \ \ \ \ \ \ \ std::string\ result\ (std::to\_string(value));\ \ \textcolor{comment}{//\ sd=3,\ \ 0.1234\ \ d=1\ l=6\ \ \ \ 0.00123}}
\DoxyCodeLine{00487\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ decimalPos\ =\ result.find(\textcolor{charliteral}{'.'});\ \ \textcolor{comment}{//\ decimalPos\ will\ always\ be\ 1\ (?)}}
\DoxyCodeLine{00488\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (decimalPos\ !=\ std::string::npos)\ result\ =\ result.substr(decimalPos,\ std::min(sigdig-\/place,\ maxlength));\ \ \textcolor{comment}{//\ Remove\ any\ digits\ to\ the\ left\ of\ the\ decimal\ point}}
\DoxyCodeLine{00489\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ result;}
\DoxyCodeLine{00490\ \ \ \ \ \ \ \ \ \}\ \ \textcolor{comment}{//\ Otherwise\ we\ want\ scientific\ notation\ with\ precision\ removed\ as\ needed\ to\ respect\ maxlength\ (eg\ 1.23e4,\ 1.23e5,\ but\ using\ long\ e\ character\ not\ e\ for\ negative\ exponents}}
\DoxyCodeLine{00491\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{char}\ buffer[maxlength+1];\ \ \textcolor{comment}{//\ Allocate\ buffer\ with\ the\ maximum\ required\ size}}
\DoxyCodeLine{00492\ \ \ \ \ \ \ \ \ int32\_t\ truncit\ =\ std::min(sigdig\ -\/\ 1,\ maxlength\ -\/\ 4\ -\/\ (\textcolor{keywordtype}{int})(place\ <=\ -\/10\ ||\ place\ >=\ 10));}
\DoxyCodeLine{00493\ \ \ \ \ \ \ \ \ std::snprintf(buffer,\ \textcolor{keyword}{sizeof}(buffer),\ \textcolor{stringliteral}{"{}\%.*e"{}},\ truncit,\ value);}
\DoxyCodeLine{00494\ \ \ \ \ \ \ \ \ std::string\ result(buffer);\ \ \textcolor{comment}{//\ copy\ buffer\ to\ result}}
\DoxyCodeLine{00495\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (result.find(\textcolor{stringliteral}{"{}e+0"{}})\ !=\ std::string::npos)\ result.replace(result.find(\textcolor{stringliteral}{"{}e+0"{}}),\ 3,\ \textcolor{stringliteral}{"{}e"{}});\ \ \textcolor{comment}{//\ Remove\ useless\ "{}+0"{}\ from\ exponent}}
\DoxyCodeLine{00496\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (result.find(\textcolor{stringliteral}{"{}e-\/0"{}})\ !=\ std::string::npos)\ result.replace(result.find(\textcolor{stringliteral}{"{}e-\/0"{}}),\ 3,\ \textcolor{stringliteral}{"{}\(\backslash\)x88"{}});\ \ \textcolor{comment}{//\ For\ very\ small\ scientific\ notation\ values,\ replace\ the\ "{}e-\/0"{}\ with\ a\ phoenetic\ long\ e\ character,\ to\ indicate\ negative\ power\ \ //\ if\ (result.find("{}e-\/0"{})\ !=\ std::string::npos)\ }}
\DoxyCodeLine{00497\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (result.find(\textcolor{stringliteral}{"{}e+"{}})\ !=\ std::string::npos)\ result.replace(result.find(\textcolor{stringliteral}{"{}e+"{}}),\ 2,\ \textcolor{stringliteral}{"{}e"{}});\ \ \textcolor{comment}{//\ For\ ridiculously\ large\ values}}
\DoxyCodeLine{00498\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (result.find(\textcolor{stringliteral}{"{}e-\/"{}})\ !=\ std::string::npos)\ result.replace(result.find(\textcolor{stringliteral}{"{}e-\/"{}}),\ 2,\ \textcolor{stringliteral}{"{}\(\backslash\)x88"{}});\ \ \textcolor{comment}{//\ For\ ridiculously\ small\ values}}
\DoxyCodeLine{00499\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ result;}
\DoxyCodeLine{00500\ \ \ \ \ \}}
\DoxyCodeLine{00501\ \ \ \ \ \textcolor{keywordtype}{void}\ draw\_runmode(int32\_t\ \_nowmode,\ uint8\_t\ color\_override=NON)\ \{\ \ \textcolor{comment}{//\ color\_override\ =\ -\/1\ uses\ default\ color}}
\DoxyCodeLine{00502\ \ \ \ \ \ \ \ \ sprptr-\/>setTextDatum(textdatum\_t::top\_left);}
\DoxyCodeLine{00503\ \ \ \ \ \ \ \ \ sprptr-\/>fillRect(disp\_runmode\_text\_x,\ disp\_vshift\_pix,\ (modecard[disp\_oldmode].length()\ +\ 5)\ *\ disp\_font\_width,\ disp\_font\_height,\ BLK);}
\DoxyCodeLine{00504\ \ \ \ \ \ \ \ \ sprptr-\/>setTextColor((color\_override\ ==\ NON)\ ?\ colorcard[\_nowmode]\ :\ color\_override);\ \ }
\DoxyCodeLine{00505\ \ \ \ \ \ \ \ \ sprptr-\/>setCursor(disp\_runmode\_text\_x,\ disp\_vshift\_pix);}
\DoxyCodeLine{00506\ \ \ \ \ \ \ \ \ sprptr-\/>print(modecard[\_nowmode].c\_str());}
\DoxyCodeLine{00507\ \ \ \ \ \ \ \ \ sprptr-\/>print(\textcolor{stringliteral}{"{}\ Mode"{}});}
\DoxyCodeLine{00508\ \ \ \ \ \ \ \ \ disp\_runmode\_dirty\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00509\ \ \ \ \ \ \ \ \ disp\_oldmode\ =\ \_nowmode;}
\DoxyCodeLine{00510\ \ \ \ \ \}}
\DoxyCodeLine{00511\ \ \ \ \ \textcolor{keywordtype}{void}\ draw\_datapage(int32\_t\ page,\ int32\_t\ page\_last,\ \textcolor{keywordtype}{bool}\ forced=\textcolor{keyword}{false})\ \{}
\DoxyCodeLine{00512\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (forced)\ \{}
\DoxyCodeLine{00513\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ disp\_fixed\_lines;\ i\ <\ disp\_lines;\ i++)\ \{}
\DoxyCodeLine{00514\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ disp\_age\_quanta[i]\ =\ 0;}
\DoxyCodeLine{00515\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ dispAgeTimer[i].reset();}
\DoxyCodeLine{00516\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ disp\_data\_dirty[i]\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00517\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00518\ \ \ \ \ \ \ \ \ \ \ \ \ disp\_values\_dirty\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00519\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00520\ \ \ \ \ \ \ \ \ draw\_fixed(page,\ page\_last,\ \textcolor{keyword}{true},\ forced);\ \ \textcolor{comment}{//\ Erase\ and\ redraw\ variable\ names\ and\ units\ for\ data\ on\ this\ page}}
\DoxyCodeLine{00521\ \ \ \ \ \ \ \ \ draw\_string(disp\_datapage\_title\_x,\ disp\_datapage\_title\_x,\ disp\_vshift\_pix,\ pagecard[page],\ pagecard[page\_last],\ STBL,\ BLK,\ forced);\ \textcolor{comment}{//\ +6*(arraysize(modecard[\_runmode.mode()])+4-\/namelen)/2}}
\DoxyCodeLine{00522\ \ \ \ \ \ \ \ \ disp\_datapage\_dirty\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00523\ \ \ \ \ \}}
\DoxyCodeLine{00524\ \ \ \ \ \textcolor{keywordtype}{void}\ draw\_selected\_name(int32\_t\ tun\_ctrl,\ int32\_t\ selected\_val,\ int32\_t\ selected\_last,\ int32\_t\ selected\_last\_last)\ \{}
\DoxyCodeLine{00525\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ disp\_tuning\_lines;\ i++)}
\DoxyCodeLine{00526\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (selected\_val\ !=\ i)\ draw\_string(12,\ 12,\ 12+(i+disp\_fixed\_lines)*disp\_line\_height\_pix+disp\_vshift\_pix,\ datapage\_names[datapage][i],\ nulstr,\ LGRY,\ BLK,\ \textcolor{keyword}{true});}
\DoxyCodeLine{00527\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ if\ (selected\_val\ !=\ selected\_last)\ draw\_string(12,\ 12,\ 12+(selected\_last+disp\_fixed\_lines)*disp\_line\_height\_pix+disp\_vshift\_pix,\ datapage\_names[datapage][selected\_last],\ nulstr,\ LGRY,\ BLK,\ true);}}
\DoxyCodeLine{00528\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ if\ (selected\_val\ !=\ selected\_last\_last)\ draw\_string(12,\ 12,\ 12+(selected\_last\_last+disp\_fixed\_lines)*disp\_line\_height\_pix+disp\_vshift\_pix,\ datapage\_names[datapage][selected\_last\_last],\ nulstr,\ LGRY,\ BLK,\ true);}}
\DoxyCodeLine{00529\ \ \ \ \ \ \ \ \ draw\_string(12,\ 12,\ 12+(selected\_val+disp\_fixed\_lines)*disp\_line\_height\_pix+disp\_vshift\_pix,\ datapage\_names[datapage][selected\_val],\ nulstr,\ (tun\_ctrl\ ==\ EDIT)\ ?\ GRN\ :\ ((tun\_ctrl\ ==\ SELECT)\ ?\ YEL\ :\ LGRY),\ BLK,\ \textcolor{keyword}{true});}
\DoxyCodeLine{00530\ \ \ \ \ \ \ \ \ disp\_selected\_val\_dirty\ =\ \textcolor{keyword}{false};\ \ \ \ }
\DoxyCodeLine{00531\ \ \ \ \ \}}
\DoxyCodeLine{00532\ \ \ \ \ \textcolor{keywordtype}{void}\ draw\_bool(\textcolor{keywordtype}{bool}\ value,\ int32\_t\ col,\ \textcolor{keywordtype}{bool}\ force=\textcolor{keyword}{false})\ \{\ \ \textcolor{comment}{//\ Draws\ values\ of\ boolean\ data}}
\DoxyCodeLine{00533\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ((disp\_bool\_values[col-\/2]\ !=\ value)\ ||\ force)\ \{\ \ \textcolor{comment}{//\ If\ value\ differs,\ Erase\ old\ value\ and\ write\ new}}
\DoxyCodeLine{00534\ \ \ \ \ \ \ \ \ \ \ \ \ int32\_t\ x\_mod\ =\ touch\_margin\_h\_pix\ +\ touch\_cell\_h\_pix*(col)\ +\ (touch\_cell\_h\_pix>>1)\ -\/\ top\_menu\_buttons[col-\/2].length()*(disp\_font\_width>>1)\ +\ 1;}
\DoxyCodeLine{00535\ \ \ \ \ \ \ \ \ \ \ \ \ sprptr-\/>setTextDatum(textdatum\_t::top\_left);}
\DoxyCodeLine{00536\ \ \ \ \ \ \ \ \ \ \ \ \ sprptr-\/>setFont(\&fonts::Font0);}
\DoxyCodeLine{00537\ \ \ \ \ \ \ \ \ \ \ \ \ sprptr-\/>setTextColor((value)\ ?\ GRN\ :\ LGRY);\ \ }
\DoxyCodeLine{00538\ \ \ \ \ \ \ \ \ \ \ \ \ sprptr-\/>drawString(top\_menu\_buttons[col-\/2].c\_str(),\ x\_mod,\ 0);}
\DoxyCodeLine{00539\ \ \ \ \ \ \ \ \ \ \ \ \ disp\_bool\_values[col-\/2]\ =\ value;}
\DoxyCodeLine{00540\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00541\ \ \ \ \ \}}
\DoxyCodeLine{00542\ \ \ \ \ \textcolor{keywordtype}{void}\ draw\_touchgrid(\textcolor{keywordtype}{bool}\ side\_only\ =\ \textcolor{keyword}{false})\ \{\ \ \textcolor{comment}{//\ draws\ edge\ buttons\ with\ names\ in\ 'em.\ If\ replace\_names,\ just\ updates\ names}}
\DoxyCodeLine{00543\ \ \ \ \ \ \ \ \ sprptr-\/>setTextDatum(textdatum\_t::top\_left);}
\DoxyCodeLine{00544\ \ \ \ \ \ \ \ \ int32\_t\ namelen\ =\ 0;}
\DoxyCodeLine{00545\ \ \ \ \ \ \ \ \ sprptr-\/>setTextColor(WHT);}
\DoxyCodeLine{00546\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (int32\_t\ row\ =\ 0;\ row\ <\ arraysize(side\_menu\_buttons);\ row++)\ \{\ \ \textcolor{comment}{//\ Step\ thru\ all\ rows\ to\ draw\ buttons\ along\ the\ left\ edge}}
\DoxyCodeLine{00547\ \ \ \ \ \ \ \ \ \ \ \ \ sprptr-\/>fillRoundRect(-\/9,\ touch\_cell\_v\_pix*row+3,\ 18,\ touch\_cell\_v\_pix-\/6,\ 8,\ DGRY);}
\DoxyCodeLine{00548\ \ \ \ \ \ \ \ \ \ \ \ \ sprptr-\/>drawRoundRect(-\/9,\ touch\_cell\_v\_pix*row+3,\ 18,\ touch\_cell\_v\_pix-\/6,\ 8,\ LYEL);}
\DoxyCodeLine{00549\ \ \ \ \ \ \ \ \ \ \ \ \ namelen\ =\ 0;}
\DoxyCodeLine{00550\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (uint32\_t\ x\ =\ 0\ ;\ x\ <\ side\_menu\_buttons[row].length()\ ;\ x++\ )\ \{}
\DoxyCodeLine{00551\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (side\_menu\_buttons[row][x]\ !=\ \textcolor{charliteral}{'\ '})\ namelen++;\ \textcolor{comment}{//\ Go\ thru\ each\ button\ name.\ Need\ to\ remove\ spaces\ padding\ the\ ends\ of\ button\ names\ shorter\ than\ 4\ letters\ }}
\DoxyCodeLine{00552\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00553\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (int32\_t\ letter\ =\ 0;\ letter\ <\ namelen;\ letter++)\ \{\ \ \textcolor{comment}{//\ Going\ letter\ by\ letter\ thru\ each\ button\ name\ so\ we\ can\ write\ vertically\ }}
\DoxyCodeLine{00554\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ sprptr-\/>setCursor(1,\ (touch\_cell\_v\_pix*row)\ +\ (touch\_cell\_v\_pix/2)\ +\ (disp\_font\_height\ +\ 1)\ *\ (letter\ -\/\ (namelen\ >>\ 1))\ -\/\ 3);\ \textcolor{comment}{//\ adjusts\ vertical\ offset\ depending\ how\ many\ letters\ in\ the\ button\ name\ and\ which\ letter\ we're\ on}}
\DoxyCodeLine{00555\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ sprptr-\/>print(side\_menu\_buttons[row][letter]);\ \ \textcolor{comment}{//\ Writes\ each\ letter\ such\ that\ the\ whole\ name\ is\ centered\ vertically\ on\ the\ button}}
\DoxyCodeLine{00556\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00557\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00558\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!side\_only)\ \{}
\DoxyCodeLine{00559\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (int32\_t\ col\ =\ 2;\ col\ <=\ 5;\ col++)\ \{\ \ \textcolor{comment}{//\ Step\ thru\ all\ cols\ to\ draw\ buttons\ across\ the\ top\ edge}}
\DoxyCodeLine{00560\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ sprptr-\/>fillRoundRect(touch\_margin\_h\_pix\ +\ touch\_cell\_h\_pix*(col)\ +\ 3,\ -\/9,\ touch\_cell\_h\_pix-\/6,\ 18,\ 8,\ DGRY);}
\DoxyCodeLine{00561\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ sprptr-\/>drawRoundRect(touch\_margin\_h\_pix\ +\ touch\_cell\_h\_pix*(col)\ +\ 3,\ -\/9,\ touch\_cell\_h\_pix-\/6,\ 18,\ 8,\ LYEL);\ \ \textcolor{comment}{//\ sprptr-\/>width()-\/9,\ 3,\ 18,\ (sprptr-\/>height()/5)-\/6,\ 8,\ LYEL);}}
\DoxyCodeLine{00562\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00563\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00564\ \ \ \ \ \ \ \ \ disp\_sidemenu\_dirty\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00565\ \ \ \ \ \}}
\DoxyCodeLine{00566\ \ \ \ \ \textcolor{keywordtype}{void}\ draw\_reticle(LGFX\_Sprite*\ spr,\ uint32\_t\ x,\ uint32\_t\ y)\ \{}
\DoxyCodeLine{00567\ \ \ \ \ \ \ \ \ spr-\/>drawFastHLine(x\ -\/\ 2,\ y,\ 5,\ DGRY);}
\DoxyCodeLine{00568\ \ \ \ \ \ \ \ \ spr-\/>drawFastVLine(x,\ y\ -\/\ 2,\ 5,\ DGRY);}
\DoxyCodeLine{00569\ \ \ \ \ \}}
\DoxyCodeLine{00570\ \ \ \ \ \textcolor{keywordtype}{void}\ draw\_reticles(LGFX\_Sprite*\ spr)\ \{}
\DoxyCodeLine{00571\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (touch\_reticles)\ \{}
\DoxyCodeLine{00572\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_reticle(spr,\ disp\_width\_pix-\/touch\_reticle\_offset,\ touch\_reticle\_offset);}
\DoxyCodeLine{00573\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_reticle(spr,\ touch\_reticle\_offset,\ touch\_reticle\_offset);}
\DoxyCodeLine{00574\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_reticle(spr,\ touch\_reticle\_offset,\ disp\_height\_pix-\/touch\_reticle\_offset);}
\DoxyCodeLine{00575\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_reticle(spr,\ disp\_width\_pix-\/touch\_reticle\_offset,\ disp\_height\_pix-\/touch\_reticle\_offset);}
\DoxyCodeLine{00576\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00577\ \ \ \ \ \}}
\DoxyCodeLine{00578\ \ \ \ \ \textcolor{keywordtype}{void}\ draw\_idiotbitmap(\textcolor{keywordtype}{int}\ i,\ int32\_t\ x,\ int32\_t\ y)\ \{}
\DoxyCodeLine{00579\ \ \ \ \ \ \ \ \ uint8\_t\ bg\ =\ idiots-\/>val(i)\ ?\ idiots-\/>color[ON][i]\ :\ BLK;}
\DoxyCodeLine{00580\ \ \ \ \ \ \ \ \ uint8\_t\ color\ =\ idiots-\/>val(i)\ ?\ BLK\ :\ idiots-\/>color[OFF][i];}
\DoxyCodeLine{00581\ \ \ \ \ \ \ \ \ sprptr-\/>drawRoundRect(x,\ y,\ 2\ *\ disp\_font\_width\ +\ 1,\ disp\_font\_height\ +\ 1,\ 1,\ bg);}
\DoxyCodeLine{00582\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ xo\ =\ 0;\ xo\ <\ (2\ *\ disp\_font\_width\ -\/\ 1);\ xo++)}
\DoxyCodeLine{00583\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ yo\ =\ 0;\ yo\ <\ disp\_font\_height\ -\/\ 1;\ yo++)}
\DoxyCodeLine{00584\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ sprptr-\/>drawPixel(x\ +\ xo\ +\ 1,\ y\ +\ yo\ +\ 1,\ ((idiots-\/>icon[i][xo]\ >>\ yo)\ \&\ 1)\ ?\ color\ :\ bg);}
\DoxyCodeLine{00585\ \ \ \ \ \}}
\DoxyCodeLine{00586\ \ \ \ \ \textcolor{keywordtype}{void}\ draw\_temperature(loc\ location,\ \textcolor{keywordtype}{int}\ draw\_index)\ \{}
\DoxyCodeLine{00587\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!tempsens.detected(location))\ draw\_eraseval(draw\_index);}
\DoxyCodeLine{00588\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ draw\_dynamic(draw\_index,\ tempsens.val(location),\ temp\_lims\_f[tempsens.errclass(location)][DISP\_MIN],\ temp\_lims\_f[tempsens.errclass(location)][DISP\_MAX]);}
\DoxyCodeLine{00589\ \ \ \ \ \}}
\DoxyCodeLine{00590\ \ \ \ \ \textcolor{keywordtype}{void}\ draw\_idiotlight(int32\_t\ i,\ int32\_t\ x,\ int32\_t\ y)\ \{}
\DoxyCodeLine{00591\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!idiots-\/>val(i))\ sprptr-\/>fillRect(x,\ y,\ 2\ *\ disp\_font\_width\ +\ 1,\ disp\_font\_height\ +\ 1,\ BLK);\ \ \textcolor{comment}{//\ erase\ rectangle\ when\ turning\ off.\ need\ to\ test\ if\ this\ is\ necessary}}
\DoxyCodeLine{00592\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (idiots-\/>icon[i][0]\ ==\ 0xff)\ \{\ \ \textcolor{comment}{//\ 0xff\ in\ the\ first\ byte\ will\ draw\ 2-\/letter\ string\ instead\ of\ bitmap}}
\DoxyCodeLine{00593\ \ \ \ \ \ \ \ \ \ \ \ \ sprptr-\/>fillRoundRect(x,\ y,\ 2\ *\ disp\_font\_width\ +\ 1,\ disp\_font\_height\ +\ 1,\ 1,\ (idiots-\/>val(i))\ ?\ idiots-\/>color[ON][i]\ :\ BLK);}
\DoxyCodeLine{00594\ \ \ \ \ \ \ \ \ \ \ \ \ sprptr-\/>setTextColor(idiots-\/>val(i)\ ?\ BLK\ :\ idiots-\/>color[OFF][i]);\ \ \textcolor{comment}{//\ darken\_color((*(idiots-\/>lights[index]))\ ?\ BLK\ :\ DGRY)}}
\DoxyCodeLine{00595\ \ \ \ \ \ \ \ \ \ \ \ \ sprptr-\/>setCursor(x+1,\ y+1);}
\DoxyCodeLine{00596\ \ \ \ \ \ \ \ \ \ \ \ \ sprptr-\/>print(idiots-\/>letters[i].c\_str());}
\DoxyCodeLine{00597\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00598\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (idiots-\/>icon[i][0]\ !=\ 0x88)\ draw\_idiotbitmap(i,\ x,\ y);\ \ \textcolor{comment}{//\ 0x88\ in\ the\ first\ byte\ will\ skip\ a\ space}}
\DoxyCodeLine{00599\ \ \ \ \ \ \ \ \ idiots-\/>last[i]\ =\ idiots-\/>val(i);}
\DoxyCodeLine{00600\ \ \ \ \ \}}
\DoxyCodeLine{00601\ \ \ \ \ \textcolor{keywordtype}{void}\ update\_idiots(\textcolor{keywordtype}{bool}\ force\ =\ \textcolor{keyword}{false})\ \{}
\DoxyCodeLine{00602\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ idiots-\/>iconcount;\ i++)\ \{}
\DoxyCodeLine{00603\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (i\ <=\ neo-\/>neopixelsAvailable())\ \{}
\DoxyCodeLine{00604\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (idiots-\/>val(i)\ !=\ idiots-\/>last[i])\ neo-\/>setBoolState(i,\ idiots-\/>val(i));}
\DoxyCodeLine{00605\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00606\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (i\ ==\ LOST\ ||\ i\ ==\ RANGE)\ \{}
\DoxyCodeLine{00607\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (diag.most\_critical\_last[i]\ !=\ diag.most\_critical\_sensor[i])\ \{}
\DoxyCodeLine{00608\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (diag.most\_critical\_sensor[i]\ ==\ \_None)\ neo-\/>setflash((\textcolor{keywordtype}{int})i,\ 0);}
\DoxyCodeLine{00609\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ neo-\/>setflash((\textcolor{keywordtype}{int})i,\ diag.most\_critical\_sensor[i]\ +\ 1,\ 2,\ 6,\ 1,\ 0);}
\DoxyCodeLine{00610\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00611\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ diag.most\_critical\_last[i]\ =\ diag.most\_critical\_sensor[i];}
\DoxyCodeLine{00612\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00613\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (force\ ||\ (idiots-\/>val(i)\ \string^\ idiots-\/>last[i]))\ \{}
\DoxyCodeLine{00614\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ draw\_idiotlight(i,\ idiots\_corner\_x\ +\ (2\ *\ disp\_font\_width\ +\ 2)\ *\ (i\ \%\ idiots-\/>row\_count),\ idiots\_corner\_y\ +\ idiots-\/>row\_height\ *\ (int32\_t)(i\ /\ idiots-\/>row\_count));}
\DoxyCodeLine{00615\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00616\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00617\ \ \ \ \ \ \ \ \ disp\_idiots\_dirty\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00618\ \ \ \ \ \}}
\DoxyCodeLine{00619\ \ \ \ \ \textcolor{keywordtype}{void}\ disp\_menu\_bools()\ \{}
\DoxyCodeLine{00620\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ if\ (!disp\_bools\_dirty)\ return;}}
\DoxyCodeLine{00621\ \ \ \ \ \ \ \ \ draw\_bool((nowmode\ ==\ CAL),\ 2,\ disp\_bools\_dirty);}
\DoxyCodeLine{00622\ \ \ \ \ \ \ \ \ draw\_bool((nowmode\ ==\ BASIC),\ 3,\ disp\_bools\_dirty);}
\DoxyCodeLine{00623\ \ \ \ \ \ \ \ \ draw\_bool(ignition.signal,\ 4,\ disp\_bools\_dirty);}
\DoxyCodeLine{00624\ \ \ \ \ \ \ \ \ draw\_bool(syspower,\ 5,\ disp\_bools\_dirty);}
\DoxyCodeLine{00625\ \ \ \ \ \ \ \ \ disp\_bools\_dirty\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00626\ \ \ \ \ \}}
\DoxyCodeLine{00627\ \ \ \ \ \textcolor{keywordtype}{void}\ disp\_datapage\_values()\ \{}
\DoxyCodeLine{00628\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ if\ (!disp\_values\_dirty)\ return;}}
\DoxyCodeLine{00629\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ drange;}
\DoxyCodeLine{00630\ \ \ \ \ \ \ \ \ draw\_dynamic(1,\ hotrc.pc[VERT][FILT],\ hotrc.pc[VERT][OPMIN],\ hotrc.pc[VERT][OPMAX]);}
\DoxyCodeLine{00631\ \ \ \ \ \ \ \ \ draw\_dynamic(2,\ speedo.filt(),\ 0.0f,\ speedo.redline\_mph(),\ gas.cruisepid.target());}
\DoxyCodeLine{00632\ \ \ \ \ \ \ \ \ draw\_dynamic(3,\ tach.filt(),\ 0.0f,\ tach.redline\_rpm(),\ gas.pid.target());}
\DoxyCodeLine{00633\ \ \ \ \ \ \ \ \ draw\_dynamic(4,\ gas.pc[OUT],\ gas.pc[OPMIN],\ gas.pc[OPMAX],\ gas.throttle\_target\_pc);}
\DoxyCodeLine{00634\ \ \ \ \ \ \ \ \ draw\_dynamic(5,\ pressure.filt(),\ pressure.min\_human(),\ pressure.max\_human(),\ brake.pids[PressurePID].target());\ \ \textcolor{comment}{//\ (brake\_active\_pid\ ==\ S\_PID)\ ?\ (int32\_t)brakeSPID.targ()\ :\ pressure\_target\_adc);}}
\DoxyCodeLine{00635\ \ \ \ \ \ \ \ \ draw\_dynamic(6,\ brake.pc[OUT],\ brake.pc[OPMIN],\ brake.pc[OPMAX]);}
\DoxyCodeLine{00636\ \ \ \ \ \ \ \ \ draw\_dynamic(7,\ hotrc.pc[HORZ][FILT],\ hotrc.pc[HORZ][OPMIN],\ hotrc.pc[HORZ][OPMAX]);}
\DoxyCodeLine{00637\ \ \ \ \ \ \ \ \ draw\_dynamic(8,\ steer.pc[OUT],\ steer.pc[OPMIN],\ steer.pc[OPMAX]);}
\DoxyCodeLine{00638\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (datapage\ ==\ PG\_RUN)\ \{}
\DoxyCodeLine{00639\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_dynamic(9,\ brkpos.filt(),\ brkpos.op\_min(),\ brkpos.op\_max());}
\DoxyCodeLine{00640\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_dynamic(10,\ mulebatt.filt(),\ mulebatt.op\_min\_v(),\ mulebatt.op\_max\_v());}
\DoxyCodeLine{00641\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_dynamic(11,\ pot.val(),\ pot.min(),\ pot.max());}
\DoxyCodeLine{00642\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_dynamic(12,\ airvelo.human(),\ airvelo.min\_mph(),\ airvelo.max\_mph());}
\DoxyCodeLine{00643\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_dynamic(13,\ mapsens.human(),\ mapsens.min\_atm(),\ mapsens.max\_atm());}
\DoxyCodeLine{00644\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_dynamic(14,\ maf\_gps,\ maf\_min\_gps,\ maf\_max\_gps);}
\DoxyCodeLine{00645\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_asciiname(15,\ motormodecard[gas.motormode]);}
\DoxyCodeLine{00646\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_asciiname(16,\ motormodecard[brake.motormode]);}
\DoxyCodeLine{00647\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_asciiname(17,\ motormodecard[steer.motormode]);}
\DoxyCodeLine{00648\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_dynamic(18,\ gas.governor,\ 0.0f,\ 100.0f);}
\DoxyCodeLine{00649\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_dynamic(19,\ steer.steer\_safe\_pc,\ 0.0f,\ 100.0f);}
\DoxyCodeLine{00650\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00651\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (datapage\ ==\ PG\_JOY)\ \{}
\DoxyCodeLine{00652\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_dynamic(9,\ hotrc.us[HORZ][RAW],\ hotrc.us[HORZ][OPMIN],\ hotrc.us[HORZ][OPMAX]);}
\DoxyCodeLine{00653\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_dynamic(10,\ hotrc.us[VERT][RAW],\ hotrc.us[VERT][OPMIN],\ hotrc.us[VERT][OPMAX]);}
\DoxyCodeLine{00654\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_dynamic(11,\ hotrc.us[CH3][RAW],\ hotrc.us[CH3][OPMIN],\ hotrc.us[CH3][OPMAX]);}
\DoxyCodeLine{00655\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_dynamic(12,\ hotrc.us[CH4][RAW],\ hotrc.us[CH4][OPMIN],\ hotrc.us[CH4][OPMAX]);}
\DoxyCodeLine{00656\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_dynamic(13,\ hotrc.pc[HORZ][RAW],\ hotrc.pc[HORZ][OPMIN],\ hotrc.pc[HORZ][OPMAX]);}
\DoxyCodeLine{00657\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_dynamic(14,\ hotrc.pc[VERT][RAW],\ hotrc.pc[VERT][OPMIN],\ hotrc.pc[VERT][OPMAX]);}
\DoxyCodeLine{00658\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ line=15;\ line<=17;\ line++)\ draw\_eraseval(line);}
\DoxyCodeLine{00659\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_dynamic(18,\ hotrc.failsafe\_us,\ hotrc.absmin\_us,\ hotrc.us[VERT][OPMIN]\ -\/\ hotrc.us[VERT][MARGIN]);}
\DoxyCodeLine{00660\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_dynamic(19,\ hotrc.deadband\_us,\ 0,\ 100);}
\DoxyCodeLine{00661\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00662\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (datapage\ ==\ PG\_SENS)\ \{}
\DoxyCodeLine{00663\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_dynamic(9,\ pressure.raw(),\ pressure.min\_native(),\ pressure.max\_native());\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00664\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_dynamic(10,\ brkpos.raw(),\ brkpos.min\_native(),\ brkpos.max\_native());\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00665\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_dynamic(11,\ tach.native()/1000,\ tach.min\_native()/1000,\ tach.max\_native()/1000);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00666\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_dynamic(12,\ pot.adc\_raw,\ pot.adc\_min,\ pot.adc\_max);}
\DoxyCodeLine{00667\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_eraseval(13);}
\DoxyCodeLine{00668\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_dynamic(14,\ airvelo.max\_mph(),\ 0.0f,\ airvelo.abs\_max\_mph());}
\DoxyCodeLine{00669\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_dynamic(15,\ mapsens.min\_atm(),\ mapsens.abs\_min\_atm(),\ mapsens.abs\_max\_atm());}
\DoxyCodeLine{00670\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_dynamic(16,\ mapsens.max\_atm(),\ mapsens.abs\_min\_atm(),\ mapsens.abs\_max\_atm());}
\DoxyCodeLine{00671\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_dynamic(17,\ speedo.idle\_mph(),\ 0.0f,\ speedo.redline\_mph());}
\DoxyCodeLine{00672\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_dynamic(18,\ speedo.redline\_mph(),\ 0.0f,\ speedo.max\_human());}
\DoxyCodeLine{00673\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_dynamic(19,\ brkpos.zeropoint(),\ brkpos.min\_human(),\ brkpos.max\_human());\ \ \textcolor{comment}{//\ BrakePositionSensor::abs\_min\_retract\_in,\ BrakePositionSensor::abs\_max\_extend\_in);}}
\DoxyCodeLine{00674\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00675\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (datapage\ ==\ PG\_PWMS)\ \{}
\DoxyCodeLine{00676\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_dynamic(9,\ gas.deg[OUT],\ gas.deg[OPMIN],\ gas.deg[OPMAX]);}
\DoxyCodeLine{00677\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_dynamic(10,\ gas.us[OUT],\ gas.us[ABSMIN],\ gas.us[ABSMAX]);}
\DoxyCodeLine{00678\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_dynamic(11,\ brake.volt[OUT],\ brake.volt[OPMIN],\ brake.volt[OPMAX]);}
\DoxyCodeLine{00679\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_dynamic(12,\ brake.us[OUT],\ brake.us[ABSMIN],\ brake.us[ABSMAX]);}
\DoxyCodeLine{00680\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_dynamic(13,\ steer.volt[OUT],\ steer.volt[OPMIN],\ steer.volt[OPMAX]);}
\DoxyCodeLine{00681\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_dynamic(14,\ steer.us[OUT],\ steer.us[ABSMIN],\ steer.us[ABSMAX]);}
\DoxyCodeLine{00682\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_eraseval(15);}
\DoxyCodeLine{00683\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_dynamic(16,\ gas.deg[OPMIN],\ gas.deg[ABSMAX],\ gas.deg[ABSMAX]);}
\DoxyCodeLine{00684\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_dynamic(17,\ gas.deg[OPMAX],\ gas.deg[ABSMAX],\ gas.deg[ABSMAX]);}
\DoxyCodeLine{00685\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_dynamic(18,\ brake.us[STOP],\ brake.us[ABSMIN],\ brake.us[ABSMAX]);}
\DoxyCodeLine{00686\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_dynamic(19,\ brake.duty\_fwd\_pc,\ 0.0f,\ 100.0f);}
\DoxyCodeLine{00687\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00688\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (datapage\ ==\ PG\_IDLE)\ \{}
\DoxyCodeLine{00689\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_asciiname(9,\ motormodecard[gas.motormode]);}
\DoxyCodeLine{00690\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_dynamic(10,\ gas.pid.target(),\ 0.0f,\ tach.redline\_rpm());}
\DoxyCodeLine{00691\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_dynamic(11,\ gas.idle\_pc,\ gas.pc[OPMIN],\ gas.pc[OPMAX]);}
\DoxyCodeLine{00692\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_dynamic(12,\ gas.idle\_si[OUT],\ gas.si[OPMIN],\ gas.si[OPMAX]);}
\DoxyCodeLine{00693\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_dynamic(13,\ tach.idle\_rpm(),\ tach.min\_human(),\ tach.max\_human());}
\DoxyCodeLine{00694\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_dynamic(14,\ fuelpump.volts,\ fuelpump.off\_v,\ fuelpump.on\_max\_v);}
\DoxyCodeLine{00695\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_dynamic(15,\ gas.starting\_pc,\ gas.pc[OPMIN],\ gas.pc[OPMAX]);}
\DoxyCodeLine{00696\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_dynamic(16,\ gas.idle\_si[OPMAX],\ gas.idle\_si[ABSMIN],\ gas.idle\_si[ABSMAX],\ -\/1,\ 4);}
\DoxyCodeLine{00697\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_dynamic(17,\ gas.idle\_si[OPMIN],\ gas.idle\_si[ABSMIN],\ gas.idle\_si[ABSMAX],\ -\/1,\ 4);}
\DoxyCodeLine{00698\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_dynamic(18,\ gas.idletemp\_f[OPMIN],\ gas.idletemp\_f[ABSMIN],\ gas.idletemp\_f[ABSMAX]);\ \textcolor{comment}{//\ \ gas.idletemp\_f[ABSMIN],\ gas.idletemp\_f[ABSMAX],\ -\/1,\ 4);}}
\DoxyCodeLine{00699\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_dynamic(19,\ gas.idletemp\_f[OPMAX],\ gas.idletemp\_f[ABSMIN],\ gas.idletemp\_f[ABSMAX]);\ \textcolor{comment}{//\ gas.idletemp\_f[ABSMIN],\ gas.idletemp\_f[ABSMAX],\ -\/1,\ 4);\ }}
\DoxyCodeLine{00700\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00701\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (datapage\ ==\ PG\_BPID)\ \{}
\DoxyCodeLine{00702\ \ \ \ \ \ \ \ \ \ \ \ \ drange\ =\ brake.us[ABSMIN]-\/brake.us[ABSMAX];}
\DoxyCodeLine{00703\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_dynamic(9,\ brkpos.filt(),\ brkpos.op\_min(),\ brkpos.op\_max(),\ brake.pids[PositionPID].target());}
\DoxyCodeLine{00704\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_asciiname(10,\ motormodecard[brake.motormode]);}
\DoxyCodeLine{00705\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_dynamic(11,\ brake.pid\_dom-\/>err(),\ -\/brake.sensmax(),\ brake.sensmax());}
\DoxyCodeLine{00706\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_dynamic(12,\ brake.pid\_dom-\/>target(),\ brake.sensmin(),\ brake.sensmax());}
\DoxyCodeLine{00707\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_dynamic(13,\ brake.pid\_targ\_pc,\ 0.0f,\ 100.0f);\ \ \textcolor{comment}{//\ brake.pid\_dom-\/>outmin(),\ brake.pid\_dom-\/>outmax());}}
\DoxyCodeLine{00708\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ draw\_dynamic(14,\ brake.hybrid\_targ\_ratio\_pc,\ 0.0f,\ 100.0f);\ \ //\ brake.pid\_dom-\/>outmin(),\ brake.pid\_dom-\/>outmax());}}
\DoxyCodeLine{00709\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_dynamic(14,\ brake.hybrid\_out\_ratio\_pc,\ 0.0f,\ 100.0f);\ \ \textcolor{comment}{//\ brake\_spid\_speedo\_delta\_adc,\ -\/range,\ range);}}
\DoxyCodeLine{00710\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_dynamic(15,\ brake.motorheat(),\ brake.motorheatmin(),\ brake.motorheatmax());\ \ \textcolor{comment}{//\ brake\_spid\_speedo\_delta\_adc,\ -\/range,\ range);}}
\DoxyCodeLine{00711\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_eraseval(16);}
\DoxyCodeLine{00712\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_dynamic(17,\ brake.pid\_dom-\/>kp(),\ 0.0f,\ 8.0);}
\DoxyCodeLine{00713\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_dynamic(18,\ brake.pid\_dom-\/>ki(),\ 0.0f,\ 8.0);}
\DoxyCodeLine{00714\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_dynamic(19,\ brake.pid\_dom-\/>kd(),\ 0.0f,\ 8.0);}
\DoxyCodeLine{00715\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ draw\_dynamic(11,\ brake.pid\_dom-\/>pterm(),\ -\/drange,\ drange);}}
\DoxyCodeLine{00716\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ draw\_dynamic(12,\ brake.pid\_dom-\/>iterm(),\ -\/drange,\ drange);}}
\DoxyCodeLine{00717\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ draw\_dynamic(13,\ brake.pid\_dom-\/>dterm(),\ -\/drange,\ drange);}}
\DoxyCodeLine{00718\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00719\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (datapage\ ==\ PG\_GPID)\ \{}
\DoxyCodeLine{00720\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_dynamic(9,\ gas.throttle\_target\_pc,\ 0.0f,\ tach.redline\_rpm());}
\DoxyCodeLine{00721\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_dynamic(10,\ gas.pid.target(),\ 0.0f,\ tach.redline\_rpm());}
\DoxyCodeLine{00722\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_dynamic(11,\ gas.pid.err(),\ tach.idle\_rpm()\ -\/\ tach.govern\_rpm(),\ tach.govern\_rpm()\ -\/\ tach.idle\_rpm());}
\DoxyCodeLine{00723\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_dynamic(12,\ gas.pid.pterm(),\ -\/100.0f,\ 100.0f);}
\DoxyCodeLine{00724\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_dynamic(13,\ gas.pid.iterm(),\ -\/100.0f,\ 100.0f);}
\DoxyCodeLine{00725\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_dynamic(14,\ gas.pid.dterm(),\ -\/100.0f,\ 100.0f);}
\DoxyCodeLine{00726\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_dynamic(15,\ gas.pid.outsum(),\ -\/gas.pid.outrange(),\ gas.pid.outrange());}
\DoxyCodeLine{00727\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_dynamic(16,\ gas.max\_throttle\_angular\_velocity\_degps,\ 0.0f,\ 360.0f);}
\DoxyCodeLine{00728\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_dynamic(17,\ gas.pid.kp(),\ 0.0f,\ 1.0);}
\DoxyCodeLine{00729\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_dynamic(18,\ gas.pid.ki(),\ 0.0f,\ 1.0);}
\DoxyCodeLine{00730\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_dynamic(19,\ gas.pid.kd(),\ 0.0f,\ 1.0);}
\DoxyCodeLine{00731\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00732\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (datapage\ ==\ PG\_CPID)\ \{}
\DoxyCodeLine{00733\ \ \ \ \ \ \ \ \ \ \ \ \ drange\ =\ tach.govern\_rpm()\ -\/\ tach.idle\_rpm();}
\DoxyCodeLine{00734\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_dynamic(9,\ gas.cruisepid.target(),\ 0.0f,\ speedo.govern\_mph());}
\DoxyCodeLine{00735\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_dynamic(10,\ gas.cruisepid.err(),\ speedo.idle\_mph()-\/speedo.govern\_mph(),\ speedo.govern\_mph()-\/speedo.idle\_mph());}
\DoxyCodeLine{00736\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_dynamic(11,\ gas.cruisepid.pterm(),\ -\/drange,\ drange);}
\DoxyCodeLine{00737\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_dynamic(12,\ gas.cruisepid.iterm(),\ -\/drange,\ drange);}
\DoxyCodeLine{00738\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_dynamic(13,\ gas.cruisepid.dterm(),\ -\/drange,\ drange);}
\DoxyCodeLine{00739\ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00740\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ draw\_dynamic(14,\ gas.cruisepid.outsum(),\ -\/gas.cruisepid.outrange(),\ gas.cruisepid.outrange());\ \ //\ cruise\_spid\_speedo\_delta\_adc,\ -\/drange,\ drange);}}
\DoxyCodeLine{00741\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Serial.printf("{}min:\%lf\ max:\%lf"{},\ gas.pc[OPMIN],\ gas.pc[OPMAX]);}}
\DoxyCodeLine{00742\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Serial.printf("{}\ gmin():\%lf\ gmax():\%lf"{},\ gas.pid.outmin(),\ gas.pid.outmax());}}
\DoxyCodeLine{00743\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Serial.printf("{}\ cmin():\%lf\ cmax():\%lf"{},\ gas.cruisepid.outmin(),\ gas.cruisepid.outmax());}}
\DoxyCodeLine{00744\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_eraseval(14);}
\DoxyCodeLine{00745\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_dynamic(15,\ gas.throttle\_target\_pc,\ 0.0f,\ 100.0f);}
\DoxyCodeLine{00746\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_dynamic(16,\ cruise\_delta\_max\_pc\_per\_s,\ 1,\ 35);}
\DoxyCodeLine{00747\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_dynamic(17,\ gas.cruisepid.kp(),\ 0.0f,\ 10.0f);}
\DoxyCodeLine{00748\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_dynamic(18,\ gas.cruisepid.ki(),\ 0.0f,\ 10.0f);}
\DoxyCodeLine{00749\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_dynamic(19,\ gas.cruisepid.kd(),\ 0.0f,\ 10.0f);}
\DoxyCodeLine{00750\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00751\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (datapage\ ==\ PG\_TEMP)\ \{}
\DoxyCodeLine{00752\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_temperature(loc::AMBIENT,\ 9);}
\DoxyCodeLine{00753\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_temperature(loc::ENGINE,\ 10);}
\DoxyCodeLine{00754\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_temperature(loc::WHEEL\_FL,\ 11);}
\DoxyCodeLine{00755\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_temperature(loc::WHEEL\_FR,\ 12);}
\DoxyCodeLine{00756\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_temperature(loc::WHEEL\_RL,\ 13);}
\DoxyCodeLine{00757\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_temperature(loc::WHEEL\_RR,\ 14);}
\DoxyCodeLine{00758\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_temperature(loc::BRAKE,\ 15);}
\DoxyCodeLine{00759\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_dynamic(16,\ touch-\/>touch\_pt(0),\ 0,\ disp\_width\_pix);}
\DoxyCodeLine{00760\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_dynamic(17,\ touch-\/>touch\_pt(1),\ 0,\ disp\_height\_pix);}
\DoxyCodeLine{00761\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_dynamic(18,\ looptimer.uptime());}
\DoxyCodeLine{00762\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_truth(19,\ !web\_disabled,\ 0);\ \ \textcolor{comment}{//\ note\ this\ value\ is\ inverse\ to\ how\ it's\ displayed,\ same\ for\ the\ tuner\ entry}}
\DoxyCodeLine{00763\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ draw\_truth(19,\ dont\_take\_temperatures,\ 2);}}
\DoxyCodeLine{00764\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00765\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (datapage\ ==\ PG\_SIM)\ \{}
\DoxyCodeLine{00766\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_truth(9,\ sim-\/>can\_sim(sens::joy),\ 0);}
\DoxyCodeLine{00767\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_truth(10,\ sim-\/>can\_sim(sens::pressure),\ 0);}
\DoxyCodeLine{00768\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_truth(11,\ sim-\/>can\_sim(sens::brkpos),\ 0);}
\DoxyCodeLine{00769\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_truth(12,\ sim-\/>can\_sim(sens::speedo),\ 0);}
\DoxyCodeLine{00770\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_truth(13,\ sim-\/>can\_sim(sens::tach),\ 0);}
\DoxyCodeLine{00771\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_truth(14,\ sim-\/>can\_sim(sens::airvelo),\ 0);}
\DoxyCodeLine{00772\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_truth(15,\ sim-\/>can\_sim(sens::mapsens),\ 0);}
\DoxyCodeLine{00773\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_truth(16,\ sim-\/>can\_sim(sens::basicsw),\ 0);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00774\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_asciiname(17,\ sensorcard[sim-\/>potmap()]);}
\DoxyCodeLine{00775\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_truth(18,\ cal\_brakemode,\ 0);}
\DoxyCodeLine{00776\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_truth(19,\ cal\_gasmode,\ 0);}
\DoxyCodeLine{00777\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00778\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (datapage\ ==\ PG\_UI)\ \{}
\DoxyCodeLine{00779\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_dynamic(9,\ (int32\_t)loop\_avg\_us,\ looptimer.loop\_scale\_min\_us,\ looptimer.loop\_scale\_avg\_max\_us);}
\DoxyCodeLine{00780\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_dynamic(10,\ looptimer.loop\_peak\_us,\ looptimer.loop\_scale\_min\_us,\ looptimer.loop\_scale\_peak\_max\_us);}
\DoxyCodeLine{00781\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_dynamic(11,\ (int32\_t)looptimer.loopfreq\_hz,\ 0,\ 4000);}
\DoxyCodeLine{00782\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_dynamic(12,\ fps,\ 0.0f,\ 600.0f);}
\DoxyCodeLine{00783\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_dynamic(13,\ drawclock,\ 0,\ refresh\_limit);}
\DoxyCodeLine{00784\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_dynamic(14,\ pushclock,\ 0,\ refresh\_limit);}
\DoxyCodeLine{00785\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_dynamic(15,\ idleclock,\ 0,\ refresh\_limit);}
\DoxyCodeLine{00786\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_truth(16,\ flashdemo,\ 0);}
\DoxyCodeLine{00787\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_dynamic(17,\ neobright,\ 1.0,\ 100.0f,\ -\/1,\ 3);}
\DoxyCodeLine{00788\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_dynamic(18,\ neodesat,\ 0,\ 10,\ -\/1,\ 2);\ \ \textcolor{comment}{//\ -\/10,\ 10,\ -\/1,\ 2);}}
\DoxyCodeLine{00789\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_truth(19,\ screensaver,\ 0);}
\DoxyCodeLine{00790\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00791\ \ \ \ \ \ \ \ \ disp\_values\_dirty\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00792\ \ \ \ \ \}}
\DoxyCodeLine{00793\ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00794\ \ \ \ \ \textcolor{keywordtype}{void}\ update(\textcolor{keywordtype}{int}\ \_nowmode\ =\ -\/1)\ \{}
\DoxyCodeLine{00795\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\_nowmode\ >=\ 0)\ nowmode\ =\ \_nowmode;}
\DoxyCodeLine{00796\ \ \ \ \ \}}
\DoxyCodeLine{00797\ \ \ \ \ \textcolor{keywordtype}{bool}\ draw\_all(LGFX\_Sprite*\ spr)\ \{}
\DoxyCodeLine{00798\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (reset\_request)\ reset(spr);}
\DoxyCodeLine{00799\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!display\_enabled)\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00800\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!auto\_saver\_enabled)\ \{}
\DoxyCodeLine{00801\ \ \ \ \ \ \ \ \ \ \ \ \ tiny\_text();}
\DoxyCodeLine{00802\ \ \ \ \ \ \ \ \ \ \ \ \ update\_idiots(disp\_idiots\_dirty);}
\DoxyCodeLine{00803\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (disp\_datapage\_dirty)\ draw\_datapage(datapage,\ datapage\_last,\ \textcolor{keyword}{true});}
\DoxyCodeLine{00804\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (disp\_sidemenu\_dirty)\ draw\_touchgrid(\textcolor{keyword}{false});}
\DoxyCodeLine{00805\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (disp\_selected\_val\_dirty)\ draw\_selected\_name(tunctrl,\ sel\_val,\ sel\_val\_last,\ sel\_val\_last\_last);}
\DoxyCodeLine{00806\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (disp\_runmode\_dirty)\ draw\_runmode(nowmode,\ NON);}
\DoxyCodeLine{00807\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (disp\_values\_dirty\ ||\ valuesRefreshTimer.expireset())\ \{}
\DoxyCodeLine{00808\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ disp\_menu\_bools();}
\DoxyCodeLine{00809\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ disp\_datapage\_values();}
\DoxyCodeLine{00810\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00811\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00812\ \ \ \ \ \ \ \ \ fps\ =\ animations.update(spr,\ disp\_simbuttons\_dirty);}
\DoxyCodeLine{00813\ \ \ \ \ \ \ \ \ disp\_simbuttons\_dirty\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00814\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00815\ \ \ \ \ \}}
\DoxyCodeLine{00816\ \ \ \ \ \textcolor{keywordtype}{void}\ push\_task()\ \{}
\DoxyCodeLine{00817\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Serial.printf("{}f\%d\ push@\ 0x\%08x\ vs\ 0x\%08x\(\backslash\)n"{},\ flip,\ \&framebuf[flip],\ \&framebuf[!flip]);}}
\DoxyCodeLine{00818\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (print\_framebuffers)\ \{\ \ \textcolor{comment}{//\ warning\ this\ *severely*\ slows\ everything\ down,\ \string~.25\ sec/loop.\ consider\ disabling\ word\ wrap\ in\ terminal\ output}}
\DoxyCodeLine{00819\ \ \ \ \ \ \ \ \ \ \ \ \ Serial.printf(\textcolor{stringliteral}{"{}flip=\%d\(\backslash\)n"{}},\ flip);}
\DoxyCodeLine{00820\ \ \ \ \ \ \ \ \ \ \ \ \ printframebufs(2);}
\DoxyCodeLine{00821\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00822\ \ \ \ \ \ \ \ \ diffpush(\&framebuf[flip],\ \&framebuf[!flip]);}
\DoxyCodeLine{00823\ \ \ \ \ \ \ \ \ flip\ =\ !flip;}
\DoxyCodeLine{00824\ \ \ \ \ \ \ \ \ sprptr\ =\ \&framebuf[flip];}
\DoxyCodeLine{00825\ \ \ \ \ \ \ \ \ pushclock\ =\ (int32\_t)screenRefreshTimer.elapsed();}
\DoxyCodeLine{00826\ \ \ \ \ \}}
\DoxyCodeLine{00827\ \ \ \ \ \textcolor{keywordtype}{void}\ draw\_task()\ \{}
\DoxyCodeLine{00828\ \ \ \ \ \ \ \ \ int32\_t\ mark\ =\ (int32\_t)screenRefreshTimer.elapsed();}
\DoxyCodeLine{00829\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Serial.printf("{}f\%d\ draw@\ 0x\%08x\(\backslash\)n"{},\ flip,\ \&framebuf[flip]);}}
\DoxyCodeLine{00830\ \ \ \ \ \ \ \ \ draw\_all(\&framebuf[flip]);}
\DoxyCodeLine{00831\ \ \ \ \ \ \ \ \ drawclock\ =\ (int32\_t)screenRefreshTimer.elapsed()\ -\/\ mark;}
\DoxyCodeLine{00832\ \ \ \ \ \ \ \ \ idleclock\ =\ refresh\_limit\ -\/\ pushclock\ -\/\ drawclock;}
\DoxyCodeLine{00833\ \ \ \ \ \}}
\DoxyCodeLine{00834\ \ \ \ \ \textcolor{keywordtype}{void}\ diffpush(LGFX\_Sprite*\ source,\ LGFX\_Sprite*\ ref)\ \{}
\DoxyCodeLine{00835\ \ \ \ \ \ \ \ \ \textcolor{keyword}{union\ }\{\ \ \textcolor{comment}{//\ source}}
\DoxyCodeLine{00836\ \ \ \ \ \ \ \ \ \ \ \ \ std::uint32\_t*\ s32;}
\DoxyCodeLine{00837\ \ \ \ \ \ \ \ \ \ \ \ \ std::uint8\_t*\ s;}
\DoxyCodeLine{00838\ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{00839\ \ \ \ \ \ \ \ \ \textcolor{keyword}{union\ }\{\ \ \textcolor{comment}{//\ reference}}
\DoxyCodeLine{00840\ \ \ \ \ \ \ \ \ \ \ \ \ std::uint32\_t*\ r32;}
\DoxyCodeLine{00841\ \ \ \ \ \ \ \ \ \ \ \ \ std::uint8\_t*\ r;}
\DoxyCodeLine{00842\ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{00843\ \ \ \ \ \ \ \ \ s32\ =\ (std::uint32\_t*)source-\/>getBuffer();}
\DoxyCodeLine{00844\ \ \ \ \ \ \ \ \ r32\ =\ (std::uint32\_t*)ref-\/>getBuffer();}
\DoxyCodeLine{00845\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ sprwidth\ =\ source-\/>width();}
\DoxyCodeLine{00846\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ sprheight\ =\ source-\/>height();}
\DoxyCodeLine{00847\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ w32\ =\ (sprwidth\ +\ 3)\ >>\ 2;}
\DoxyCodeLine{00848\ \ \ \ \ \ \ \ \ std::int32\_t\ y\ =\ 0;}
\DoxyCodeLine{00849\ \ \ \ \ \ \ \ \ lcd.startWrite();}
\DoxyCodeLine{00850\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{do}\ \{}
\DoxyCodeLine{00851\ \ \ \ \ \ \ \ \ \ \ \ \ std::int32\_t\ x32\ =\ 0;}
\DoxyCodeLine{00852\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{do}\ \{}
\DoxyCodeLine{00853\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (s32[x32]\ ==\ r32[x32]\ \&\&\ ++x32\ <\ w32);}
\DoxyCodeLine{00854\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (x32\ ==\ w32)\ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00855\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::int32\_t\ xs\ =\ x32\ <<\ 2;}
\DoxyCodeLine{00856\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (s[xs]\ ==\ r[xs])\ ++xs;}
\DoxyCodeLine{00857\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (++x32\ <\ w32\ \&\&\ s32[x32]\ !=\ r32[x32]);}
\DoxyCodeLine{00858\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::int32\_t\ xe\ =\ (x32\ <<\ 2)\ -\/\ 1;}
\DoxyCodeLine{00859\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (xe\ >=\ sprwidth)\ xe\ =\ sprwidth\ -\/\ 1;}
\DoxyCodeLine{00860\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (s[xe]\ ==\ r[xe])\ -\/-\/xe;}
\DoxyCodeLine{00861\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ lcd.pushImageDMA(xs,\ y,\ xe\ -\/\ xs\ +\ 1,\ 1,\ \&s[xs]);}
\DoxyCodeLine{00862\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ memcpy(\&r[xs],\ \&s[xs],\ \textcolor{keyword}{sizeof}(s[0])*(xe\ -\/\ xs\ +\ 1));}
\DoxyCodeLine{00863\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{while}\ (x32\ <\ w32);}
\DoxyCodeLine{00864\ \ \ \ \ \ \ \ \ \ \ \ \ s32\ +=\ w32;}
\DoxyCodeLine{00865\ \ \ \ \ \ \ \ \ \ \ \ \ r32\ +=\ w32;}
\DoxyCodeLine{00866\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{while}\ (++y\ <\ sprheight);}
\DoxyCodeLine{00867\ \ \ \ \ \ \ \ \ lcd.endWrite();\ \ \ \textcolor{comment}{//\ lcd-\/>display();}}
\DoxyCodeLine{00868\ \ \ \ \ \}}
\DoxyCodeLine{00869\ \ \ \ \ \textcolor{keywordtype}{void}\ auto\_saver(\textcolor{keywordtype}{bool}\ enable)\ \{}
\DoxyCodeLine{00870\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{bool}\ was\_simulating;}
\DoxyCodeLine{00871\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (enable)\ \{}
\DoxyCodeLine{00872\ \ \ \ \ \ \ \ \ \ \ \ \ was\_simulating\ =\ sim-\/>enabled();}
\DoxyCodeLine{00873\ \ \ \ \ \ \ \ \ \ \ \ \ sim-\/>disable();}
\DoxyCodeLine{00874\ \ \ \ \ \ \ \ \ \ \ \ \ animations.set\_vp(0,\ 0,\ disp\_width\_pix,\ disp\_height\_pix);}
\DoxyCodeLine{00875\ \ \ \ \ \ \ \ \ \ \ \ \ screensaver\ =\ auto\_saver\_enabled\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00876\ \ \ \ \ \ \ \ \ \ \ \ \ animations.anim\_reset\_request\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00877\ \ \ \ \ \ \ \ \ \ \ \ \ ui\_context\ =\ ScreensaverUI;}
\DoxyCodeLine{00878\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00879\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00880\ \ \ \ \ \ \ \ \ \ \ \ \ screensaver\ =\ auto\_saver\_enabled\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00881\ \ \ \ \ \ \ \ \ \ \ \ \ animations.set\_vp(disp\_simbuttons\_x,\ disp\_simbuttons\_y,\ disp\_simbuttons\_w,\ disp\_simbuttons\_h);}
\DoxyCodeLine{00882\ \ \ \ \ \ \ \ \ \ \ \ \ reset\_request\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00883\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (was\_simulating)\ sim-\/>enable();}
\DoxyCodeLine{00884\ \ \ \ \ \ \ \ \ \ \ \ \ ui\_context\ =\ DatapagesUI;}
\DoxyCodeLine{00885\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00886\ \ \ \ \ \}}
\DoxyCodeLine{00887\ \ \ \ \ \textcolor{keywordtype}{void}\ printframebufs(\textcolor{keywordtype}{int}\ reduce\ =\ 2,\ \textcolor{keywordtype}{bool}\ ascii\ =\ \textcolor{keyword}{false})\ \{\ \ \textcolor{comment}{//\ reduce\ is\ how\ many\ times\ to\ shrink\ the\ screen\ by\ half\ (0,\ 1,\ 2,\ 3,\ or\ 4).\ ascii=true\ gives\ ascii\ art\ output}}
\DoxyCodeLine{00888\ \ \ \ \ \ \ \ \ std::string\ brites[16]\ =\ \{\textcolor{stringliteral}{"{}\ "{}},\ \textcolor{stringliteral}{"{}."{}},\ \textcolor{stringliteral}{"{},"{}},\ \textcolor{stringliteral}{"{}:"{}},\ \textcolor{stringliteral}{"{};"{}},\ \textcolor{stringliteral}{"{}+"{}},\ \textcolor{stringliteral}{"{}="{}},\ \textcolor{stringliteral}{"{}>"{}},\ \textcolor{stringliteral}{"{}\%"{}},\ \textcolor{stringliteral}{"{}\#"{}},\ \textcolor{stringliteral}{"{}*"{}},\ \textcolor{stringliteral}{"{}\$"{}},\ \textcolor{stringliteral}{"{}@"{}},\ \textcolor{stringliteral}{"{}\&"{}},\ \textcolor{stringliteral}{"{}M"{}},\ \textcolor{stringliteral}{"{}W"{}}\};}
\DoxyCodeLine{00889\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ found;}
\DoxyCodeLine{00890\ \ \ \ \ \ \ \ \ uint8\_t*\ s;}
\DoxyCodeLine{00891\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ f=0;\ f<2;\ f++)\ \{}
\DoxyCodeLine{00892\ \ \ \ \ \ \ \ \ \ \ \ \ s\ =\ (uint8\_t*)(framebuf[f]).getBuffer();}
\DoxyCodeLine{00893\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ y=0;\ y<disp\_height\_pix\ >>\ reduce;\ y++)\ \{}
\DoxyCodeLine{00894\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Serial.printf(\textcolor{stringliteral}{"{}\%d\ "{}},\ f);}
\DoxyCodeLine{00895\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ x=0;\ x<disp\_width\_pix\ >>\ reduce;\ x++)\ \{}
\DoxyCodeLine{00896\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ found\ =\ 0;\ }
\DoxyCodeLine{00897\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ sy=0;\ sy<reduce;\ sy++)\ \{}
\DoxyCodeLine{00898\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ sx=0;\ sx<reduce;\ sx++)\ \{}
\DoxyCodeLine{00899\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (s[((y\ <<\ reduce)\ +\ sy)*disp\_width\_pix\ +\ (x\ <<\ reduce)\ +\ sx]\ !=\ 0x00)\ found++;}
\DoxyCodeLine{00900\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00901\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00902\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (ascii)\ Serial.printf(\textcolor{stringliteral}{"{}\%s"{}},\ brites[(reduce\ >=\ 2)\ ?\ (found\ >>\ (reduce\ -\/\ 2))\ :\ (found\ <<\ (2\ -\/\ reduce))].c\_str());}
\DoxyCodeLine{00903\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ Serial.printf(\textcolor{stringliteral}{"{}\%s"{}},\ (found\ >\ 0)\ ?\ \textcolor{stringliteral}{"{}*"{}}\ :\ \textcolor{stringliteral}{"{}."{}});}
\DoxyCodeLine{00904\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00905\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Serial.printf(\textcolor{stringliteral}{"{}\(\backslash\)n"{}});}
\DoxyCodeLine{00906\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00907\ \ \ \ \ \ \ \ \ \ \ \ \ Serial.printf(\textcolor{stringliteral}{"{}\(\backslash\)n"{}});}
\DoxyCodeLine{00908\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00909\ \ \ \ \ \}}
\DoxyCodeLine{00910\ \};}
\DoxyCodeLine{00911\ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_tuner}{Tuner}}\ \{}
\DoxyCodeLine{00912\ \ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00913\ \ \ \ \ \mbox{\hyperlink{class_display}{Display}}*\ screen;}
\DoxyCodeLine{00914\ \ \ \ \ \mbox{\hyperlink{class_neopixel_strip}{NeopixelStrip}}*\ neo;}
\DoxyCodeLine{00915\ \ \ \ \ \mbox{\hyperlink{class_touchscreen}{Touchscreen}}*\ touch;}
\DoxyCodeLine{00916\ \ \ \ \ \mbox{\hyperlink{class_timer}{Timer}}\ tuningAbandonmentTimer\{25000000\};\ \ \textcolor{comment}{//\ This\ times\ out\ edit\ mode\ after\ a\ a\ long\ period\ of\ inactivity}}
\DoxyCodeLine{00917\ \ \ \ \ \mbox{\hyperlink{class_timer}{Timer}}\ tuningEditTimer\{50000\};\ \ \textcolor{comment}{//\ Control\ frequency\ of\ polling\ for\ new\ edits}}
\DoxyCodeLine{00918\ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00919\ \ \ \ \ \mbox{\hyperlink{class_tuner}{Tuner}}(\mbox{\hyperlink{class_display}{Display}}*\ \_screen,\ \mbox{\hyperlink{class_neopixel_strip}{NeopixelStrip}}*\ \_neo,\ \mbox{\hyperlink{class_touchscreen}{Touchscreen}}*\ \_touch)\ :\ screen(\_screen),\ neo(\_neo),\ touch(\_touch)\ \{\}}
\DoxyCodeLine{00920\ \ \ \ \ int32\_t\ idelta\ =\ 0,\ idelta\_encoder\ =\ 0;}
\DoxyCodeLine{00921\ \ \ \ \ \textcolor{keywordtype}{void}\ update(\textcolor{keywordtype}{int}\ rmode)\ \{}
\DoxyCodeLine{00922\ \ \ \ \ \ \ \ \ process\_inputs();}
\DoxyCodeLine{00923\ \ \ \ \ \ \ \ \ edit\_values(rmode);}
\DoxyCodeLine{00924\ \ \ \ \ \}}
\DoxyCodeLine{00925\ \ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00926\ \ \ \ \ \textcolor{keywordtype}{void}\ process\_inputs()\ \{}
\DoxyCodeLine{00927\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!tuningEditTimer.expired())\ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00928\ \ \ \ \ \ \ \ \ tuningEditTimer.reset();}
\DoxyCodeLine{00929\ \ \ \ \ \ \ \ \ sel\_val\_last\ =\ sel\_val;}
\DoxyCodeLine{00930\ \ \ \ \ \ \ \ \ datapage\_last\ =\ datapage;}
\DoxyCodeLine{00931\ \ \ \ \ \ \ \ \ tunctrl\_last\ =\ tunctrl;}
\DoxyCodeLine{00932\ \ \ \ \ \ \ \ \ uint32\_t\ encoder\_sw\_action\ =\ encoder.button.press\_event();\ \ \textcolor{comment}{//\ true\ =\ autoreset\ the\ event\ if\ there\ is\ one}}
\DoxyCodeLine{00933\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (encoder\_sw\_action\ !=\ swNONE)\ \{\ \ \textcolor{comment}{//\ First\ deal\ with\ any\ unhandled\ switch\ press\ events}}
\DoxyCodeLine{00934\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (encoder\_sw\_action\ ==\ swSHORT)\ \ \{\ \ \textcolor{comment}{//\ if\ short\ press}}
\DoxyCodeLine{00935\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (tunctrl\ ==\ EDIT)\ tunctrl\ =\ SELECT;\ \ \textcolor{comment}{//\ If\ we\ were\ editing\ a\ value\ drop\ back\ to\ select\ mode}}
\DoxyCodeLine{00936\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (tunctrl\ ==\ SELECT)\ tunctrl\ =\ EDIT;\ \ \textcolor{comment}{//\ If\ we\ were\ selecting\ a\ variable\ start\ editing\ its\ value}}
\DoxyCodeLine{00937\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (button\_test\_heartbeat\_color)\ heartbeat\_override\_color\ =\ rando\_color();\ \ \textcolor{comment}{//\ temporary!!\ to\ test\ heartbeat\ color\ override\ feature}}
\DoxyCodeLine{00938\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00939\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ tunctrl\ =\ (tunctrl\ ==\ OFF)\ ?\ SELECT\ :\ OFF;\ \ \textcolor{comment}{//\ Long\ press\ starts/stops\ tuning}}
\DoxyCodeLine{00940\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00941\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (tunctrl\ ==\ EDIT)\ idelta\_encoder\ =\ encoder.rotation(\textcolor{keyword}{true});\ \ \textcolor{comment}{//\ true\ =\ include\ acceleration}}
\DoxyCodeLine{00942\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (tunctrl\ ==\ SELECT)\ sel\_val\ +=\ encoder.rotation();\ \ \textcolor{comment}{//\ If\ overflow\ constrain\ will\ fix\ in\ general\ handler\ below}}
\DoxyCodeLine{00943\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (tunctrl\ ==\ OFF)\ datapage\ +=\ encoder.rotation();\ \ \textcolor{comment}{//\ If\ overflow\ tconstrain\ will\ fix\ in\ general\ below}}
\DoxyCodeLine{00944\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (touch-\/>increment\_sel\_val)\ ++sel\_val\ \%=\ disp\_tuning\_lines;}
\DoxyCodeLine{00945\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (touch-\/>increment\_datapage)\ ++datapage\ \%=\ NUM\_DATAPAGES;}
\DoxyCodeLine{00946\ \ \ \ \ \ \ \ \ touch-\/>increment\_sel\_val\ =\ touch-\/>increment\_datapage\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00947\ \ \ \ \ \ \ \ \ idelta\ +=\ idelta\_encoder\ +\ touch-\/>idelta;\ \ \textcolor{comment}{//\ Allow\ edits\ using\ the\ encoder\ or\ touchscreen}}
\DoxyCodeLine{00948\ \ \ \ \ \ \ \ \ touch-\/>idelta\ =\ idelta\_encoder\ =\ 0;}
\DoxyCodeLine{00949\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (tunctrl\ !=\ tunctrl\_last\ ||\ datapage\ !=\ datapage\_last\ ||\ sel\_val\ !=\ sel\_val\_last\ ||\ idelta)\ tuningAbandonmentTimer.reset();\ \ \textcolor{comment}{//\ If\ just\ switched\ tuning\ mode\ or\ any\ tuning\ activity,\ reset\ the\ timer}}
\DoxyCodeLine{00950\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (tuningAbandonmentTimer.expired())\ tunctrl\ =\ OFF;\ \ \textcolor{comment}{//\ If\ the\ timer\ expired,\ go\ to\ OFF\ and\ redraw\ the\ tuning\ corner}}
\DoxyCodeLine{00951\ \ \ \ \ \ \ \ \ datapage\ =\ constrain(datapage,\ 0,\ datapages::NUM\_DATAPAGES-\/1);\ \ \textcolor{comment}{//\ select\ next\ or\ prev\ only\ 1\ at\ a\ time,\ avoiding\ over/underflows,\ and\ without\ giving\ any\ int\ negative\ value}}
\DoxyCodeLine{00952\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (datapage\ !=\ datapage\_last)\ \{}
\DoxyCodeLine{00953\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (tunctrl\ ==\ EDIT)\ tunctrl\ =\ SELECT;\ \ \textcolor{comment}{//\ If\ page\ is\ flipped\ during\ edit,\ drop\ back\ to\ select\ mode}}
\DoxyCodeLine{00954\ \ \ \ \ \ \ \ \ \ \ \ \ screen-\/>disp\_datapage\_dirty\ =\ \textcolor{keyword}{true};\ \ \textcolor{comment}{//\ Redraw\ the\ fixed\ text\ in\ the\ tuning\ corner\ of\ the\ screen\ with\ data\ from\ the\ new\ dataset\ page}}
\DoxyCodeLine{00955\ \ \ \ \ \ \ \ \ \ \ \ \ prefs.putUInt(\textcolor{stringliteral}{"{}dpage"{}},\ datapage);}
\DoxyCodeLine{00956\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00957\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (tunctrl\ ==\ SELECT)\ \{}
\DoxyCodeLine{00958\ \ \ \ \ \ \ \ \ \ \ \ \ sel\_val\ =\ constrain(sel\_val,\ tuning\_first\_editable\_line[datapage],\ disp\_tuning\_lines-\/1);\ \ \textcolor{comment}{//\ Skip\ unchangeable\ values\ for\ all\ PID\ modes}}
\DoxyCodeLine{00959\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (sel\_val\ !=\ sel\_val\_last)\ screen-\/>disp\_selected\_val\_dirty\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00960\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00961\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (tunctrl\ !=\ tunctrl\_last\ ||\ screen-\/>disp\_datapage\_dirty)\ screen-\/>disp\_selected\_val\_dirty\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00962\ \ \ \ \ \}}
\DoxyCodeLine{00963\ \ \ \ \ \textcolor{keywordtype}{void}\ edit\_values(\textcolor{keywordtype}{int}\ rmode)\ \{}
\DoxyCodeLine{00964\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ fdelta\ =\ (float)idelta;}
\DoxyCodeLine{00965\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (tunctrl\ ==\ EDIT\ \&\&\ idelta)\ \{\ \ \textcolor{comment}{//\ Change\ tunable\ values\ when\ editing}}
\DoxyCodeLine{00966\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (datapage\ ==\ PG\_RUN)\ \{}
\DoxyCodeLine{00967\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (sel\_val\ ==\ 9)\ \{\ adj\_val(\&(gas.governor),\ idelta,\ 0,\ 100);\ gas.derive();\ \}}
\DoxyCodeLine{00968\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (sel\_val\ ==\ 10)\ adj\_val(\&(steer.steer\_safe\_pc),\ idelta,\ 0,\ 100);}
\DoxyCodeLine{00969\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00970\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (datapage\ ==\ PG\_JOY)\ \{}
\DoxyCodeLine{00971\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (sel\_val\ ==\ 9)\ adj\_val(\&hotrc.failsafe\_us,\ idelta,\ hotrc.absmin\_us,\ hotrc.us[VERT][OPMIN]\ -\/\ hotrc.us[VERT][MARGIN]);}
\DoxyCodeLine{00972\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (sel\_val\ ==\ 10)\ \{\ adj\_val(\&hotrc.deadband\_us,\ idelta,\ 0,\ 50);\ hotrc.calc\_params();\ \}}
\DoxyCodeLine{00973\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00974\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (datapage\ ==\ PG\_SENS)\ \{}
\DoxyCodeLine{00975\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (sel\_val\ ==\ 5)\ adj\_val(airvelo.max\_mph\_ptr(),\ fdelta,\ 0,\ airvelo.abs\_max\_mph());}
\DoxyCodeLine{00976\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (sel\_val\ ==\ 6)\ adj\_val(mapsens.min\_atm\_ptr(),\ fdelta,\ mapsens.abs\_min\_atm(),\ mapsens.abs\_max\_atm());}
\DoxyCodeLine{00977\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (sel\_val\ ==\ 7)\ adj\_val(mapsens.max\_atm\_ptr(),\ fdelta,\ mapsens.abs\_min\_atm(),\ mapsens.abs\_max\_atm());}
\DoxyCodeLine{00978\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (sel\_val\ ==\ 8)\ adj\_val(speedo.idle\_mph\_ptr(),\ fdelta,\ 0,\ speedo.redline\_mph()\ -\/\ 1);}
\DoxyCodeLine{00979\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (sel\_val\ ==\ 9)\ adj\_val(speedo.redline\_mph\_ptr(),\ fdelta,\ speedo.idle\_mph(),\ 20);}
\DoxyCodeLine{00980\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (sel\_val\ ==\ 10)\ adj\_val(brkpos.zeropoint\_ptr(),\ fdelta,\ brkpos.op\_min(),\ brkpos.op\_max());}
\DoxyCodeLine{00981\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00982\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (datapage\ ==\ PG\_PWMS)\ \{}
\DoxyCodeLine{00983\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (sel\_val\ ==\ 7)\ \{\ adj\_val(\&(gas.si[OPMIN]),\ fdelta,\ gas.si[PARKED]\ +\ 1,\ gas.si[OPMAX]\ -\/\ 1);\ gas.derive();\ \}}
\DoxyCodeLine{00984\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (sel\_val\ ==\ 8)\ \{\ adj\_val(\&(gas.si[OPMAX]),\ fdelta,\ gas.si[OPMIN]\ +\ 1,\ 180.0f);\ gas.derive();\ \}}
\DoxyCodeLine{00985\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (sel\_val\ ==\ 9)\ \{\ adj\_val(\&(brake.us[STOP]),\ fdelta,\ brake.us[OPMIN]\ +\ 1,\ brake.us[OPMAX]\ -\/\ 1);\ brake.derive();\ \}}
\DoxyCodeLine{00986\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (sel\_val\ ==\ 10)\ \{\ adj\_val(\&(brake.duty\_fwd\_pc),\ fdelta,\ 0.0f,\ 100.0f);\ brake.derive();\ \}}
\DoxyCodeLine{00987\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00988\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (datapage\ ==\ PG\_IDLE)\ \{}
\DoxyCodeLine{00989\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (sel\_val\ ==\ 6)\ adj\_val(\&gas.starting\_pc,\ fdelta,\ gas.pc[OPMIN],\ gas.pc[OPMAX]);}
\DoxyCodeLine{00990\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (sel\_val\ ==\ 7)\ gas.add\_idlecold(fdelta);}
\DoxyCodeLine{00991\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (sel\_val\ ==\ 8)\ gas.add\_idlehot(fdelta);}
\DoxyCodeLine{00992\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (sel\_val\ ==\ 9)\ gas.add\_tempcold(fdelta);}
\DoxyCodeLine{00993\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (sel\_val\ ==\ 10)\ gas.add\_temphot(fdelta);}
\DoxyCodeLine{00994\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00995\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (datapage\ ==\ PG\_BPID)\ \{}
\DoxyCodeLine{00996\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (sel\_val\ ==\ 8)\ brake.pid\_dom-\/>add\_kp(0.001f\ *\ fdelta);}
\DoxyCodeLine{00997\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (sel\_val\ ==\ 9)\ brake.pid\_dom-\/>add\_ki(0.001f\ *\ fdelta);}
\DoxyCodeLine{00998\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (sel\_val\ ==\ 10)\ brake.pid\_dom-\/>add\_kd(0.001f\ *\ fdelta);}
\DoxyCodeLine{00999\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01000\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (datapage\ ==\ PG\_GPID)\ \{}
\DoxyCodeLine{01001\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (sel\_val\ ==\ 7)\ adj\_val(\&(gas.max\_throttle\_angular\_velocity\_degps),\ fdelta,\ 0.0f,\ 180.0f);}
\DoxyCodeLine{01002\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (sel\_val\ ==\ 8)\ gas.pid.add\_kp(0.001f\ *\ fdelta);}
\DoxyCodeLine{01003\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (sel\_val\ ==\ 9)\ gas.pid.add\_ki(0.001f\ *\ fdelta);}
\DoxyCodeLine{01004\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (sel\_val\ ==\ 10)\ gas.pid.add\_kd(0.001f\ *\ fdelta);}
\DoxyCodeLine{01005\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01006\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (datapage\ ==\ PG\_CPID)\ \{}
\DoxyCodeLine{01007\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (sel\_val\ ==\ 7)\ adj\_val(\&cruise\_delta\_max\_pc\_per\_s,\ idelta,\ 1,\ 35);}
\DoxyCodeLine{01008\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (sel\_val\ ==\ 8)\ gas.cruisepid.add\_kp(0.001f\ *\ fdelta);}
\DoxyCodeLine{01009\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (sel\_val\ ==\ 9)\ gas.cruisepid.add\_ki(0.001f\ *\ fdelta);}
\DoxyCodeLine{01010\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (sel\_val\ ==\ 10)\ gas.cruisepid.add\_kd(0.001f\ *\ fdelta);}
\DoxyCodeLine{01011\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01012\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (datapage\ ==\ PG\_TEMP)\ \{}
\DoxyCodeLine{01013\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (sel\_val\ ==\ 10)\ adj\_bool(\&web\_disabled,\ -\/1\ *\ idelta);\ \ \textcolor{comment}{//\ note\ this\ value\ is\ inverse\ to\ how\ it's\ displayed,\ same\ for\ the\ value\ display\ entry}}
\DoxyCodeLine{01014\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ else\ if\ (sel\_val\ ==\ 10)\ adj\_bool(\&dont\_take\_temperatures,\ idelta);}}
\DoxyCodeLine{01015\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01016\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (datapage\ ==\ PG\_SIM)\ \{}
\DoxyCodeLine{01017\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (sel\_val\ ==\ 0)\ \{\ sim.set\_can\_sim(sens::joy,\ idelta);\ screen-\/>disp\_simbuttons\_dirty\ =\ \textcolor{keyword}{true};\ \}}
\DoxyCodeLine{01018\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (sel\_val\ ==\ 1)\ \{\ sim.set\_can\_sim(sens::pressure,\ idelta);\ screen-\/>disp\_simbuttons\_dirty\ =\ \textcolor{keyword}{true};\ \}}
\DoxyCodeLine{01019\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (sel\_val\ ==\ 2)\ \{\ sim.set\_can\_sim(sens::brkpos,\ idelta);\ screen-\/>disp\_simbuttons\_dirty\ =\ \textcolor{keyword}{true};\ \}}
\DoxyCodeLine{01020\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (sel\_val\ ==\ 3)\ \{\ sim.set\_can\_sim(sens::speedo,\ idelta);\ screen-\/>disp\_simbuttons\_dirty\ =\ \textcolor{keyword}{true};\ \}}
\DoxyCodeLine{01021\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (sel\_val\ ==\ 4)\ \{\ sim.set\_can\_sim(sens::tach,\ idelta);\ screen-\/>disp\_simbuttons\_dirty\ =\ \textcolor{keyword}{true};\ \}}
\DoxyCodeLine{01022\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (sel\_val\ ==\ 5)\ \{\ sim.set\_can\_sim(sens::airvelo,\ idelta);\ screen-\/>disp\_simbuttons\_dirty\ =\ \textcolor{keyword}{true};\ \}}
\DoxyCodeLine{01023\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (sel\_val\ ==\ 6)\ \{\ sim.set\_can\_sim(sens::mapsens,\ idelta);\ screen-\/>disp\_simbuttons\_dirty\ =\ \textcolor{keyword}{true};\ \}\ \textcolor{comment}{//\ else\ if\ (sel\_val\ ==\ 7)\ sim.set\_can\_sim(sens::starter,\ idelta);}}
\DoxyCodeLine{01024\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (sel\_val\ ==\ 7)\ \{\ sim.set\_can\_sim(sens::basicsw,\ idelta);\ screen-\/>disp\_simbuttons\_dirty\ =\ \textcolor{keyword}{true};\ \}}
\DoxyCodeLine{01025\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (sel\_val\ ==\ 8)\ \{\ sim.set\_potmap((sens)(adj\_val(sim.potmap(),\ idelta,\ 0,\ (\textcolor{keywordtype}{int})(sens::starter)\ -\/\ 1)));\ screen-\/>disp\_simbuttons\_dirty\ =\ \textcolor{keyword}{true};\ \}}
\DoxyCodeLine{01026\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (sel\_val\ ==\ 9)\ adj\_bool(\&(cal\_brakemode\_request),\ idelta);}
\DoxyCodeLine{01027\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (sel\_val\ ==\ 10)\ adj\_bool(\&(cal\_gasmode\_request),\ idelta);}
\DoxyCodeLine{01028\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01029\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (datapage\ ==\ PG\_UI)\ \{}
\DoxyCodeLine{01030\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (sel\_val\ ==\ 7)\ \{\ adj\_bool(\&flashdemo,\ idelta);\ neo-\/>enable\_flashdemo(flashdemo);\ \}}
\DoxyCodeLine{01031\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (sel\_val\ ==\ 8)\ \{\ adj\_val(\&neobright,\ idelta,\ 1,\ 100);\ neo-\/>setbright(neobright);\ \}}
\DoxyCodeLine{01032\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (sel\_val\ ==\ 9)\ \{\ adj\_val(\&neodesat,\ idelta,\ 0,\ 10);\ neo-\/>setdesaturation(neodesat);\ \}}
\DoxyCodeLine{01033\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (sel\_val\ ==\ 10)\ adj\_bool(\&screensaver,\ idelta);}
\DoxyCodeLine{01034\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01035\ \ \ \ \ \ \ \ \ \ \ \ \ idelta\ =\ 0;}
\DoxyCodeLine{01036\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01037\ \ \ \ \ \}}
\DoxyCodeLine{01038\ \};}
\DoxyCodeLine{01039\ \textcolor{keyword}{static}\ \mbox{\hyperlink{class_neopixel_strip}{NeopixelStrip}}\ neo(neopixel\_pin);}
\DoxyCodeLine{01040\ \textcolor{keyword}{static}\ \mbox{\hyperlink{class_idiot_lights}{IdiotLights}}\ idiots;}
\DoxyCodeLine{01041\ \textcolor{keyword}{static}\ \mbox{\hyperlink{class_touchscreen}{Touchscreen}}\ touch;}
\DoxyCodeLine{01042\ \textcolor{keyword}{static}\ \mbox{\hyperlink{class_display}{Display}}\ screen(\&neo,\ \&touch,\ \&idiots,\ \&sim);}
\DoxyCodeLine{01043\ \textcolor{keyword}{static}\ \mbox{\hyperlink{class_tuner}{Tuner}}\ tuner(\&screen,\ \&neo,\ \&touch);}
\DoxyCodeLine{01044\ \textcolor{keywordtype}{bool}\ take\_two\_semaphores(SemaphoreHandle\_t*\ sem1,\ SemaphoreHandle\_t*\ sem2,\ TickType\_t\ waittime=portMAX\_DELAY)\ \{\ \ \ \textcolor{comment}{//\ pdMS\_TO\_TICKS(1)}}
\DoxyCodeLine{01045\ \ \ \ \ \textcolor{keywordflow}{if}\ (xSemaphoreTake(*sem1,\ waittime)\ ==\ pdTRUE)\ \{}
\DoxyCodeLine{01046\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (xSemaphoreTake(*sem2,\ waittime)\ ==\ pdTRUE)\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{01047\ \ \ \ \ \ \ \ \ xSemaphoreGive(*sem1);}
\DoxyCodeLine{01048\ \ \ \ \ \}}
\DoxyCodeLine{01049\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{01050\ \}}
\DoxyCodeLine{01051\ \textcolor{comment}{//\ pushbuf\_sem\ =\ xSemaphoreCreateMutexStatic(\&push\_semaphorebuf\_sem);\ \ //\ xSemaphoreCreateBinaryStatic(\&push\_semaphorebuf\_sem);}}
\DoxyCodeLine{01052\ \textcolor{comment}{//\ drawbuf\_sem\ =\ xSemaphoreCreateMutexStatic(\&draw\_semaphorebuf\_sem);\ \ //\ xSemaphoreCreateBinaryStatic(\&draw\_semaphorebuf\_sem);}}
\DoxyCodeLine{01053\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ push\_task\_wrapper(\textcolor{keywordtype}{void}\ *parameter)\ \{}
\DoxyCodeLine{01054\ \ \ \ \ \textcolor{keywordflow}{while}\ (\textcolor{keyword}{true})\ \{}
\DoxyCodeLine{01055\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (screenRefreshTimer.expired()\ ||\ always\_max\_refresh\ ||\ auto\_saver\_enabled)\ \{}
\DoxyCodeLine{01056\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (take\_two\_semaphores(\&pushbuf\_sem,\ \&drawbuf\_sem,\ portMAX\_DELAY))\ \{}
\DoxyCodeLine{01057\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ screenRefreshTimer.reset();}
\DoxyCodeLine{01058\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ screen.push\_task();}
\DoxyCodeLine{01059\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ xSemaphoreGive(pushbuf\_sem);}
\DoxyCodeLine{01060\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ xSemaphoreGive(drawbuf\_sem);}
\DoxyCodeLine{01061\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01062\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01063\ \ \ \ \ \ \ \ \ vTaskDelay(pdMS\_TO\_TICKS(1));}
\DoxyCodeLine{01064\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ vTaskDelete(NULL);}}
\DoxyCodeLine{01065\ \ \ \ \ \}}
\DoxyCodeLine{01066\ \}}
\DoxyCodeLine{01067\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ draw\_task\_wrapper(\textcolor{keywordtype}{void}\ *parameter)\ \{}
\DoxyCodeLine{01068\ \ \ \ \ \textcolor{keywordflow}{while}\ (\textcolor{keyword}{true})\ \{}
\DoxyCodeLine{01069\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (xSemaphoreTake(drawbuf\_sem,\ portMAX\_DELAY)\ ==\ pdTRUE)\ \{}
\DoxyCodeLine{01070\ \ \ \ \ \ \ \ \ \ \ \ \ screen.draw\_task();}
\DoxyCodeLine{01071\ \ \ \ \ \ \ \ \ \ \ \ \ xSemaphoreGive(drawbuf\_sem);}
\DoxyCodeLine{01072\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01073\ \ \ \ \ \ \ \ \ vTaskDelay(pdMS\_TO\_TICKS(1));\ \ \textcolor{comment}{//\ \ \ ||\ sim.enabled()}}
\DoxyCodeLine{01074\ \ \ \ \ \}}
\DoxyCodeLine{01075\ \}}
\DoxyCodeLine{01076\ \textcolor{comment}{//\ The\ following\ project\ draws\ a\ nice\ looking\ gauge\ cluster,\ very\ apropos\ to\ our\ needs\ and\ the\ code\ is\ given.}}
\DoxyCodeLine{01077\ \textcolor{comment}{//\ See\ this\ video:\ https://www.youtube.com/watch?v=U4jOFLFNZBI\&ab\_channel=VolosProjects}}
\DoxyCodeLine{01078\ \textcolor{comment}{//\ Rinkydink\ home\ page:\ http://www.rinkydinkelectronics.com}}
\DoxyCodeLine{01079\ \textcolor{comment}{//\ moving\ transparent\ arrow\ sprite\ over\ background:\ https://www.youtube.com/watch?v=U4jOFLFNZBI\&ab\_channel=VolosProjects}}
\DoxyCodeLine{01080\ \textcolor{comment}{//\ bar\ graphs:\ https://www.youtube.com/watch?v=g4jlj\_T-\/nRw\&ab\_channel=VolosProjects}}

\end{DoxyCode}

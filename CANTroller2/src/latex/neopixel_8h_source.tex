\doxysection{neopixel.\+h}
\hypertarget{neopixel_8h_source}{}\label{neopixel_8h_source}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00002\ \textcolor{preprocessor}{\#include\ <NeoPixelBus.h>}}
\DoxyCodeLine{00003\ \textcolor{preprocessor}{\#define\ neorgb\_t\ RgbColor\ \ }\textcolor{comment}{//\ RgbwColor}}
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#define\ striplength\ 8}}
\DoxyCodeLine{00005\ NeoPixelBus<NeoGrbFeature,\ NeoSk6812Method>\ neoobj(striplength,\ neopixel\_pin);\ \ \textcolor{comment}{//\ NeoWs2812Method,\ NeoWs2812xMethod,\ NeoSk6812Method,\ NeoEsp32Rmt0Ws2812xMethod,\ NeoEsp32I2s1800KbpsMethod,\ NeoEsp32I2s1Sk6812Method,\ }}
\DoxyCodeLine{00006\ \textcolor{comment}{//\ Default\ for\ esp32\ is\ dma\ via\ I2S\ bus\ 1\ at\ 800kHz\ using\ RMT.\ Don't\ know\ the\ protocol\ difference\ between\ "{}Ws2812"{},\ "{}Ws2812x"{},\ and\ "{}Sk6812"{}}}
\DoxyCodeLine{00007\ \textcolor{comment}{//\ Run\ neos\ in\ a\ task\ example:\ https://github.com/Makuna/NeoPixelBus/wiki/ESP32-\/and-\/RTOS-\/Tasks}}
\DoxyCodeLine{00008\ }
\DoxyCodeLine{00009\ \textcolor{comment}{//\ i\ made\ a\ set\ of\ functions\ to\ convert\ colors\ between\ any\ of\ four\ relevant\ formats.\ }}
\DoxyCodeLine{00010\ uint32\_t\ color\_to\_888(uint16\_t\ color565)\ \{\ \textcolor{keywordflow}{return}\ (\textcolor{keyword}{static\_cast<}uint32\_t\textcolor{keyword}{>}(color565\ \&\ 0xf800)\ <<\ 8)\ |\ (\textcolor{keyword}{static\_cast<}uint32\_t\textcolor{keyword}{>}(color565\ \&\ 0x7e0)\ <<\ 5)\ |\ (\textcolor{keyword}{static\_cast<}uint32\_t\textcolor{keyword}{>}(color565\ \&\ 0x1f)\ <<\ 3);\ \}\ \textcolor{comment}{//\ Convert\ 5-\/6-\/5\ encoded\ 16-\/bit\ color\ value\ to\ uint32\ in\ format\ 0x00RRGGBB}}
\DoxyCodeLine{00011\ uint32\_t\ color\_to\_888(uint8\_t\ color332)\ \{\ \textcolor{keywordflow}{return}\ (\textcolor{keyword}{static\_cast<}uint32\_t\textcolor{keyword}{>}(color332\ \&\ 0xe0)\ <<\ 16)\ |\ (\textcolor{keyword}{static\_cast<}uint32\_t\textcolor{keyword}{>}(color332\ \&\ 0x1c)\ <<\ 11)\ |\ (\textcolor{keyword}{static\_cast<}uint32\_t\textcolor{keyword}{>}(color332\ \&\ 0x3)\ <<\ 6);\ \}}
\DoxyCodeLine{00012\ uint32\_t\ color\_to\_888(neorgb\_t\ colorneo)\ \{\ \textcolor{keywordflow}{return}\ (\textcolor{keyword}{static\_cast<}uint32\_t\textcolor{keyword}{>}(colorneo.R)\ <<\ 16)\ |\ (\textcolor{keyword}{static\_cast<}uint32\_t\textcolor{keyword}{>}(colorneo.G)\ <<\ 8)\ |\ \textcolor{keyword}{static\_cast<}uint32\_t\textcolor{keyword}{>}(colorneo.B);\ \}\ \textcolor{comment}{//\ (static\_cast<uint32\_t>(color.W)\ <<\ 24)}}
\DoxyCodeLine{00013\ uint16\_t\ color\_to\_565(uint32\_t\ color888)\ \{\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{static\_cast<}uint16\_t\textcolor{keyword}{>}(((color888\ \&\ 0xf80000)\ >>\ 8)\ |\ ((color888\ \&\ 0xfc00)\ >>\ 5)\ |\ ((color888\ \&\ 0xf8)\ >>\ 3));\ \}\ \ \textcolor{comment}{//\ Convert\ uint32\ color\ in\ format\ 0x00RRGGBB\ to\ uint16\ 5-\/6-\/5\ encoded\ color\ value\ suitable\ for\ screen}}
\DoxyCodeLine{00014\ uint16\_t\ color\_to\_565(uint8\_t\ color332)\ \{\ \textcolor{keywordflow}{return}\ ((\textcolor{keyword}{static\_cast<}uint16\_t\textcolor{keyword}{>}(color332)\ \&\ 0xe0)\ <<\ 8)\ |\ ((\textcolor{keyword}{static\_cast<}uint16\_t\textcolor{keyword}{>}(color332)\ \&\ 0x1c)\ <<\ 6)\ |\ ((\textcolor{keyword}{static\_cast<}uint16\_t\textcolor{keyword}{>}(color332)\ \&\ 0x3)\ <<\ 3);\ \}\ \ \textcolor{comment}{//\ Convert\ uint32\ color\ in\ format\ 0x00RRGGBB\ to\ uint16\ 5-\/6-\/5\ encoded\ color\ value\ suitable\ for\ screen}}
\DoxyCodeLine{00015\ uint16\_t\ color\_to\_565(neorgb\_t\ colorneo)\ \{\ \textcolor{keywordflow}{return}\ ((\textcolor{keyword}{static\_cast<}uint16\_t\textcolor{keyword}{>}(colorneo.R)\ \&\ 0xf8)\ <<\ 8)\ |\ ((\textcolor{keyword}{static\_cast<}uint16\_t\textcolor{keyword}{>}(colorneo.G)\ \&\ 0xfc)\ <<\ 3)\ |\ (((\textcolor{keyword}{static\_cast<}uint16\_t\textcolor{keyword}{>}(colorneo.B)\ \&\ 0xf8)\ >>\ 3));\ \}}
\DoxyCodeLine{00016\ uint8\_t\ color\_to\_332(uint16\_t\ color565)\ \{\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{static\_cast<}uint8\_t\textcolor{keyword}{>}(((color565\ \&\ 0xe000)\ >>\ 8)\ |\ ((color565\ \&\ 0x700)\ >>\ 6)\ |\ ((color565\ \&\ 0x18)\ >>\ 3));\ \}\ \ \textcolor{comment}{//\ Convert\ uint32\ color\ in\ format\ 0x00RRGGBB\ to\ uint16\ 5-\/6-\/5\ encoded\ color\ value\ suitable\ for\ screen}}
\DoxyCodeLine{00017\ uint8\_t\ color\_to\_332(uint32\_t\ color888)\ \{\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{static\_cast<}uint8\_t\textcolor{keyword}{>}(((color888\ \&\ 0xe00000)\ >>\ 16)\ |\ ((color888\ \&\ 0xe000)\ >>\ 11)\ |\ ((color888\ \&\ 0xc0)\ >>\ 6));\ \}}
\DoxyCodeLine{00018\ uint8\_t\ color\_to\_332(neorgb\_t\ colorneo)\ \{\ \textcolor{keywordflow}{return}\ (colorneo.R\ \&\ 0xe0)\ |\ ((colorneo.G\ \&\ 0xe0)\ >>\ 3)\ |\ ((colorneo.B\ \&\ 0xc0)\ >>\ 6);\ \}}
\DoxyCodeLine{00019\ neorgb\_t\ color\_to\_neo(uint32\_t\ color888)\ \{\ \textcolor{keywordflow}{return}\ neorgb\_t((color888\ >>\ 16)\ \&\ 0xff,\ (color888\ >>\ 8)\ \&\ 0xff,\ color888\ \&\ 0xff);\ \}\ \ \textcolor{comment}{//\ (static\_cast<uint32\_t>(color.W)\ <<\ 24)\ |}}
\DoxyCodeLine{00020\ neorgb\_t\ color\_to\_neo(uint16\_t\ color565)\ \{\ \textcolor{keywordflow}{return}\ neorgb\_t((color565\ \&\ 0xf800)\ >>\ 8,\ (color565\ \&\ 0x7e0)\ >>\ 3,\ (color565\ \&\ 0x1f)\ <<\ 3);\ \}\ \ \textcolor{comment}{//\ ,\ 0);}}
\DoxyCodeLine{00021\ neorgb\_t\ color\_to\_neo(uint8\_t\ color332)\ \{\ \textcolor{keywordflow}{return}\ neorgb\_t(color332\ \&\ 0xe0,\ (color332\ \&\ 0x1c)\ <<\ 3,\ (color332\ \&\ 0x3)\ <<\ 6);\ \}\ \ \textcolor{comment}{//\ ,\ 0);}}
\DoxyCodeLine{00022\ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_neopixel_strip}{NeopixelStrip}}\ \{}
\DoxyCodeLine{00023\ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00024\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ uint\ idiotcount\ =\ 7;}
\DoxyCodeLine{00025\ \ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00026\ \ \ \ \ \textcolor{keyword}{enum}\ brightness\_presets\ :\ \textcolor{keywordtype}{int}\ \{\ B\_OFF,\ B\_MIN,\ B\_LO,\ B\_MED,\ B\_HI,\ B\_EXT,\ B\_MAX\ \};}
\DoxyCodeLine{00027\ \ \ \ \ \textcolor{keyword}{enum}\ ledset\ :\ \textcolor{keywordtype}{int}\ \{\ onoff,\ fcount,\ fpulseh,\ fpulsel,\ fonbrit,\ fnumset\ \};\ \ \textcolor{comment}{//\ just\ a\ bunch\ of\ int\ variables\ needed\ for\ each\ of\ the\ neo\ idiot\ lights}}
\DoxyCodeLine{00028\ \ \ \ \ \textcolor{keyword}{enum}\ ledcolor\ :\ \textcolor{keywordtype}{int}\ \{\ cnow,\ clast,\ cnormal,\ coff,\ con,\ cflash,\ cnumcolors\ \};}
\DoxyCodeLine{00029\ \ \ \ \ uint8\_t\ neo\_wheelcounter\ =\ 0;}
\DoxyCodeLine{00030\ \ \ \ \ \textcolor{keyword}{enum}\ brightness\_contexts\ \{\ NITE,\ DAY\ \};\ \ \textcolor{comment}{//\ Indoors\ =\ NITE}}
\DoxyCodeLine{00031\ \ \ \ \ uint8\_t\ brightlev[2][7]\ =\ \{\ \{\ 0,\ 2,\ \ 6,\ 10,\ 17,\ 30,\ \ 50\ \},\ \ \ \ \ \textcolor{comment}{//\ [NITE]\ [B\_OFF/B\_MIN/B\_LOW/B\_MED/B\_HIGH/B\_EXT/B\_MAX]}}
\DoxyCodeLine{00032\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{\ 0,\ 3,\ 16,\ 30,\ 45,\ 65,\ 100\ \},\ \};\ \ \textcolor{comment}{//\ [DAY]\ [B\_OFF/B\_MIN/B\_LOW/B\_MED/B\_HIGH/B\_EXT/B\_MAX]}}
\DoxyCodeLine{00033\ \ \ \ \ \textcolor{keywordtype}{bool}\ context\ =\ NITE;}
\DoxyCodeLine{00034\ \ \ \ \ \textcolor{keywordtype}{bool}\ neo\_heartbeat\_variable\_brightness\ =\ \textcolor{keyword}{false};\ \ \textcolor{comment}{//\ If\ false\ then\ brightness\ control\ only\ affect\ idiotlights}}
\DoxyCodeLine{00035\ \ \ \ \ uint8\_t\ lobright;}
\DoxyCodeLine{00036\ \ \ \ \ uint8\_t\ heartbright\ =\ 22;}
\DoxyCodeLine{00037\ \ \ \ \ uint8\_t\ hibright\ =\ 35;}
\DoxyCodeLine{00038\ \ \ \ \ uint8\_t\ heartlobright\ =\ 2;}
\DoxyCodeLine{00039\ \ \ \ \ int8\_t\ lomultiplier\ =\ 3;\ \ \textcolor{comment}{//\ lobright\ is\ hibright\ divided\ by\ this\ twice}}
\DoxyCodeLine{00040\ \ \ \ \ \textcolor{keywordtype}{float}\ desat\_of\_ten\ =\ 0.0;\ \ \textcolor{comment}{//\ out\ of\ 10.0}}
\DoxyCodeLine{00041\ \ \ \ \ uint8\_t\ neo\_master\_brightness\ =\ 0xff;}
\DoxyCodeLine{00042\ \ \ \ \ \textcolor{keywordtype}{float}\ correction[3]\ =\ \{\ 1.0,\ 0.9,\ 1.0\ \};\ \ \textcolor{comment}{//\ Applied\ to\ brightness\ of\ rgb\ elements}}
\DoxyCodeLine{00043\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ uint32\_t\ neo\_fade\_timeout\_us\ =\ 380000;}
\DoxyCodeLine{00044\ \ \ \ \ \mbox{\hyperlink{class_timer}{Timer}}\ neoFadeTimer\ =\ \mbox{\hyperlink{class_timer}{Timer}}(neo\_fade\_timeout\_us),\ neoHeartbeatTimer;}
\DoxyCodeLine{00045\ \ \ \ \ \textcolor{keywordtype}{bool}\ neo\_heartbeat\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00046\ \ \ \ \ \textcolor{keywordtype}{bool}\ heartcolor\_change\ =\ \textcolor{keyword}{true};\ \ \textcolor{comment}{//\ ,\ heartcolor\_overridden\ =\ false;}}
\DoxyCodeLine{00047\ \ \ \ \ \textcolor{keywordtype}{int}\ pin\ =\ -\/1;}
\DoxyCodeLine{00048\ \ \ \ \ uint8\_t\ heartbeat\_brightness,\ heartbeat\_brightness\_last;\ \textcolor{comment}{//\ brightness\ during\ fadeouts}}
\DoxyCodeLine{00049\ \ \ \ \ uint32\_t\ neobright\_last;}
\DoxyCodeLine{00050\ \ \ \ \ int32\_t\ heartbeat\_state\ =\ 0;}
\DoxyCodeLine{00051\ \ \ \ \ int32\_t\ heartbeat\_level\ =\ 0;}
\DoxyCodeLine{00052\ \ \ \ \ int64\_t\ heartbeat\_ekg\_us[4]\ =\ \{250000,\ 240000,\ 620000,\ 2000000\};\ \ \textcolor{comment}{//\ \{187500,\ 125000,\ 562500,\ 1250000\};}}
\DoxyCodeLine{00053\ \ \ \ \ int32\_t\ heartbeat\_pulse\ =\ 255;}
\DoxyCodeLine{00054\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ uint8\_t\ numpixels\ =\ 1\ +\ idiotcount;\ \ \textcolor{comment}{//\ \ +\ extIdiotCount;\ \ //\ 15\ pixels\ =\ heartbeat\ RGB\ +\ 7\ onboard\ RGB\ +\ 7\ external\ RGBW}}
\DoxyCodeLine{00055\ \ \ \ \ neorgb\_t\ neostrip[numpixels];}
\DoxyCodeLine{00056\ \ \ \ \ neorgb\_t\ heartbeatColor,\ heartbeatNow;}
\DoxyCodeLine{00057\ \ \ \ \ uint8\_t\ heartcolor16\ =\ 0x00;\ \ \textcolor{comment}{//\ blackened\ heart}}
\DoxyCodeLine{00058\ \ \ \ \ \textcolor{keywordtype}{bool}\ breadboard\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00059\ \ \ \ \ uint8\_t\ fset[idiotcount][fnumset];}
\DoxyCodeLine{00060\ \ \ \ \ neorgb\_t\ cidiot[idiotcount][cnumcolors];}
\DoxyCodeLine{00061\ \ \ \ \ uint32\_t\ fquantum\_us\ =\ 50000;\ \ \textcolor{comment}{//\ time\ resolution\ of\ flashes}}
\DoxyCodeLine{00062\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ uint8\_t\ fevresolution\ =\ 128;}
\DoxyCodeLine{00063\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ uint8\_t\ fevpages\ =\ 4;\ \ \textcolor{comment}{//\ fevresolution\ /\ 32;\ \ <-\/\ but\ if\ I\ use\ that\ math\ instead,\ seg\ fault}}
\DoxyCodeLine{00064\ \ \ \ \ uint32\_t\ fevents[idiotcount][fevpages];}
\DoxyCodeLine{00065\ \ \ \ \ uint8\_t\ fevcurrpage\ =\ 0;\ uint8\_t\ fevfilled\ =\ 0;\ uint32\_t\ nowtime\_us,\ nowepoch;\ \ \textcolor{comment}{//\ ,\ fevmask\_master;}}
\DoxyCodeLine{00066\ \ \ \ \ \mbox{\hyperlink{class_timer}{Timer}}\ flashtimer;}
\DoxyCodeLine{00067\ \ \ \ \ \textcolor{keywordtype}{float}\ maxelement(\textcolor{keywordtype}{float}\ r,\ \textcolor{keywordtype}{float}\ g,\ \textcolor{keywordtype}{float}\ b);}
\DoxyCodeLine{00068\ \ \ \ \ \textcolor{keywordtype}{float}\ midelement(\textcolor{keywordtype}{float}\ r,\ \textcolor{keywordtype}{float}\ g,\ \textcolor{keywordtype}{float}\ b);}
\DoxyCodeLine{00069\ \ \ \ \ \textcolor{keywordtype}{float}\ minelement(\textcolor{keywordtype}{float}\ r,\ \textcolor{keywordtype}{float}\ g,\ \textcolor{keywordtype}{float}\ b);}
\DoxyCodeLine{00070\ \ \ \ \ neorgb\_t\ dimmer(neorgb\_t\ color,\ uint8\_t\ bright);\ \ \textcolor{comment}{//\ brightness\ 0\ is\ off,\ 100\ is\ max\ brightness\ while\ retaining\ same\ hue\ and\ saturation}}
\DoxyCodeLine{00071\ \ \ \ \ neorgb\_t\ desaturate(neorgb\_t\ color,\ int32\_t\ \_desat\_of\_ten);\ \ \textcolor{comment}{//\ desat\_pc=0\ has\ no\ effect,\ =10\ desaturates\ all\ the\ way\ to\ greyscale,\ =-\/99\ saturates\ to\ max.\ without\ change\ in\ brightness}}
\DoxyCodeLine{00072\ \ \ \ \ \textcolor{keywordtype}{void}\ recolor\_idiots(int8\_t\ argidiot\ =\ -\/1);}
\DoxyCodeLine{00073\ \ \ \ \ \textcolor{keywordtype}{bool}\ fevpop(uint\ \_idiot,\ int8\_t\ pop\_off);}
\DoxyCodeLine{00074\ \ \ \ \ \textcolor{keywordtype}{void}\ fevpush(uint\ \_idiot,\ int8\_t\ push\_off,\ \textcolor{keywordtype}{bool}\ push\_val);}
\DoxyCodeLine{00075\ \ \ \ \ \textcolor{keywordtype}{void}\ update\_idiot(uint\ \_idiot);}
\DoxyCodeLine{00076\ \ \ \ \ \textcolor{keywordtype}{void}\ calc\_lobright();}
\DoxyCodeLine{00077\ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00078\ \ \ \ \ \mbox{\hyperlink{class_neopixel_strip}{NeopixelStrip}}(\textcolor{keywordtype}{int}\ argpin)\ \{\ pin\ =\ argpin;\ \}}
\DoxyCodeLine{00079\ \ \ \ \ \textcolor{keywordtype}{void}\ refresh();}
\DoxyCodeLine{00080\ \ \ \ \ \textcolor{keywordtype}{void}\ setup(\textcolor{keywordtype}{bool}\ viewcontext=NITE);}
\DoxyCodeLine{00081\ \ \ \ \ \textcolor{keywordtype}{void}\ setbright(uint8\_t\ bright\_pc);}
\DoxyCodeLine{00082\ \ \ \ \ \textcolor{keywordtype}{void}\ setdesaturation(\textcolor{keywordtype}{float}\ \_desat\_of\_ten);\ \ \textcolor{comment}{//\ a\ way\ to\ specify\ nite\ or\ daytime\ brightness\ levels}}
\DoxyCodeLine{00083\ \ \ \ \ \textcolor{keywordtype}{void}\ heartbeat\_ena(\textcolor{keywordtype}{bool}\ onoroff);}
\DoxyCodeLine{00084\ \ \ \ \ \textcolor{keywordtype}{void}\ set\_heartcolor(uint8\_t\ newcolor);}
\DoxyCodeLine{00085\ \ \ \ \ \textcolor{keywordtype}{void}\ heartcolor\_override(uint8\_t\ color);}
\DoxyCodeLine{00086\ \ \ \ \ \textcolor{keywordtype}{void}\ heartbeat\_update();}
\DoxyCodeLine{00087\ \ \ \ \ \textcolor{keywordtype}{void}\ colorfade\_update();}
\DoxyCodeLine{00088\ \ \ \ \ uint32\_t\ neopixelsAvailable();}
\DoxyCodeLine{00089\ \ \ \ \ \textcolor{keywordtype}{bool}\ newIdiotLight(uint\ \_idiot,\ uint8\_t\ color332,\ \textcolor{keywordtype}{bool}\ startboolstate\ =\ 0);}
\DoxyCodeLine{00090\ \ \ \ \ \textcolor{keywordtype}{void}\ setBoolState(uint\ \_idiot,\ \textcolor{keywordtype}{bool}\ state);}
\DoxyCodeLine{00091\ \ \ \ \ \textcolor{keywordtype}{void}\ setflash(uint\ \_idiot,\ uint8\_t\ count,\ uint8\_t\ pulseh=1,\ uint8\_t\ pulsel=1,\ int32\_t\ onbrit=-\/1,\ int32\_t\ color=0xffffff);}
\DoxyCodeLine{00092\ \ \ \ \ \textcolor{keywordtype}{void}\ update(int16\_t\ heart\_color);}
\DoxyCodeLine{00093\ \ \ \ \ \textcolor{keywordtype}{void}\ enable\_flashdemo(\textcolor{keywordtype}{bool}\ ena);}
\DoxyCodeLine{00094\ \ \ \ \ uint32\_t\ idiot\_neo\_color(uint\ \_idiot);}
\DoxyCodeLine{00095\ \};}
\DoxyCodeLine{00096\ }
\DoxyCodeLine{00097\ \textcolor{keywordtype}{float}\ NeopixelStrip::maxelement(\textcolor{keywordtype}{float}\ r,\ \textcolor{keywordtype}{float}\ g,\ \textcolor{keywordtype}{float}\ b)\ \{}
\DoxyCodeLine{00098\ \ \ \ \ \textcolor{keywordflow}{return}\ (r\ >\ g)\ ?\ ((r\ >\ b)\ ?\ r\ :\ b)\ :\ ((g\ >\ b)\ ?\ g\ :\ b);\ \ \textcolor{comment}{//\ (rgb[0]\ >\ rgb[1])\ ?\ ((rgb[0]\ >\ rgb[2])\ ?\ rgb[0]\ :\ rgb[2])\ :\ ((rgb[1]\ >\ rgb[2])\ ?\ rgb[1]\ :\ rgb[2]);\ \ //std::max(rgb[0],\ rgb[1],\ rgb[2]);\ \ //\ (color.r\ >\ color.g)\ ?\ ((color.r\ >\ color.b)\ ?\ color.r\ :\ color.b)\ :\ ((color.g\ >\ color.b)\ ?\ color.g\ :\ color.b);}}
\DoxyCodeLine{00099\ \}}
\DoxyCodeLine{00100\ \textcolor{keywordtype}{float}\ NeopixelStrip::midelement(\textcolor{keywordtype}{float}\ r,\ \textcolor{keywordtype}{float}\ g,\ \textcolor{keywordtype}{float}\ b)\ \{}
\DoxyCodeLine{00101\ \ \ \ \ \textcolor{keywordflow}{return}\ (r\ >=\ g)\ ?\ ((g\ >=\ b)\ ?\ g\ :\ ((r\ >=\ b)\ ?\ b\ :\ r))\ :\ ((r\ >=\ b)\ ?\ r\ :\ ((b\ >=\ g)\ ?\ g\ :\ b));\ \ \textcolor{comment}{//\ (rgb[0]\ >\ rgb[1])\ ?\ ((rgb[0]\ >\ rgb[2])\ ?\ rgb[0]\ :\ rgb[2])\ :\ ((rgb[1]\ >\ rgb[2])\ ?\ rgb[1]\ :\ rgb[2]);\ \ //std::max(rgb[0],\ rgb[1],\ rgb[2]);\ \ //\ (color.r\ >\ color.g)\ ?\ ((color.r\ >\ color.b)\ ?\ color.r\ :\ color.b)\ :\ ((color.g\ >\ color.b)\ ?\ color.g\ :\ color.b);}}
\DoxyCodeLine{00102\ \}}
\DoxyCodeLine{00103\ \textcolor{keywordtype}{float}\ NeopixelStrip::minelement(\textcolor{keywordtype}{float}\ r,\ \textcolor{keywordtype}{float}\ g,\ \textcolor{keywordtype}{float}\ b)\ \{}
\DoxyCodeLine{00104\ \ \ \ \ \textcolor{keywordflow}{return}\ (r\ <\ g)\ ?\ ((r\ <\ b)\ ?\ r\ :\ b)\ :\ ((g\ <\ b)\ ?\ g\ :\ b);\ \ \textcolor{comment}{//\ (rgb[0]\ >\ rgb[1])\ ?\ ((rgb[0]\ >\ rgb[2])\ ?\ rgb[0]\ :\ rgb[2])\ :\ ((rgb[1]\ >\ rgb[2])\ ?\ rgb[1]\ :\ rgb[2]);\ \ //std::max(rgb[0],\ rgb[1],\ rgb[2]);\ \ //\ (color.r\ >\ color.g)\ ?\ ((color.r\ >\ color.b)\ ?\ color.r\ :\ color.b)\ :\ ((color.g\ >\ color.b)\ ?\ color.g\ :\ color.b);}}
\DoxyCodeLine{00105\ \}}
\DoxyCodeLine{00106\ neorgb\_t\ NeopixelStrip::dimmer(neorgb\_t\ color,\ uint8\_t\ bright)\ \{\ \ \textcolor{comment}{//\ brightness\ 0\ is\ off,\ 255\ is\ max\ brightness\ while\ retaining\ same\ hue\ and\ saturation}}
\DoxyCodeLine{00107\ \ \ \ \ int32\_t\ ret[3];}
\DoxyCodeLine{00108\ \ \ \ \ \textcolor{keywordtype}{float}\ rgb[3]\ =\ \{\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{float}\textcolor{keyword}{>}(color.R),\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{float}\textcolor{keyword}{>}(color.G),\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{float}\textcolor{keyword}{>}(color.B)\ \};}
\DoxyCodeLine{00109\ \ \ \ \ \textcolor{keywordtype}{float}\ fbright\ =\ (float)bright\ /\ maxelement(rgb[0],\ rgb[1],\ rgb[2]);\ \ \textcolor{comment}{//\ std::max(color.r,\ color.g,\ color.b);\ \ //\ 2.55\ =\ 0xff\ /\ 100}}
\DoxyCodeLine{00110\ \ \ \ \ \textcolor{keywordflow}{for}\ (int32\_t\ element=0;\ element<3;\ element++)\ ret[element]\ =\ constrain((int32\_t)(rgb[element]\ *\ fbright),\ 0,\ 255);}
\DoxyCodeLine{00111\ \ \ \ \ \textcolor{comment}{//\ printf("{}D\ br:\%d\ \ inc:\%06x\ \ outc:\%02x\%02x\%02x\(\backslash\)n"{},\ bright,\ color\_to\_888(color),\ (uint8\_t)ret[0],\ (uint8\_t)ret[1],\ (uint8\_t)ret[2]);}}
\DoxyCodeLine{00112\ \ \ \ \ \textcolor{keywordflow}{return}\ neorgb\_t(ret[0],\ ret[1],\ ret[2]);\ \ \textcolor{comment}{//\ return\ CRGB((float)(color.r\ *\ fbright),\ (float)(color.g\ *\ fbright),\ (float)(color.b\ *\ fbright));}}
\DoxyCodeLine{00113\ \}}
\DoxyCodeLine{00114\ neorgb\_t\ NeopixelStrip::desaturate(neorgb\_t\ color,\ int32\_t\ \_desat\_of\_ten)\ \{\ \ \textcolor{comment}{//\ desat\_pc=0\ has\ no\ effect,\ =10\ desaturates\ all\ the\ way\ to\ greyscale,\ =-\/99\ saturates\ to\ max.\ without\ change\ in\ brightness}}
\DoxyCodeLine{00115\ \ \ \ \ uint8\_t\ rgb[3]\ =\ \{\ \textcolor{keyword}{static\_cast<}uint8\_t\textcolor{keyword}{>}(color.R),\ \textcolor{keyword}{static\_cast<}uint8\_t\textcolor{keyword}{>}(color.G),\ \textcolor{keyword}{static\_cast<}uint8\_t\textcolor{keyword}{>}(color.B)\ \};}
\DoxyCodeLine{00116\ \ \ \ \ \textcolor{keywordtype}{float}\ dominant\ =\ maxelement(rgb[0],\ rgb[1],\ rgb[2]);}
\DoxyCodeLine{00117\ \ \ \ \ \textcolor{keywordflow}{if}\ (\_desat\_of\_ten\ >\ 0)}
\DoxyCodeLine{00118\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ element=0;\ element<3;\ element++)}
\DoxyCodeLine{00119\ \ \ \ \ \ \ \ \ \ \ \ \ rgb[element]\ =\ (uint8\_t)(rgb[element]\ +\ ((float)\_desat\_of\_ten\ *\ (dominant\ -\/\ (\textcolor{keywordtype}{float})(rgb[element]))\ /\ 20.0));}
\DoxyCodeLine{00120\ \ \ \ \ \textcolor{comment}{//\ else\ \{}}
\DoxyCodeLine{00121\ \ \ \ \ \textcolor{comment}{//\ \ \ \ \ //\ float\ mide\ =\ midelement(rgb[0],\ rgb[1],\ rgb[2]);}}
\DoxyCodeLine{00122\ \ \ \ \ \textcolor{comment}{//\ \ \ \ \ dominant\ =\ minelement(rgb[0],\ rgb[1],\ rgb[2]);}}
\DoxyCodeLine{00123\ \ \ \ \ \textcolor{comment}{//\ \ \ \ \ for\ (int\ element=0;\ element<3;\ element++)}}
\DoxyCodeLine{00124\ \ \ \ \ \textcolor{comment}{//\ \ \ \ \ \ \ \ \ rgb[element]\ =\ (uint8\_t)(rgb[element]\ -\/\ ((float)desat\_of\_ten\ *\ dominant\ /\ 10.0));}}
\DoxyCodeLine{00125\ \ \ \ \ \textcolor{comment}{//\ \}}}
\DoxyCodeLine{00126\ \ \ \ \ \textcolor{keywordflow}{return}\ neorgb\_t(rgb[0],\ rgb[1],\ rgb[2]);}
\DoxyCodeLine{00127\ \}}
\DoxyCodeLine{00128\ \textcolor{keywordtype}{void}\ NeopixelStrip::recolor\_idiots(int8\_t\ \_idiot)\ \{\ \ \textcolor{comment}{//\ pass\ in\ -\/1\ to\ recolor\ all\ idiots}}
\DoxyCodeLine{00129\ \ \ \ \ int8\_t\ start\ =\ (\_idiot\ >=\ 0)\ ?\ \_idiot\ :\ 0;}
\DoxyCodeLine{00130\ \ \ \ \ int8\_t\ end\ =\ (\_idiot\ >=\ 0)\ ?\ \_idiot\ +\ 1\ :\ idiotcount;}
\DoxyCodeLine{00131\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ start;\ i\ <\ end;\ i++)\ \{}
\DoxyCodeLine{00132\ \ \ \ \ \ \ \ \ cidiot[i][con]\ =\ dimmer(cidiot[i][cnormal],\ hibright);}
\DoxyCodeLine{00133\ \ \ \ \ \ \ \ \ cidiot[i][con]\ =\ desaturate(cidiot[i][con],\ desat\_of\_ten);}
\DoxyCodeLine{00134\ \ \ \ \ \ \ \ \ cidiot[i][coff]\ =\ dimmer(cidiot[i][cnormal],\ lobright);}
\DoxyCodeLine{00135\ \ \ \ \ \ \ \ \ cidiot[i][coff]\ =\ desaturate(cidiot[i][coff],\ desat\_of\_ten);}
\DoxyCodeLine{00136\ \ \ \ \ \}}
\DoxyCodeLine{00137\ \}}
\DoxyCodeLine{00138\ \textcolor{keywordtype}{void}\ NeopixelStrip::refresh()\ \{}
\DoxyCodeLine{00139\ \ \ \ \ int32\_t\ numledstowrite\ =\ (heartbeatNow\ !=\ neostrip[0]);}
\DoxyCodeLine{00140\ \ \ \ \ neostrip[0]\ =\ heartbeatNow;}
\DoxyCodeLine{00141\ \ \ \ \ neoobj.SetPixelColor(0,\ heartbeatNow);}
\DoxyCodeLine{00142\ \ \ \ \ \textcolor{keywordflow}{for}\ (int32\_t\ i=0;\ i<idiotcount;\ i++)\ \{}
\DoxyCodeLine{00143\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (cidiot[i][cnow]\ !=\ neostrip[i+1])\ \{}
\DoxyCodeLine{00144\ \ \ \ \ \ \ \ \ \ \ \ \ neoobj.SetPixelColor\ (1+i,\ cidiot[i][cnow]);}
\DoxyCodeLine{00145\ \ \ \ \ \ \ \ \ \ \ \ \ neostrip[i\ +\ 1]\ =\ cidiot[i][cnow];\ \ \textcolor{comment}{//\ color\_to\_neo(cidiot[i][cnow]);}}
\DoxyCodeLine{00146\ \ \ \ \ \ \ \ \ \ \ \ \ numledstowrite\ =\ 2\ +\ i;\ \ \textcolor{comment}{//\ +\ idiotCount;}}
\DoxyCodeLine{00147\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00148\ \ \ \ \ \}}
\DoxyCodeLine{00149\ \ \ \ \ \textcolor{keywordflow}{if}\ (numledstowrite)\ neoobj.Show(numledstowrite);\ \ \textcolor{comment}{//\ This\ ability\ to\ exclude\ pixels\ at\ the\ end\ of\ the\ strip\ that\ haven't\ changed\ from\ the\ data\ write\ is\ an\ advantage\ of\ neopixelbus\ over\ adafruit}}
\DoxyCodeLine{00150\ \}}
\DoxyCodeLine{00151\ \textcolor{keywordtype}{void}\ NeopixelStrip::setup(\textcolor{keywordtype}{bool}\ viewcontext)\ \{}
\DoxyCodeLine{00152\ \ \ \ \ std::cout\ <<\ \textcolor{stringliteral}{"{}Neopixels..\ "{}};}
\DoxyCodeLine{00153\ \ \ \ \ breadboard\ =\ running\_on\_devboard;}
\DoxyCodeLine{00154\ \ \ \ \ context\ =\ viewcontext;}
\DoxyCodeLine{00155\ \ \ \ \ calc\_lobright();}
\DoxyCodeLine{00156\ \ \ \ \ neoobj.Begin();}
\DoxyCodeLine{00157\ \ \ \ \ heartbeat\_brightness\ =\ brightlev[context][B\_LO];}
\DoxyCodeLine{00158\ \ \ \ \ neoHeartbeatTimer.set(heartbeat\_ekg\_us[3]);}
\DoxyCodeLine{00159\ \ \ \ \ neoFadeTimer.reset();}
\DoxyCodeLine{00160\ \ \ \ \ setbright(neobright);}
\DoxyCodeLine{00161\ \ \ \ \ setdesaturation(neodesat);}
\DoxyCodeLine{00162\ \ \ \ \ heartbeat\_ena(\textcolor{keyword}{true});}
\DoxyCodeLine{00163\ \ \ \ \ std::cout\ <<\ \textcolor{stringliteral}{"{}refresh..\ "{}};}
\DoxyCodeLine{00164\ \ \ \ \ flashtimer.set(fquantum\_us\ *\ fevresolution);}
\DoxyCodeLine{00165\ \ \ \ \ refresh();}
\DoxyCodeLine{00166\ \ \ \ \ std::cout\ <<\ std::endl;}
\DoxyCodeLine{00167\ \}}
\DoxyCodeLine{00168\ \textcolor{keywordtype}{void}\ NeopixelStrip::calc\_lobright()\ \{}
\DoxyCodeLine{00169\ \ \ \ \ lobright\ =\ std::max(3,\ (hibright\ /\ lomultiplier)\ /\ lomultiplier);}
\DoxyCodeLine{00170\ \}}
\DoxyCodeLine{00171\ \textcolor{keywordtype}{void}\ NeopixelStrip::setbright(uint8\_t\ bright\_pc)\ \{\ \ \textcolor{comment}{//\ a\ way\ to\ specify\ brightness\ level\ as\ a\ percent}}
\DoxyCodeLine{00172\ \ \ \ \ hibright\ =\ (uint8\_t)((255.0\ *\ (\textcolor{keywordtype}{float})bright\_pc)\ /\ 100.0);}
\DoxyCodeLine{00173\ \ \ \ \ calc\_lobright();}
\DoxyCodeLine{00174\ \ \ \ \ \textcolor{keywordflow}{if}\ (neo\_heartbeat\_variable\_brightness)\ \{}
\DoxyCodeLine{00175\ \ \ \ \ \ \ \ \ heartbright\ =\ hibright;\ \ \textcolor{comment}{//\ (uint8\_t)((float)hibright\ *\ 0.75);}}
\DoxyCodeLine{00176\ \ \ \ \ \ \ \ \ heartlobright\ =\ lobright;}
\DoxyCodeLine{00177\ \ \ \ \ \}}
\DoxyCodeLine{00178\ \ \ \ \ recolor\_idiots();}
\DoxyCodeLine{00179\ \}}
\DoxyCodeLine{00180\ \textcolor{keywordtype}{void}\ NeopixelStrip::setdesaturation(\textcolor{keywordtype}{float}\ \_desat\_of\_ten)\ \{\ \ \textcolor{comment}{//\ a\ way\ to\ specify\ nite\ or\ daytime\ brightness\ levels}}
\DoxyCodeLine{00181\ \ \ \ \ desat\_of\_ten\ =\ \_desat\_of\_ten;}
\DoxyCodeLine{00182\ \ \ \ \ recolor\_idiots();}
\DoxyCodeLine{00183\ \}}
\DoxyCodeLine{00184\ \textcolor{keywordtype}{void}\ NeopixelStrip::heartbeat\_ena(\textcolor{keywordtype}{bool}\ onoroff)\ \{}
\DoxyCodeLine{00185\ \ \ \ \ neo\_heartbeat\ =\ onoroff;\ \ \textcolor{comment}{//\ Start\ heart\ beating}}
\DoxyCodeLine{00186\ \}}
\DoxyCodeLine{00187\ \textcolor{keywordtype}{void}\ NeopixelStrip::set\_heartcolor(uint8\_t\ \_newcolor)\ \{}
\DoxyCodeLine{00188\ \ \ \ \ uint8\_t\ newcolor\ =\ \_newcolor;}
\DoxyCodeLine{00189\ \ \ \ \ \textcolor{keywordflow}{if}\ (heartbeat\_override\_color\ !=\ 0x00)\ newcolor\ =\ heartbeat\_override\_color;}
\DoxyCodeLine{00190\ \ \ \ \ \textcolor{keywordflow}{if}\ (heartcolor16\ !=\ newcolor)\ \{}
\DoxyCodeLine{00191\ \ \ \ \ \ \ \ \ heartbeatColor\ =\ color\_to\_neo(newcolor);}
\DoxyCodeLine{00192\ \ \ \ \ \ \ \ \ heartcolor\_change\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00193\ \ \ \ \ \ \ \ \ heartcolor16\ =\ newcolor;}
\DoxyCodeLine{00194\ \ \ \ \ \}}
\DoxyCodeLine{00195\ \}}
\DoxyCodeLine{00196\ \textcolor{keywordtype}{void}\ NeopixelStrip::heartbeat\_update()\ \{}
\DoxyCodeLine{00197\ \ \ \ \ \textcolor{keywordflow}{if}\ (!neo\_heartbeat)\ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00198\ \ \ \ \ \textcolor{keywordflow}{if}\ (neoHeartbeatTimer.expired())\ \{}
\DoxyCodeLine{00199\ \ \ \ \ \ \ \ \ heartbeat\_pulse\ =\ !heartbeat\_pulse;}
\DoxyCodeLine{00200\ \ \ \ \ \ \ \ \ ++heartbeat\_state\ \%=\ arraysize(heartbeat\_ekg\_us);}
\DoxyCodeLine{00201\ \ \ \ \ \ \ \ \ neoHeartbeatTimer.set(heartbeat\_ekg\_us[heartbeat\_state]);}
\DoxyCodeLine{00202\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (heartbeat\_pulse)\ heartbeat\_brightness\ =\ heartbright;}
\DoxyCodeLine{00203\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ neoFadeTimer.reset();}
\DoxyCodeLine{00204\ \ \ \ \ \}}
\DoxyCodeLine{00205\ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (!heartbeat\_pulse)\ \{}
\DoxyCodeLine{00206\ \ \ \ \ \ \ \ \ heartbeat\_brightness\_last\ =\ heartbeat\_brightness;}
\DoxyCodeLine{00207\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (neoFadeTimer.expired())\ heartbeat\_brightness\ =\ brightlev[context][B\_MIN];}
\DoxyCodeLine{00208\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ heartbeat\_brightness\ =\ (int8\_t)(heartlobright\ +\ std::max((\textcolor{keywordtype}{double})0,\ (\textcolor{keywordtype}{float})(heartbright\ -\/\ heartlobright)\ *\ (1.0\ -\/\ ((heartbeat\_state\ ==\ 1)\ ?\ 1.5\ :\ 1.0)\ *\ (float)neoFadeTimer.elapsed()\ /\ (float)neo\_fade\_timeout\_us)));}
\DoxyCodeLine{00209\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (heartbeat\_brightness\ >\ heartbeat\_brightness\_last)\ heartbeat\_brightness\ =\ heartbeat\_brightness\_last;}
\DoxyCodeLine{00210\ \ \ \ \ \}}
\DoxyCodeLine{00211\ \ \ \ \ \textcolor{keywordflow}{if}\ (heartcolor\_change\ ||\ heartbeat\_brightness\ !=\ neobright\_last)\ \{}
\DoxyCodeLine{00212\ \ \ \ \ \ \ \ \ heartbeatNow\ =\ dimmer(heartbeatColor,\ heartbeat\_brightness);\ \ \textcolor{comment}{//\ heartbeatNow\ =\ dimmer(desaturate(heartbeatColor,\ desat\_of\_ten),\ heartbeat\_brightness);}}
\DoxyCodeLine{00213\ \ \ \ \ \ \ \ \ heartcolor\_change\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00214\ \ \ \ \ \ \ \ \ neobright\_last\ =\ heartbeat\_brightness;}
\DoxyCodeLine{00215\ \ \ \ \ \}}
\DoxyCodeLine{00216\ \}}
\DoxyCodeLine{00217\ uint32\_t\ NeopixelStrip::neopixelsAvailable()\ \{}
\DoxyCodeLine{00218\ \ \ \ \ \textcolor{keywordflow}{return}\ idiotcount;}
\DoxyCodeLine{00219\ \}}
\DoxyCodeLine{00220\ \textcolor{keywordtype}{bool}\ NeopixelStrip::newIdiotLight(uint\ \_idiot,\ uint8\_t\ color332,\ \textcolor{keywordtype}{bool}\ startboolstate)\ \{}
\DoxyCodeLine{00221\ \ \ \ \ \textcolor{keywordflow}{if}\ (\_idiot\ >\ idiotcount-\/1)\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00222\ \ \ \ \ fset[\_idiot][onoff]\ =\ startboolstate;}
\DoxyCodeLine{00223\ \ \ \ \ cidiot[\_idiot][cnormal]\ =\ color\_to\_neo(color332);}
\DoxyCodeLine{00224\ \ \ \ \ cidiot[\_idiot][clast]\ =\ color\_to\_neo((uint32\_t)0);}
\DoxyCodeLine{00225\ \ \ \ \ fset[\_idiot][fcount]\ =\ 0;}
\DoxyCodeLine{00226\ \ \ \ \ setBoolState(\_idiot,\ startboolstate);}
\DoxyCodeLine{00227\ \ \ \ \ \textcolor{keywordflow}{for}\ (uint8\_t\ pg\ =\ 0;\ pg\ <\ fevpages;\ pg++)\ fevents[\_idiot][pg]\ =\ 0;}
\DoxyCodeLine{00228\ \ \ \ \ recolor\_idiots(\_idiot);}
\DoxyCodeLine{00229\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00230\ \}}
\DoxyCodeLine{00231\ \textcolor{keywordtype}{void}\ NeopixelStrip::setBoolState(uint\ \_idiot,\ \textcolor{keywordtype}{bool}\ state)\ \{}
\DoxyCodeLine{00232\ \ \ \ \ fset[\_idiot][onoff]\ =\ state;}
\DoxyCodeLine{00233\ \}}
\DoxyCodeLine{00234\ \textcolor{keywordtype}{bool}\ NeopixelStrip::fevpop(uint\ \_idiot,\ int8\_t\ pop\_off)\ \{}
\DoxyCodeLine{00235\ \ \ \ \ int8\_t\ page\ =\ pop\_off\ /\ 32;}
\DoxyCodeLine{00236\ \ \ \ \ \textcolor{keywordflow}{return}\ (fevents[\_idiot][page]\ >>\ (pop\_off\ -\/\ 32\ *\ page))\ \&\ 1;\ \ \textcolor{comment}{//\ pop\ a\ bit\ off\ the\ stack\ and\ return\ it}}
\DoxyCodeLine{00237\ \}}
\DoxyCodeLine{00238\ \textcolor{keywordtype}{void}\ NeopixelStrip::fevpush(uint\ \_idiot,\ int8\_t\ push\_off,\ \textcolor{keywordtype}{bool}\ push\_val)\ \{}
\DoxyCodeLine{00239\ \ \ \ \ int8\_t\ page\ =\ push\_off\ /\ 32;}
\DoxyCodeLine{00240\ \ \ \ \ fevents[\_idiot][page]\ |=\ (push\_val\ <<\ (push\_off\ -\/\ 32\ *\ page));}
\DoxyCodeLine{00241\ \}}
\DoxyCodeLine{00242\ \textcolor{comment}{//\ setflash()\ :\ Call\ this\ to\ add\ a\ blink\ sequence\ to\ one\ of\ the\ idiot\ lights\ which\ will\ repeat\ indefinitely\ in\ [up\ to\ 6.4\ sec]\ cycles}}
\DoxyCodeLine{00243\ \textcolor{comment}{//\ \ \ \_idiot\ =\ which\ idiot\ light}}
\DoxyCodeLine{00244\ \textcolor{comment}{//\ \ \ count\ \ =\ number\ of\ blinks\ per\ cycle.\ Use\ 0\ to\ cancel\ a\ previously\ applied\ blink\ pattern}}
\DoxyCodeLine{00245\ \textcolor{comment}{//\ \ \ pulseh\ =\ high\ pulse\ width\ of\ each\ blink,\ in\ increments\ of\ 50\ ms\ (of\ which\ there\ are\ max\ 128\ per\ cycle)}}
\DoxyCodeLine{00246\ \textcolor{comment}{//\ \ \ pulsel\ =\ low\ pulse\ width\ of\ each\ blink,\ in\ increments\ of\ 50\ ms\ (of\ which\ there\ are\ max\ 128\ per\ cycle)}}
\DoxyCodeLine{00247\ \textcolor{comment}{//\ \ \ onbrit\ =\ percent\ brightness\ to\ apply\ during\ high\ pulses\ (use\ -\/1\ to\ avoid)}}
\DoxyCodeLine{00248\ \textcolor{comment}{//\ \ \ color\ \ =\ alternate\ color\ to\ apply\ during\ high\ pulses\ (use\ -\/1\ to\ avoid)}}
\DoxyCodeLine{00249\ \textcolor{keywordtype}{void}\ NeopixelStrip::setflash(uint\ \_idiot,\ uint8\_t\ count,\ uint8\_t\ pulseh,\ uint8\_t\ pulsel,\ int32\_t\ onbrit,\ int32\_t\ color)\ \{}
\DoxyCodeLine{00250\ \ \ \ \ fset[\_idiot][fcount]\ =\ count;}
\DoxyCodeLine{00251\ \ \ \ \ fset[\_idiot][fpulseh]\ =\ std::max((\textcolor{keywordtype}{int})pulseh,\ 1);}
\DoxyCodeLine{00252\ \ \ \ \ fset[\_idiot][fpulsel]\ =\ std::max((\textcolor{keywordtype}{int})pulsel,\ 1);}
\DoxyCodeLine{00253\ \ \ \ \ fset[\_idiot][fonbrit]\ =\ (onbrit\ ==\ -\/1)\ ?\ hibright\ :\ (uint8\_t)onbrit;}
\DoxyCodeLine{00254\ \ \ \ \ cidiot[\_idiot][cflash]\ =\ dimmer((color\ ==\ -\/1)\ ?\ cidiot[\_idiot][cnormal]\ :\ color\_to\_neo((uint32\_t)color),\ hibright);}
\DoxyCodeLine{00255\ \ \ \ \ cidiot[\_idiot][cflash]\ =\ desaturate(dimmer(cidiot[\_idiot][cflash],\ fset[\_idiot][fonbrit]),\ desat\_of\_ten);}
\DoxyCodeLine{00256\ \ \ \ \ \textcolor{keywordflow}{for}\ (uint8\_t\ pg\ =\ 0;\ pg\ <\ fevpages;\ pg++)\ fevents[\_idiot][pg]\ =\ 0;}
\DoxyCodeLine{00257\ \ \ \ \ uint8\_t\ filled\ =\ 0;}
\DoxyCodeLine{00258\ \ \ \ \ uint8\_t\ lstop;}
\DoxyCodeLine{00259\ \ \ \ \ uint8\_t\ patternlen\ =\ fset[\_idiot][fcount]\ *\ (fset[\_idiot][fpulseh]\ +\ fset[\_idiot][fpulsel]);}
\DoxyCodeLine{00260\ \ \ \ \ uint8\_t\ reps\ =\ 1\ +\ (patternlen\ <\ fevresolution\ /\ 3);\ \ \textcolor{comment}{//\ For\ shorter\ flash\ patterns\ repeat\ them\ multiple\ times\ in\ each\ cycle}}
\DoxyCodeLine{00261\ \ \ \ \ \textcolor{keywordflow}{for}\ (uint8\_t\ rep\ =\ 1;\ rep\ <=\ reps;\ rep++)\ \{\ \ \ \ \ \ \ \ }
\DoxyCodeLine{00262\ \ \ \ \ \ \ \ \ lstop\ =\ std::min((\textcolor{keywordtype}{int})fevresolution,\ filled\ +\ patternlen);}
\DoxyCodeLine{00263\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (filled\ <\ lstop)\ \{}
\DoxyCodeLine{00264\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (uint8\_t\ hbit\ =\ 0;\ hbit\ <\ fset[\_idiot][fpulseh];\ hbit++)}
\DoxyCodeLine{00265\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (filled\ <\ lstop)\ fevpush(\_idiot,\ filled++,\ 1);}
\DoxyCodeLine{00266\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (uint8\_t\ lbit\ =\ 0;\ lbit\ <\ fset[\_idiot][fpulsel];\ lbit++)}
\DoxyCodeLine{00267\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (filled\ <\ lstop)\ fevpush(\_idiot,\ filled++,\ 0);\ }
\DoxyCodeLine{00268\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00269\ \ \ \ \ \ \ \ \ filled\ =\ fevresolution\ /\ reps;}
\DoxyCodeLine{00270\ \ \ \ \ \}}
\DoxyCodeLine{00271\ \}}
\DoxyCodeLine{00272\ uint32\_t\ NeopixelStrip::idiot\_neo\_color(uint\ \_idiot)\ \{\ }
\DoxyCodeLine{00273\ \ \ \ \ \textcolor{keywordflow}{return}\ color\_to\_888(cidiot[\_idiot][cnow]);}
\DoxyCodeLine{00274\ \}}
\DoxyCodeLine{00275\ \textcolor{keywordtype}{void}\ NeopixelStrip::enable\_flashdemo(\textcolor{keywordtype}{bool}\ ena)\ \{}
\DoxyCodeLine{00276\ \ \ \ \ \textcolor{keywordflow}{if}\ (ena)\ \{}
\DoxyCodeLine{00277\ \ \ \ \ \ \ \ \ setflash(4,\ 8,\ 8,\ 8,\ 20,\ -\/1);\ \ \textcolor{comment}{//\ brightness\ toggle\ in\ a\ continuous\ squarewave}}
\DoxyCodeLine{00278\ \ \ \ \ \ \ \ \ setflash(5,\ 3,\ 1,\ 2,\ 85);\ \ \ \ \ \ \textcolor{comment}{//\ three\ super-\/quick\ bright\ white\ flashes}}
\DoxyCodeLine{00279\ \ \ \ \ \ \ \ \ setflash(6,\ 2,\ 5,\ 5,\ 0,\ 0);\ \ \ \ \textcolor{comment}{//\ two\ short\ black\ pulses}}
\DoxyCodeLine{00280\ \ \ \ \ \}}
\DoxyCodeLine{00281\ \ \ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00282\ \ \ \ \ \ \ \ \ setflash(4,\ 0);}
\DoxyCodeLine{00283\ \ \ \ \ \ \ \ \ setflash(5,\ 0);}
\DoxyCodeLine{00284\ \ \ \ \ \ \ \ \ setflash(6,\ 0);}
\DoxyCodeLine{00285\ \ \ \ \ \}}
\DoxyCodeLine{00286\ \}}
\DoxyCodeLine{00287\ \textcolor{keywordtype}{void}\ NeopixelStrip::update\_idiot(uint32\_t\ \_idiot)\ \{}
\DoxyCodeLine{00288\ \ \ \ \ cidiot[\_idiot][clast]\ =\ cidiot[\_idiot][cnow];}
\DoxyCodeLine{00289\ \ \ \ \ neorgb\_t\ newnow\ =\ (fset[\_idiot][onoff])\ ?\ cidiot[\_idiot][con]\ :\ cidiot[\_idiot][coff];}
\DoxyCodeLine{00290\ \ \ \ \ \textcolor{keywordflow}{if}\ (!fset[\_idiot][fcount])\ cidiot[\_idiot][cnow]\ =\ newnow;}
\DoxyCodeLine{00291\ \ \ \ \ \textcolor{keywordflow}{else}\ cidiot[\_idiot][cnow]\ =\ fevpop(\_idiot,\ nowepoch)\ ?\ cidiot[\_idiot][cflash]\ :\ newnow;}
\DoxyCodeLine{00292\ \}}
\DoxyCodeLine{00293\ \textcolor{keywordtype}{void}\ NeopixelStrip::update(int16\_t\ heart\_color)\ \{}
\DoxyCodeLine{00294\ \ \ \ \ set\_heartcolor(heart\_color);}
\DoxyCodeLine{00295\ \ \ \ \ heartbeat\_update();\ \ \textcolor{comment}{//\ Update\ our\ beating\ heart}}
\DoxyCodeLine{00296\ \ \ \ \ nowtime\_us\ =\ (uint32\_t)flashtimer.elapsed();}
\DoxyCodeLine{00297\ \ \ \ \ nowepoch\ =\ nowtime\_us\ /\ fquantum\_us;}
\DoxyCodeLine{00298\ \ \ \ \ \textcolor{keywordflow}{for}\ (int32\_t\ i=0;\ i<idiotcount;\ i++)\ \{}
\DoxyCodeLine{00299\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!syspower)\ cidiot[i][cnow]\ =\ neorgb\_t(0);}
\DoxyCodeLine{00300\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ update\_idiot(i);}
\DoxyCodeLine{00301\ \ \ \ \ \}}
\DoxyCodeLine{00302\ \ \ \ \ refresh();}
\DoxyCodeLine{00303\ \ \ \ \ flashtimer.expireset();}
\DoxyCodeLine{00304\ \}}
\DoxyCodeLine{00305\ }
\DoxyCodeLine{00306\ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_idiot_light}{IdiotLight}}\ \{\ \ \textcolor{comment}{//\ defunct:\ currently\ not\ using\ individual\ instances\ for\ each\ idiot\ light.\ i\ couldn't\ get\ it\ to\ work}}
\DoxyCodeLine{00307\ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00308\ \ \ \ \ \textcolor{keywordtype}{bool}*\ val\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00309\ \ \ \ \ \textcolor{keywordtype}{char}\ letters[3]\ =\ \textcolor{stringliteral}{"{}-\/-\/"{}};}
\DoxyCodeLine{00310\ \ \ \ \ uint8\_t\ bitmap[11]\ =\ \{\ 0xff,\ 0xff,\ 0xff,\ 0xff,\ 0xff,\ 0xff,\ 0xff,\ 0xff,\ 0xff,\ 0xff,\ 0xff\ \};}
\DoxyCodeLine{00311\ \ \ \ \ uint8\_t\ color\ =\ DGRY;}
\DoxyCodeLine{00312\ \ \ \ \ \textcolor{keywordtype}{bool}\ last;\ \ \textcolor{comment}{//\ =\ 0;}}
\DoxyCodeLine{00313\ \ \ \ \ \mbox{\hyperlink{class_idiot_light}{IdiotLight}}(\textcolor{keywordtype}{bool}*\ \_val,\ uint8\_t*\ \_map)\ :\ val(\_val)\ \{}
\DoxyCodeLine{00314\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i=0;\ i<11;\ i++)\ bitmap[i]\ =\ \_map[i];}
\DoxyCodeLine{00315\ \ \ \ \ \ \ \ \ last\ =\ *val;}
\DoxyCodeLine{00316\ \ \ \ \ \}\ }
\DoxyCodeLine{00317\ \};}
\DoxyCodeLine{00318\ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_idiot_lights}{IdiotLights}}\ \{}
\DoxyCodeLine{00319\ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00320\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{int}\ row\_count\ =\ 11;}
\DoxyCodeLine{00321\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{int}\ row\_height\ =\ 11;}
\DoxyCodeLine{00322\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{int}\ iconcount\ =\ 33;\ \ \textcolor{comment}{//\ number\ of\ boolean\ values\ included\ on\ the\ screen\ panel\ (not\ the\ neopixels)\ }}
\DoxyCodeLine{00323\ \ \ \ \ \textcolor{keywordtype}{bool}*\ vals[iconcount]\ =\ \{}
\DoxyCodeLine{00324\ \ \ \ \ \ \ \ \ \&diag.err\_sens\_alarm[LOST],\ \&diag.err\_sens\_alarm[RANGE],\ \&diag.temp\_err[ENGINE],\ \&diag.temp\_err[WHEEL],\ hotrc.radiolost\_ptr(),}
\DoxyCodeLine{00325\ \ \ \ \ \ \ \ \ \&panicstop,\ \&shutdown\_incomplete,\ \&parking,\ \&brake.posn\_pid\_active,\ \&brake.autostopping,\ \&brake.autoholding,}
\DoxyCodeLine{00326\ \ \ \ \ \ \ \ \ \&cruise\_adjusting,\ \&car\_hasnt\_moved,\ }
\DoxyCodeLine{00327\ \ \ \ \ \ \ \ \ \&starter.req\_active,\ \&starter.motor,\ tach.pin\_activity\_ptr(),\ \textcolor{comment}{//\ \&powering\_up,}}
\DoxyCodeLine{00328\ \ \ \ \ \ \ \ \ \&web\_disabled,\ \&fuelpump.status\_inverse,}
\DoxyCodeLine{00329\ \ \ \ \ \ \ \ \ \&bootbutton.now,\ \&nowtouch,\ \&encoder.enc\_a,\ \&running\_on\_devboard,\ }
\DoxyCodeLine{00330\ \ \ \ \ \ \ \ \ \&sensidiots[\_GasServo],\ \&sensidiots[\_BrakeMotor],\ \&sensidiots[\_SteerMotor],}
\DoxyCodeLine{00331\ \ \ \ \ \ \ \ \ \&sensidiots[\_HotRC],\ \&sensidiots[\_Speedo],\ \&sensidiots[\_Tach],\ \&sensidiots[\_BrakePres],\ }
\DoxyCodeLine{00332\ \ \ \ \ \ \ \ \ \&sensidiots[\_BrakePosn],\ \&sensidiots[\_Temps],\ \&sensidiots[\_Other],\ \&sensidiots[\_GPIO],}
\DoxyCodeLine{00333\ \ \ \ \ \};\ \ \textcolor{comment}{//\ ,\ sim.enabled\_ptr()}}
\DoxyCodeLine{00334\ \ \ \ \ uint8\_t\ icon[iconcount][11]\ =\ \{}
\DoxyCodeLine{00335\ \ \ \ \ \ \ \ \ \{\ 0x6e,\ 0x6b,\ 0x6b,\ 0x3b,\ 0x00,\ 0x3e,\ 0x71,\ 0x59,\ 0x4d,\ 0x47,\ 0x3e,\ \},\ \ \textcolor{comment}{//\ 0\ =\ "{}S"{}\ w/\ crossout\ symbol}}
\DoxyCodeLine{00336\ \ \ \ \ \ \ \ \ \{\ 0x6e,\ 0x6b,\ 0x6b,\ 0x3b,\ 0x00,\ 0x78,\ 0x70,\ 0x59,\ 0x4d,\ 0x07,\ 0x0f,\ \},\ \ \textcolor{comment}{//\ 1\ =\ "{}S"{}\ w/\ double\ arrow}}
\DoxyCodeLine{00337\ \ \ \ \ \ \ \ \ \{\ 0x7f,\ 0x7f,\ 0x6b,\ 0x6b,\ 0x00,\ 0x70,\ 0x10,\ 0x10,\ 0x77,\ 0x65,\ 0x07,\ \},\ \ \textcolor{comment}{//\ 2\ =\ "{}En"{}\ w/\ degree\ symbol}}
\DoxyCodeLine{00338\ \ \ \ \ \ \ \ \ \{\ 0x7f,\ 0x30,\ 0x18,\ 0x30,\ 0x7f,\ 0x00,\ 0x7e,\ 0x10,\ 0x77,\ 0x65,\ 0x07,\ \},\ \ \textcolor{comment}{//\ 3\ =\ "{}Wh"{}\ w/\ degree\ symbol}}
\DoxyCodeLine{00339\ \ \ \ \ \ \ \ \ \{\ 0x7a,\ 0x7f,\ 0x4f,\ 0x17,\ 0x06,\ 0x00,\ 0x22,\ 0x1c,\ 0x00,\ 0x41,\ 0x3e,\ \},\ \ \textcolor{comment}{//\ 4\ =\ hotrc\ w/\ radio\ waves}}
\DoxyCodeLine{00340\ \ \ \ \ \ \ \ \ \{\ 0x7f,\ 0x7f,\ 0x09,\ 0x09,\ 0x77,\ 0x16,\ 0x70,\ 0x60,\ 0x00,\ 0x6f,\ 0x6f,\ \},\ \ \textcolor{comment}{//\ 5\ =\ "{}Pn!"{}}}
\DoxyCodeLine{00341\ \ \ \ \ \ \ \ \ \{\ 0x16,\ 0x15,\ 0x0d,\ 0x60,\ 0x6f,\ 0x04,\ 0x6f,\ 0x60,\ 0x0f,\ 0x69,\ 0x66,\ \},\ \ \textcolor{comment}{//\ 6\ =\ "{}SHD..."{}}}
\DoxyCodeLine{00342\ \ \ \ \ \ \ \ \ \{\ 0x3e,\ 0x63,\ 0x41,\ 0x7d,\ 0x7d,\ 0x55,\ 0x55,\ 0x5d,\ 0x49,\ 0x63,\ 0x3e,\ \},\ \ \textcolor{comment}{//\ 7\ =\ circle-\/"{}P"{}}}
\DoxyCodeLine{00343\ \ \ \ \ \ \ \ \ \{\ 0x7c,\ 0x46,\ 0x7f,\ 0x7f,\ 0x33,\ 0x12,\ 0x12,\ 0x12,\ 0x1e,\ 0x12,\ 0x0c,\ \},\ \ \textcolor{comment}{//\ 8\ =\ linear\ actuator\ or\ choad}}
\DoxyCodeLine{00344\ \ \ \ \ \ \ \ \ \{\ 0x3e,\ 0x49,\ 0x1c,\ 0x00,\ 0x6e,\ 0x6b,\ 0x3b,\ 0x00,\ 0x1c,\ 0x49,\ 0x3e,\ \},\ \ \textcolor{comment}{//\ 9\ =\ brake\ assembly\ w/\ "{}S"{}}}
\DoxyCodeLine{00345\ \ \ \ \ \ \ \ \ \{\ 0x3e,\ 0x49,\ 0x1c,\ 0x00,\ 0x7f,\ 0x18,\ 0x7f,\ 0x00,\ 0x1c,\ 0x49,\ 0x3e,\ \},\ \ \textcolor{comment}{//\ 10\ =\ brake\ assembly\ w/\ "{}H"{}}}
\DoxyCodeLine{00346\ \ \ \ \ \ \ \ \ \{\ 0x08,\ 0x1c,\ 0x36,\ 0x00,\ 0x3e,\ 0x63,\ 0x63,\ 0x00,\ 0x36,\ 0x1c,\ 0x08,\ \},\ \ \textcolor{comment}{//\ 11\ =\ "{}<C>"{}}}
\DoxyCodeLine{00347\ \ \ \ \ \ \ \ \ \{\ 0x3d,\ 0x43,\ 0x07,\ 0x00,\ 0x3e,\ 0x63,\ 0x55,\ 0x49,\ 0x55,\ 0x63,\ 0x3e,\ \},\ \ \textcolor{comment}{//\ 12\ =\ rotation\ arrow\ w/\ X\ wheel}}
\DoxyCodeLine{00348\ \ \ \ \ \ \ \ \ \{\ 0x7f,\ 0x19,\ 0x6e,\ 0x00,\ 0x7f,\ 0x6b,\ 0x6b,\ 0x00,\ 0x3e,\ 0x23,\ 0x7e,\ \},\ \ \textcolor{comment}{//\ 13\ =\ "{}REQ"{}}}
\DoxyCodeLine{00349\ \ \ \ \ \ \ \ \ \{\ 0x3e,\ 0x41,\ 0x7f,\ 0x7b,\ 0x7b,\ 0x7b,\ 0x3e,\ 0x1c,\ 0x7f,\ 0x55,\ 0x7f,\ \},\ \ \textcolor{comment}{//\ 14\ =\ motor\ w/\ spur\ gear}}
\DoxyCodeLine{00350\ \ \ \ \ \ \ \ \ \{\ 0x4c,\ 0x2a,\ 0x19,\ 0x00,\ 0x63,\ 0x63,\ 0x63,\ 0x63,\ 0x77,\ 0x3e,\ 0x1c,\ \},\ \ \textcolor{comment}{//\ 15\ =\ magnet\ w/\ zap}}
\DoxyCodeLine{00351\ \ \ \ \ \ \ \ \ \{\ 0x36,\ 0x1c,\ 0x36,\ 0x00,\ 0x22,\ 0x1c,\ 0x00,\ 0x22,\ 0x1c,\ 0x41,\ 0x3e,\ \},\ \ \textcolor{comment}{//\ 16\ =\ wifi\ symbol\ w/\ X}}
\DoxyCodeLine{00352\ \ \ \ \ \ \ \ \ \{\ 0x40,\ 0x7e,\ 0x79,\ 0x79,\ 0x79,\ 0x7e,\ 0x48,\ 0x38,\ 0x61,\ 0x3f,\ 0x86,\ \},\ \ \textcolor{comment}{//\ 17\ =\ fuel}}
\DoxyCodeLine{00353\ \ \ \ \ \ \ \ \ \{\ 0x01,\ 0x7f,\ 0x7f,\ 0x7f,\ 0x3f,\ 0x38,\ 0x74,\ 0x70,\ 0x70,\ 0x70,\ 0x60,\ \},\ \ \textcolor{comment}{//\ 18\ =\ boot}}
\DoxyCodeLine{00354\ \ \ \ \ \ \ \ \ \{\ 0x78,\ 0x7c,\ 0x7f,\ 0x7f,\ 0x7c,\ 0x7c,\ 0x1c,\ 0x0c,\ 0x0c,\ 0x0c,\ 0x0c,\ \},\ \ \textcolor{comment}{//\ 19\ =\ finger}}
\DoxyCodeLine{00355\ \ \ \ \ \ \ \ \ \{\ 0x0e,\ 0x1d,\ 0x7d,\ 0x7d,\ 0x1d,\ 0x0e,\ 0x00,\ 0x7f,\ 0x6b,\ 0x6b,\ 0x63,\ \},\ \ \textcolor{comment}{//\ 20\ =\ encoder\ "{}E"{}}}
\DoxyCodeLine{00356\ \ \ \ \ \ \ \ \ \{\ 0x7f,\ 0x63,\ 0x3e,\ 0x00,\ 0x7f,\ 0x6b,\ 0x6b,\ 0x00,\ 0x7f,\ 0x30,\ 0x1f,\ \},\ \ \textcolor{comment}{//\ 21\ =\ "{}DEV"{}}}
\DoxyCodeLine{00357\ \ \ \ \ \ \ \ \ \{\ 0x3e,\ 0x63,\ 0x7b,\ 0x00,\ 0x7e,\ 0x13,\ 0x7e,\ 0x00,\ 0x6e,\ 0x6b,\ 0x3b,\ \},\ \ \textcolor{comment}{//\ sensor\ -\/\ "{}GAS"{}}}
\DoxyCodeLine{00358\ \ \ \ \ \ \ \ \ \{\ 0x3e,\ 0x49,\ 0x08,\ 0x1c,\ 0x1c,\ 0x1c,\ 0x1c,\ 0x1c,\ 0x08,\ 0x49,\ 0x3e,\ \},\ \ \textcolor{comment}{//\ sensor\ -\/\ brakes\ or\ tie\ fighter}}
\DoxyCodeLine{00359\ \ \ \ \ \ \ \ \ \{\ 0x00,\ 0x1c,\ 0x26,\ 0x45,\ 0x49,\ 0x79,\ 0x49,\ 0x45,\ 0x26,\ 0x1c,\ 0x00,\ \},\ \ \textcolor{comment}{//\ sensor\ -\/\ steering\ wheel}}
\DoxyCodeLine{00360\ \ \ \ \ \ \ \ \ \{\ 0x00,\ 0x00,\ 0x00,\ 0x72,\ 0x7f,\ 0x7f,\ 0x4f,\ 0x03,\ 0x06,\ 0x00,\ 0x00,\ \},\ \ \textcolor{comment}{//\ sensor\ -\/\ hotrc}}
\DoxyCodeLine{00361\ \ \ \ \ \ \ \ \ \{\ 0x60,\ 0x66,\ 0x06,\ 0x10,\ 0x30,\ 0x63,\ 0x43,\ 0x00,\ 0x6e,\ 0x6b,\ 0x3b,\ \},\ \ \textcolor{comment}{//\ sensor\ -\/\ gauge\ "{}S"{}}}
\DoxyCodeLine{00362\ \ \ \ \ \ \ \ \ \{\ 0x60,\ 0x66,\ 0x06,\ 0x10,\ 0x30,\ 0x63,\ 0x43,\ 0x00,\ 0x06,\ 0x7e,\ 0x06,\ \},\ \ \textcolor{comment}{//\ sensor\ -\/\ gauge\ "{}T"{}}}
\DoxyCodeLine{00363\ \ \ \ \ \ \ \ \ \{\ 0x42,\ 0x24,\ 0x2f,\ 0x44,\ 0x42,\ 0x20,\ 0x22,\ 0x44,\ 0x4f,\ 0x24,\ 0x22,\ \},\ \ \textcolor{comment}{//\ sensor\ -\/\ pressure\ waves}}
\DoxyCodeLine{00364\ \ \ \ \ \ \ \ \ \{\ 0x7e,\ 0x42,\ 0x46,\ 0x42,\ 0x4e,\ 0x42,\ 0x46,\ 0x42,\ 0x4e,\ 0x42,\ 0x7e,\ \},\ \ \textcolor{comment}{//\ sensor\ -\/\ ruler}}
\DoxyCodeLine{00365\ \ \ \ \ \ \ \ \ \{\ 0x02,\ 0x07,\ 0x35,\ 0x77,\ 0x7a,\ 0x1c,\ 0x0e,\ 0x1f,\ 0x13,\ 0x06,\ 0x04,\ \},\ \ \textcolor{comment}{//\ sensor\ -\/\ thermometer\ or\ schlong}}
\DoxyCodeLine{00366\ \ \ \ \ \ \ \ \ \{\ 0x7f,\ 0x6b,\ 0x6b,\ 0x00,\ 0x03,\ 0x7f,\ 0x03,\ 0x00,\ 0x3e,\ 0x63,\ 0x63,\ \},\ \ \textcolor{comment}{//\ sensor\ -\/\ "{}ETC"{}}}
\DoxyCodeLine{00367\ \ \ \ \ \ \ \ \ \{\ 0x2a,\ 0x2a,\ 0x2a,\ 0x7f,\ 0x7d,\ 0x7f,\ 0x7f,\ 0x7f,\ 0x2a,\ 0x2a,\ 0x2a,\ \},\ \ \textcolor{comment}{//\ sensor\ -\/\ chip}}
\DoxyCodeLine{00368\ \ \ \ \ \};}
\DoxyCodeLine{00369\ \ \ \ \ \ \textcolor{comment}{//\ \{\ 0x00,\ 0x3e,\ 0x63,\ 0x41,\ 0x40,\ 0x4f,\ 0x40,\ 0x41,\ 0x63,\ 0x3e,\ 0x00,\ \},\ \ //\ power\ symbol}}
\DoxyCodeLine{00370\ \ \ \ \ \ \textcolor{comment}{//\ \{\ 0x7a,\ 0x7f,\ 0x4f,\ 0x17,\ 0x06,\ 0x00,\ 0x02,\ 0x5b,\ 0x59,\ 0x0f,\ 0x06,\ \},\ \ //\ hotrc\ w/\ "{}?"{}}}
\DoxyCodeLine{00371\ \ \ \ \ \ \textcolor{comment}{//\ \{\ 0x10,\ 0x18,\ 0x68,\ 0x78,\ 0x10,\ 0x78,\ 0x68,\ 0x18,\ 0x12,\ 0x07,\ 0x7f,\ \},\ \ //\ carpet\ at\ stop\ sign}}
\DoxyCodeLine{00372\ \ \ \ \ \ \textcolor{comment}{//\ \{\ 0x2a,\ 0x2a,\ 0x7f,\ 0x61,\ 0x7f,\ 0x43,\ 0x5b,\ 0x43,\ 0x7f,\ 0x2a,\ 0x2a,\ \},\ \ //\ sensor\ -\/\ chip\ w/\ "{}IO"{}}}
\DoxyCodeLine{00373\ \ \ \ \ \ \textcolor{comment}{//\ \{\ 0x0f,\ 0x05,\ 0x75,\ 0x15,\ 0x35,\ 0x15,\ 0x37,\ 0x15,\ 0x32,\ 0x10,\ 0x30,\ \},\ \ //\ sensor\ -\/\ piston\ w/\ ruler}}
\DoxyCodeLine{00374\ \ \ \ \ \ \textcolor{comment}{//\ \{\ 0x08,\ 0x00,\ 0x3a,\ 0x18,\ 0x29,\ 0x40,\ 0x01,\ 0x00,\ 0x5a,\ 0x54,\ 0x64,\ \},\ \ //\ sensor\ -\/\ gauge\ "{}S"{}}}
\DoxyCodeLine{00375\ \ \ \ \ \ \textcolor{comment}{//\ \{\ 0x08,\ 0x00,\ 0x3a,\ 0x18,\ 0x29,\ 0x40,\ 0x01,\ 0x00,\ 0x0a,\ 0x78,\ 0x08,\ \},\ \ //\ sensor\ -\/\ gauge\ "{}T"{}}}
\DoxyCodeLine{00376\ \ \ \ \ \ \textcolor{comment}{//\ \{\ 0x08,\ 0x00,\ 0x3a,\ 0x18,\ 0x29,\ 0x40,\ 0x71,\ 0x10,\ 0x22,\ 0x10,\ 0x78,\ \},\ \ //\ gauge\ "{}M"{}}}
\DoxyCodeLine{00377\ \ \ \ \ \ \textcolor{comment}{//\ \{\ 0x6e,\ 0x6b,\ 0x3b,\ 0x00,\ 0x7f,\ 0x00,\ 0x7f,\ 0x06,\ 0x1c,\ 0x06,\ 0x7f,\ \},\ \ //\ "{}SIM"{}}}
\DoxyCodeLine{00378\ \ \ \ \ \ \textcolor{comment}{//\ \{\ 0x0e,\ 0x1d,\ 0x7d,\ 0x1d,\ 0x0e,\ 0x00,\ 0x7e,\ 0x0b,\ 0x09,\ 0x0b,\ 0x7e,\ \},\ \ //\ encoder\ "{}A"{}}}
\DoxyCodeLine{00379\ \ \ \ \ \ \textcolor{comment}{//\ \{\ 0x0e,\ 0x1d,\ 0x7d,\ 0x1d,\ 0x0e,\ 0x00,\ 0x7f,\ 0x49,\ 0x49,\ 0x7f,\ 0x36,\ \},\ \ //\ encoder\ "{}B"{}}}
\DoxyCodeLine{00380\ \ \ \ \ \ \textcolor{comment}{//\ \{\ 0x02,\ 0x07,\ 0x32,\ 0x78,\ 0x78,\ 0x30,\ 0x00,\ 0x06,\ 0x0f,\ 0x0f,\ 0x06,\ \},\ \ //\ balls}}
\DoxyCodeLine{00381\ \ \ \ \ \ \textcolor{comment}{//\ \{\ 0x3e,\ 0x41,\ 0x1c,\ 0x22,\ 0x08,\ 0x7c,\ 0x08,\ 0x22,\ 0x1c,\ 0x41,\ 0x3e,\ \},\ \ //\ X\ w/\ waves}}
\DoxyCodeLine{00382\ \ \ \ \ \ \textcolor{comment}{//\ \{\ 0x63,\ 0x36,\ 0x1c,\ 0x36,\ 0x63,\ 0x14,\ 0x08,\ 0x22,\ 0x1c,\ 0x41,\ 0x3e,\ \},\ \ //\ wifi\ symbol\ w/\ X}}
\DoxyCodeLine{00383\ \ \ \ \ std::string\ letters[iconcount]\ =\ \{}
\DoxyCodeLine{00384\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}SL"{}},\ \textcolor{stringliteral}{"{}SR"{}},\ \textcolor{stringliteral}{"{}\(\backslash\)xf7"{}}\textcolor{stringliteral}{"{}E"{}},\ \textcolor{stringliteral}{"{}\(\backslash\)xf7"{}}\textcolor{stringliteral}{"{}W"{}},\ \textcolor{stringliteral}{"{}P\(\backslash\)x13"{}},\ \textcolor{stringliteral}{"{}RC"{}},\ \textcolor{stringliteral}{"{}SI"{}},\ \textcolor{stringliteral}{"{}Pk"{}},\ \textcolor{stringliteral}{"{}BP"{}},\ \textcolor{stringliteral}{"{}AS"{}},\ \textcolor{stringliteral}{"{}AH"{}},}
\DoxyCodeLine{00385\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Aj"{}},\ \textcolor{stringliteral}{"{}HM"{}},\ \textcolor{stringliteral}{"{}Rq"{}},\ \textcolor{stringliteral}{"{}St"{}},\ \textcolor{stringliteral}{"{}PU"{}},\ \textcolor{stringliteral}{"{}Wi"{}},\ \textcolor{stringliteral}{"{}BB"{}},\ \textcolor{stringliteral}{"{}NT"{}},\ \textcolor{stringliteral}{"{}eA"{}},\ \textcolor{stringliteral}{"{}Sm"{}},\ \textcolor{stringliteral}{"{}Dv"{}},\ }
\DoxyCodeLine{00386\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Th"{}},\ \textcolor{stringliteral}{"{}Br"{}},\ \textcolor{stringliteral}{"{}St"{}},\ \textcolor{stringliteral}{"{}RC"{}},\ \textcolor{stringliteral}{"{}Sp"{}},\ \textcolor{stringliteral}{"{}Tc"{}},\ \textcolor{stringliteral}{"{}Pr"{}},\ \textcolor{stringliteral}{"{}Ps"{}},\ \textcolor{stringliteral}{"{}Tm"{}},\ \textcolor{stringliteral}{"{}Ot"{}},\ \textcolor{stringliteral}{"{}IO"{}},}
\DoxyCodeLine{00387\ \ \ \ \ \};}
\DoxyCodeLine{00388\ \ \ \ \ uint8\_t\ color[2][iconcount]\ =\ \{}
\DoxyCodeLine{00389\ \ \ \ \ \ \textcolor{comment}{//\ \{\ 0xa9,\ 0xad,\ 0xb1,\ 0xb5,\ 0x95,\ 0x55,\ 0x5a,\ 0x32,\ 0x2a,\ 0x66,\ 0xa6,\ \ //\ these\ are\ brighter\ dim\ versions}}
\DoxyCodeLine{00390\ \ \ \ \ \ \ \ \ \{\ 0x60,\ 0x64,\ 0x68,\ 0x6c,\ 0x2c,\ 0x51,\ 0x2d,\ 0x09,\ 0x06,\ 0x45,\ 0x65,}
\DoxyCodeLine{00391\ \ \ \ \ \ \ \ \ \ \ 0x60,\ 0x64,\ 0x68,\ 0x6c,\ 0x2c,\ 0x51,\ 0x2d,\ 0x09,\ 0x06,\ 0x45,\ 0x65,}
\DoxyCodeLine{00392\ \ \ \ \ \ \ \ \ \ \ 0x60,\ 0x64,\ 0x68,\ 0x6c,\ 0x2c,\ 0x51,\ 0x2d,\ 0x09,\ 0x06,\ 0x45,\ 0x65,\ \},}
\DoxyCodeLine{00393\ \ \ \ \ \ \ \ \ \{\ 0xe9,\ 0xf1,\ 0xf9,\ 0xfd,\ 0xbd,\ 0x5d,\ 0x5e,\ 0x5b,\ 0x53,\ 0x8b,\ 0xeb,}
\DoxyCodeLine{00394\ \ \ \ \ \ \ \ \ \ \ 0xe9,\ 0xf1,\ 0xf9,\ 0xfd,\ 0xbd,\ 0x5d,\ 0x5e,\ 0x5b,\ 0x53,\ 0x8b,\ 0xeb,}
\DoxyCodeLine{00395\ \ \ \ \ \ \ \ \ \ \ 0xe9,\ 0xf1,\ 0xf9,\ 0xfd,\ 0xbd,\ 0x5d,\ 0x5e,\ 0x5b,\ 0x53,\ 0x8b,\ 0xeb,\ \}}
\DoxyCodeLine{00396\ \ \ \ \ \};}
\DoxyCodeLine{00397\ \ \ \ \ \textcolor{keywordtype}{bool}\ last[iconcount];}
\DoxyCodeLine{00398\ \ \ \ \ uint8\_t\ idiot\_saturation\ =\ 225;\ \ \textcolor{comment}{//\ 170-\/195\ makes\ nice\ bright\ yet\ distinguishable\ colors}}
\DoxyCodeLine{00399\ \ \ \ \ uint8\_t\ idiot\_hue\_offset\ =\ 240;}
\DoxyCodeLine{00400\ \ \ \ \ \mbox{\hyperlink{class_idiot_lights}{IdiotLights}}()\ \{}
\DoxyCodeLine{00401\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i=0;\ i<iconcount;\ i++)\ last[i]\ =\ *(vals[i]);}
\DoxyCodeLine{00402\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ set\_colors();}}
\DoxyCodeLine{00403\ \ \ \ \ \}}
\DoxyCodeLine{00404\ \ \ \ \ \textcolor{keywordtype}{void}\ setup(\mbox{\hyperlink{class_neopixel_strip}{NeopixelStrip}}*\ \_neo)\ \{}
\DoxyCodeLine{00405\ \ \ \ \ \ \ \ \ myneo\ =\ \_neo;}
\DoxyCodeLine{00406\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ int\ n\ =\ new\_idiot(\&(err\_sens\_alarm[LOST]),\ "{}SL"{},\ \{\ 0x6e,\ 0x6b,\ 0x6b,\ 0x3b,\ 0x00,\ 0x3e,\ 0x71,\ 0x59,\ 0x4d,\ 0x47,\ 0x3e\ \})}}
\DoxyCodeLine{00407\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (int32\_t\ i=0;\ i<iconcount;\ i++)\ myneo-\/>newIdiotLight(i,\ color[ON][i],\ val(i));}
\DoxyCodeLine{00408\ \ \ \ \ \ \ \ \ std::cout\ <<\ \textcolor{stringliteral}{"{}Idiot\ lights..\ set\ up\ "{}}\ <<\ iconcount\ <<\ \textcolor{stringliteral}{"{}\ toggle\ icons\ \&\ "{}}\ <<\ myneo-\/>idiotcount\ <<\ \textcolor{stringliteral}{"{}\ neopixel\ hazard\ lights"{}}\ <<\ std::endl;}
\DoxyCodeLine{00409\ \ \ \ \ \}}
\DoxyCodeLine{00410\ \ \ \ \ \textcolor{keywordtype}{bool}\ val(\textcolor{keywordtype}{int}\ index)\ \{\ \textcolor{keywordflow}{return}\ *(vals[index]);\ \}}
\DoxyCodeLine{00411\ \ \ \ \ \textcolor{keywordtype}{bool}*\ ptr(\textcolor{keywordtype}{int}\ index)\ \{\ \textcolor{keywordflow}{return}\ vals[index];\ \}}
\DoxyCodeLine{00412\ \ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00413\ \ \ \ \ \mbox{\hyperlink{class_neopixel_strip}{NeopixelStrip}}*\ myneo;}
\DoxyCodeLine{00414\ \ \ \ \ \textcolor{keywordtype}{void}\ set\_colors()\ \{}
\DoxyCodeLine{00415\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (int32\_t\ i=0;\ i<iconcount;\ i++)\ \{}
\DoxyCodeLine{00416\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ division\ =\ row\_count;}
\DoxyCodeLine{00417\ \ \ \ \ \ \ \ \ \ \ \ \ uint32\_t\ color32\ =\ hsv\_to\_rgb<uint32\_t>((65535\ *\ (uint16\_t)(i\ \%\ division)\ /\ division\ +\ idiot\_hue\_offset),\ idiot\_saturation,\ 255);\ \ \textcolor{comment}{//\ ,\ 0,\ 220);}}
\DoxyCodeLine{00418\ \ \ \ \ \ \ \ \ \ \ \ \ color[ON][i]\ =\ color\_to\_332(color32);\ \ \textcolor{comment}{//\ 5957\ =\ 2\string^16/11}}
\DoxyCodeLine{00419\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00420\ \ \ \ \ \}}
\DoxyCodeLine{00421\ \};}

\end{DoxyCode}
